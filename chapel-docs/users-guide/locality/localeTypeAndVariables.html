

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The locale Type and Variables &mdash; Chapel Documentation 1.23</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="on-clauses: controlling locality/affinity" href="onClauses.html" />
    <link rel="prev" title="Compiling and Executing Multi-Locale Programs" href="compilingAndExecutingMultiLocalePrograms.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

<a href="../../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>1.23
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "1.23";
$pagename = "users-guide/locality/localeTypeAndVariables";
include "../..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Tools</a></li>
</ul>
<p class="caption"><span class="caption-text">Writing Chapel Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../builtins/index.html">Built-in Types and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/standard.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Chapel Users Guide (WIP)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#base-language">Base Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#task-parallelism">Task Parallelism</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#data-parallelism">Data Parallelism</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#locality">Locality</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="localesInChapel.html"><em>Locales</em>: representing architectural locality</a></li>
<li class="toctree-l3"><a class="reference internal" href="compilingAndExecutingMultiLocalePrograms.html">Compiling and Executing Multi-Locale Programs</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">The <strong>locale</strong> Type and Variables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-locale-type">The <em>locale</em> Type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#numlocales"><em>numLocales</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-locales-array">The <em>Locales</em> Array</a></li>
<li class="toctree-l4"><a class="reference internal" href="#here"><em>here</em></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="onClauses.html"><strong>on</strong>-clauses: controlling locality/affinity</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chapel Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Chapel Users Guide (WIP)</a> &raquo;</li>
        
      <li>The <strong>locale</strong> Type and Variables</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/users-guide/locality/localeTypeAndVariables.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-locale-type-and-variables">
<h1>The <strong>locale</strong> Type and Variables<a class="headerlink" href="#the-locale-type-and-variables" title="Permalink to this headline">¶</a></h1>
<p>The Chapel language has a locale type and a number of built-in
variables that permit a programmer to refer to, and reason about, the
locales on which the program is running.</p>
<div class="section" id="the-locale-type">
<h2>The <em>locale</em> Type<a class="headerlink" href="#the-locale-type" title="Permalink to this headline">¶</a></h2>
<p>Locales are represented within Chapel programs using a built-in type
named <code class="docutils literal notranslate"><span class="pre">locale</span></code>.  The locale type supports a fixed number of unique
values equal to the number of locales on which the program is
executing, each value typically corresponding to one of the compute
nodes on which the program is executing.</p>
<p>Locale values support methods that permit a programmer to make queries
about the target architecture’s capabilities, such as the maximum
amount of task parallelism supported or the amount of physical memory
available on the locale.  For details on this interface, refer to
<a class="reference internal" href="../../builtins/ChapelLocale.html#module-ChapelLocale" title="ChapelLocale: A *locale* is a Chapel abstraction for a piece of a target"><code class="xref chpl chpl-mod docutils literal notranslate"><span class="pre">ChapelLocale</span></code></a>.</p>
<p>As a simple example, each locale value supports an <code class="docutils literal notranslate"><span class="pre">id</span></code> method that
reports its unique (0-based) ID.  We’ll see the use of this method in
subsequent program examples.</p>
</div>
<div class="section" id="numlocales">
<h2><em>numLocales</em><a class="headerlink" href="#numlocales" title="Permalink to this headline">¶</a></h2>
<p>The variable <em>numLocales</em> is a built-in integer constant indicating
the number of locales on which the program is running.  For example,
when run on four locales, the following program:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">examples/users-guide/locality/numLocalesVar.chpl</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;I&#39;m running on &quot;</span><span class="p">,</span> <span class="nx">numLocales</span><span class="p">,</span> <span class="s">&quot; locale(s)&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<p>would generate:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>I&#39;m running on 4 locale(s)
</pre></div>
</div>
</div>
<div class="section" id="the-locales-array">
<h2>The <em>Locales</em> Array<a class="headerlink" href="#the-locales-array" title="Permalink to this headline">¶</a></h2>
<p>Chapel programs also have a built-in <em>numLocales</em>-element array,
<em>Locales</em>, whose elements are the distinct locale values on which the
program is running.  This array is defined over a built-in domain,
<em>LocaleSpace</em>.  Both the domain and array are 1-dimensional and use
dense, 0-based indexing.</p>
<p>Each locale value’s ID corresponds to its index in the <em>Locales</em>
array.  This is demonstrated by the following program which first
prints the <em>LocaleSpace</em> domain and then iterates over it, showing
that the ID of each value in <em>Locales</em> corresponds to its index:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">examples/users-guide/locality/localesDomArr.chpl</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;LocaleSpace is: &quot;</span><span class="p">,</span> <span class="nx">LocaleSpace</span><span class="p">);</span>

<span class="k">for</span> <span class="nx">i</span> <span class="kd">in</span> <span class="nx">LocaleSpace</span> <span class="k">do</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;Locale #&quot;</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="s">&quot;&#39;s ID is: &quot;</span><span class="p">,</span> <span class="nx">Locales</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">id</span><span class="p">);</span>
</pre></div>
</div>
</div>
<p>Running on four locales, its output is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>LocaleSpace is: {0..3}
Locale #0&#39;s ID is: 0
Locale #1&#39;s ID is: 1
Locale #2&#39;s ID is: 2
Locale #3&#39;s ID is: 3
</pre></div>
</div>
</div>
<div class="section" id="here">
<h2><em>here</em><a class="headerlink" href="#here" title="Permalink to this headline">¶</a></h2>
<p>The final built-in locale variable that we’ll cover in this section is
<em>here</em>.  For any given task, this variable resolves to the locale
value on which the task is running.</p>
<p>As an example, the following program demonstrates that Chapel programs
begin their execution on locale 0:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">examples/users-guide/locality/here-id.chpl</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;Chapel programs start as a single task running on locale &quot;</span><span class="p">,</span> <span class="nx">here</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
</pre></div>
</div>
</div>
<p>Running it on any number of locales generates:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Chapel programs start as a single task running on locale 0
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="onClauses.html" class="btn btn-neutral float-right" title="on-clauses: controlling locality/affinity" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="compilingAndExecutingMultiLocalePrograms.html" class="btn btn-neutral float-left" title="Compiling and Executing Multi-Locale Programs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Hewlett Packard Enterprise Development LP

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 



</body>
</html>