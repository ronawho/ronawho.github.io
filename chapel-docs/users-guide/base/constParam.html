

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Constant Declarations &mdash; Chapel Documentation 1.23</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Type Aliases" href="typeAliases.html" />
    <link rel="prev" title="Literal Values for Basic Types" href="basicValues.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

<a href="../../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>1.23
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "1.23";
$pagename = "users-guide/base/constParam";
include "../..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Tools</a></li>
</ul>
<p class="caption"><span class="caption-text">Writing Chapel Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../builtins/index.html">Built-in Types and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/standard.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Chapel Users Guide (WIP)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#overview">Overview</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#base-language">Base Language</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="hello.html">Hello world: simple console output</a></li>
<li class="toctree-l3"><a class="reference internal" href="vars.html">Variable Declarations</a></li>
<li class="toctree-l3"><a class="reference internal" href="basicTypes.html">Basic Types: booleans, numbers, and strings</a></li>
<li class="toctree-l3"><a class="reference internal" href="basicValues.html">Literal Values for Basic Types</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Constant Declarations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#declaring-consts">Declaring <em>consts</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#declaring-params">Declaring <em>params</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#when-to-use-const-vs-param">When to use <code class="docutils literal notranslate"><span class="pre">const</span></code> vs. <code class="docutils literal notranslate"><span class="pre">param</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="typeAliases.html">Type Aliases</a></li>
<li class="toctree-l3"><a class="reference internal" href="configs.html"><strong>config</strong> Declarations: command-line overrides</a></li>
<li class="toctree-l3"><a class="reference internal" href="casts.html">Casts: explicit type conversions</a></li>
<li class="toctree-l3"><a class="reference internal" href="forloops.html"><strong>for</strong>-loops: structured serial iteration</a></li>
<li class="toctree-l3"><a class="reference internal" href="zip.html">Zippered Iteration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#task-parallelism">Task Parallelism</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#data-parallelism">Data Parallelism</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#locality">Locality</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chapel Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Chapel Users Guide (WIP)</a> &raquo;</li>
        
      <li>Constant Declarations</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/users-guide/base/constParam.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="constant-declarations">
<span id="ug-constparam"></span><h1>Constant Declarations<a class="headerlink" href="#constant-declarations" title="Permalink to this headline">¶</a></h1>
<p>In addition to variables, Chapel supports the declaration of
<em>constants</em> which can be thought of as variables whose values cannot
be changed once they’ve been initialized.  Chapel supports two
flavors of constants, each of which is introduced by a distinct
keyword:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">const</span></code> introduces an execution-time constant whose value need not
be known to the compiler</li>
<li><code class="docutils literal notranslate"><span class="pre">param</span></code> introduces a compile-time constant whose value must be
known to the compiler</li>
</ul>
<p>Declaring immutable variables as <code class="docutils literal notranslate"><span class="pre">const</span></code> or <code class="docutils literal notranslate"><span class="pre">param</span></code> provides
helpful semantic information, both to human readers of Chapel
programs, and to the compiler itself.</p>
<p>In practice, <code class="docutils literal notranslate"><span class="pre">param</span></code> values are most often used in cases where
compile-time operations or specialization will reduce execution-time
computation, resulting in better performance.  In other cases, certain
language constructs are required to be <code class="docutils literal notranslate"><span class="pre">param</span></code> values for the sake
of static typing or performance.  Examples include the indices used
when indexing heterogeneous tuples or the number of dimensions when
declaring rectangular arrays.  In situations other than the above,
<code class="docutils literal notranslate"><span class="pre">const</span></code> declarations tend to be used since they are less restrictive
as we will see below.</p>
<div class="section" id="declaring-consts">
<h2>Declaring <em>consts</em><a class="headerlink" href="#declaring-consts" title="Permalink to this headline">¶</a></h2>
<p>Constant declarations are a lot like <a class="reference internal" href="vars.html#ug-vars"><span class="std std-ref">variable declarations</span></a>, except for the change in keyword.  As a simple example,
the following statement declares an integer constant named <em>two</em> whose
value is 2 (as you’d hope):</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">examples/users-guide/base/constParam.chpl</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">two</span><span class="p">:</span> <span class="kt">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</pre></div>
</div>
</div>
<p>Unlike variables, attempting to assign to a constant after it has been
initialized will result in a compile-time error.  For example, if we
later attempted to perform this assignment:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">two</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
</pre></div>
</div>
<p>The compiler would report the following error:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>constParam.chpl:8: error: cannot assign to const variable
</pre></div>
</div>
<p>As with variable declarations, the type specification or initializer
may be omitted in a <code class="docutils literal notranslate"><span class="pre">const</span></code> declaration, in which case the compiler
will fill in any missing details:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">meaning</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>  <span class="c1">// inferred to be an &#39;int&#39;</span>
<span class="kd">const</span> <span class="nx">zero</span><span class="p">:</span> <span class="kt">int</span><span class="p">;</span>     <span class="c1">// default initialized to &#39;0&#39;</span>
</pre></div>
</div>
<p>Of course, since constants cannot be re-assigned, in practice they
typically do include an initialization expression.</p>
<p>Like variables, constants support multiple comma-separated
declarations per statement, where types and/or initializers may be
shared:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="nx">zero</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">three</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
      <span class="nx">four</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
      <span class="nx">Zero</span><span class="p">,</span> <span class="nx">ZERO</span><span class="p">:</span> <span class="kt">int</span><span class="p">,</span>         <span class="c1">// &#39;Zero&#39; and &#39;ZERO&#39; are both &#39;int&#39;s default initialized to &#39;0&#39;</span>
      <span class="nx">language</span> <span class="o">=</span> <span class="s">&quot;Chapel&quot;</span><span class="p">,</span>     <span class="c1">// &#39;language&#39; is inferred to be a &#39;string&#39;</span>
      <span class="nx">debug</span><span class="p">,</span> <span class="nx">verbose</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>  <span class="c1">// &#39;debug&#39; and &#39;verbose&#39; are both &#39;bool&#39;s initialized to &#39;false&#39;</span>
</pre></div>
</div>
<p>One of the main things that distinguishes <code class="docutils literal notranslate"><span class="pre">const</span></code> from <code class="docutils literal notranslate"><span class="pre">param</span></code>
declarations is that the initializing expression for a <code class="docutils literal notranslate"><span class="pre">const</span></code> need
not be a value that is known at compile-time.  For example, the
following constant declarations are initialized by reading a value
from the console and then using that value to do some math:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">read</span><span class="p">(</span><span class="kt">int</span><span class="p">),</span>     <span class="c1">// initialize &#39;n&#39; by reading an &#39;int&#39; from the console</span>
      <span class="nx">piOverN</span> <span class="o">=</span> <span class="nx">pi</span> <span class="o">/</span> <span class="nx">n</span><span class="p">;</span>  <span class="c1">// initialize &#39;piOverN&#39; by dividing &#39;pi&#39; by &#39;n&#39;</span>
</pre></div>
</div>
<p>If we were to print their values as follows:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;n = &quot;</span><span class="p">,</span> <span class="nx">n</span><span class="p">);</span>
<span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;pi/n = &quot;</span><span class="p">,</span> <span class="nx">piOverN</span><span class="p">);</span>
</pre></div>
</div>
<p>And then typed ‘4’ at the console after compiling and running the program,
we’d see:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>n = 4
pi/n = 0.785398
</pre></div>
</div>
<p>As a final note, Chapel supports <code class="docutils literal notranslate"><span class="pre">const</span></code> declarations of any type.</p>
</div>
<div class="section" id="declaring-params">
<h2>Declaring <em>params</em><a class="headerlink" href="#declaring-params" title="Permalink to this headline">¶</a></h2>
<p>Declaring a <code class="docutils literal notranslate"><span class="pre">param</span></code> value is syntactically identical to declaring a
<code class="docutils literal notranslate"><span class="pre">var</span></code> or <code class="docutils literal notranslate"><span class="pre">const</span></code>, but uses the keyword <code class="docutils literal notranslate"><span class="pre">param</span></code>.
The initializer of a <code class="docutils literal notranslate"><span class="pre">param</span></code> must be able to be computed at
compile-time, unlike variables and execution-time constants.  Thus,
most of the <code class="docutils literal notranslate"><span class="pre">const</span></code> declarations of the previous section could
trivially be converted to <code class="docutils literal notranslate"><span class="pre">param</span></code> declarations as follows:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">param</span> <span class="nx">zero</span><span class="p">,</span> <span class="nx">Zero</span><span class="p">,</span> <span class="nx">ZERO</span><span class="p">:</span> <span class="kt">int</span><span class="p">,</span>
      <span class="nx">two</span><span class="p">:</span> <span class="kt">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
      <span class="nx">three</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
      <span class="nx">four</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
      <span class="nx">meaning</span> <span class="o">=</span> <span class="mi">42</span><span class="p">,</span>
      <span class="nx">language</span> <span class="o">=</span> <span class="s">&quot;Chapel&quot;</span><span class="p">,</span>
      <span class="nx">debug</span><span class="p">,</span> <span class="nx">verbose</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</pre></div>
</div>
<p>Attempting to initialize a <code class="docutils literal notranslate"><span class="pre">param</span></code> with a value not known to the
compiler will generate an error message.  For example, consider the
following initializers, which were legal in <code class="docutils literal notranslate"><span class="pre">const</span></code> declarations:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">param</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">read</span><span class="p">(</span><span class="kt">int</span><span class="p">),</span>
      <span class="nx">piOverN</span> <span class="o">=</span> <span class="nx">pi</span> <span class="o">/</span> <span class="nx">n</span><span class="p">;</span>
</pre></div>
</div>
<p>As <code class="docutils literal notranslate"><span class="pre">param</span></code> initializers, they result in the following error messages
since the value of <em>n</em> cannot be known at compile-time:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>constParam.chpl:39: error: Initializing parameter &#39;n&#39; to value not known at compile time
constParam.chpl:40: error: Initializing parameter &#39;piOverN&#39; to value not known at compile time
</pre></div>
</div>
<p>Despite this restriction, Chapel knows how to perform certain
compile-time computations on <code class="docutils literal notranslate"><span class="pre">param</span></code> values, permitting them to be
initialized using expressions other than simple literal values:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">param</span> <span class="nx">tenSquared</span> <span class="o">=</span> <span class="mi">10</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span>
      <span class="nx">bitMask</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">,</span>
      <span class="nx">bitsPerByte</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
      <span class="nx">size</span> <span class="o">=</span> <span class="nx">numBits</span><span class="p">(</span><span class="kt">int</span><span class="p">),</span>
      <span class="nx">sizeInBytes</span> <span class="o">=</span> <span class="nx">size</span> <span class="o">/</span> <span class="nx">bitsPerByte</span><span class="p">,</span>
      <span class="nx">bigger</span> <span class="o">=</span> <span class="nx">max</span><span class="p">(</span><span class="nx">bitMask</span><span class="p">,</span> <span class="nx">size</span><span class="p">);</span>
</pre></div>
</div>
<p>Specifically, procedures and operators that are declared to return
<code class="docutils literal notranslate"><span class="pre">param</span></code> values are executed at compile-time and can be used to
initialize <code class="docutils literal notranslate"><span class="pre">param</span></code> constants.  A subsequent section will cover the
creation of such functions.</p>
<p>Unlike <code class="docutils literal notranslate"><span class="pre">const</span></code> declarations, <code class="docutils literal notranslate"><span class="pre">param</span></code> values are only supported for
certain types that the compiler knows how to compute with: booleans,
signed and unsigned integers, <code class="docutils literal notranslate"><span class="pre">real</span></code> and <code class="docutils literal notranslate"><span class="pre">imag</span></code> floating point
values, enumerated types, and strings.  Literal values of these types
can be considered to be anonymous <code class="docutils literal notranslate"><span class="pre">param</span></code> values.  In the future, we
expect to expand this list to include additional types, such as complex
values, ranges, domains, arrays, records, classes, and unions.</p>
</div>
<div class="section" id="when-to-use-const-vs-param">
<h2>When to use <code class="docutils literal notranslate"><span class="pre">const</span></code> vs. <code class="docutils literal notranslate"><span class="pre">param</span></code><a class="headerlink" href="#when-to-use-const-vs-param" title="Permalink to this headline">¶</a></h2>
<p>Generally speaking, programmers are encouraged to use a <code class="docutils literal notranslate"><span class="pre">param</span></code>
whenever they are computing with a value that’s known at compile-time,
is one of the supported <code class="docutils literal notranslate"><span class="pre">param</span></code> types, and one or more of the
following apply:</p>
<ul class="simple">
<li>the value is used in a place where the language requires a <code class="docutils literal notranslate"><span class="pre">param</span></code>
(e.g., indexing into a heterogeneous tuple),</li>
<li>the value is useful for enabling (or forcing) a computation to occur
at compile-time,</li>
<li>the generated code should be specialized by the <code class="docutils literal notranslate"><span class="pre">param</span></code> value.</li>
</ul>
<p>Programmers are encouraged to use <code class="docutils literal notranslate"><span class="pre">const</span></code> to declare any other
immutable variable, such as:</p>
<ul class="simple">
<li>constants whose values can’t or won’t be known at compile-time,</li>
<li>constants for which compile-time specialization is neither required
nor beneficial.</li>
</ul>
<p>The ways in which a <code class="docutils literal notranslate"><span class="pre">param</span></code> value can affect code specialization or
optimization may seem vague now, but should become clearer as we see
how <code class="docutils literal notranslate"><span class="pre">param</span></code> values are used to create generic types and functions,
to unroll loops, etc.</p>
<p>While compilers can often determine that a symbol is <code class="docutils literal notranslate"><span class="pre">const</span></code> or
<code class="docutils literal notranslate"><span class="pre">param</span></code> by analyzing its uses, Chapel programmers are encouraged to
declare variables as constants whenever possible in order to maximize
the amount of semantic information available to the compiler and to
people reading the code.  Such declarations can also help programmers
avoid simple mistakes by having the compiler’s semantic checks ensure
that values which are intended to be constant are not accidentally
re-assigned.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="typeAliases.html" class="btn btn-neutral float-right" title="Type Aliases" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="basicValues.html" class="btn btn-neutral float-left" title="Literal Values for Basic Types" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Hewlett Packard Enterprise Development LP

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 



</body>
</html>