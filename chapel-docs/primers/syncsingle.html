

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Sync / Singles &mdash; Chapel Documentation 1.23</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Atomics" href="atomics.html" />
    <link rel="prev" title="Task Parallelism" href="taskParallel.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

<a href="../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>1.23
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "1.23";
$pagename = "primers/syncsingle";
include "..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Tools</a></li>
</ul>
<p class="caption"><span class="caption-text">Writing Chapel Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Primers</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#language-basics">Language Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#iterators">Iterators</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#task-parallelism">Task Parallelism</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="taskParallel.html">Task Parallelism</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Sync / Singles</a></li>
<li class="toctree-l3"><a class="reference internal" href="atomics.html">Atomics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#locality">Locality</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#data-parallelism">Data Parallelism</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#library-utilities">Library Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#numerical-libraries">Numerical Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#tools">Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#language-overview">Language Overview</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../builtins/index.html">Built-in Types and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/standard.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Chapel Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Primers</a> &raquo;</li>
        
      <li>Sync / Singles</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/primers/syncsingle.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sync-singles">
<span id="primers-syncsingle"></span><h1>Sync / Singles<a class="headerlink" href="#sync-singles" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/chapel-lang/chapel/blob/master/test/release/examples/primers/syncsingle.chpl">View syncsingle.chpl on GitHub</a></p>
<p>This primer illustrates Chapel’s sync and single variables.</p>
<p><code class="docutils literal notranslate"><span class="pre">Sync</span></code> and <code class="docutils literal notranslate"><span class="pre">single</span></code> are type qualifiers that can be applied to all
Chapel primitive types except <code class="docutils literal notranslate"><span class="pre">strings</span></code>, <code class="docutils literal notranslate"><span class="pre">complex</span></code>, and <code class="docutils literal notranslate"><span class="pre">record</span></code>.</p>
<p>Sync and single variables have an associated state that is either
<code class="docutils literal notranslate"><span class="pre">full</span></code> or <code class="docutils literal notranslate"><span class="pre">empty</span></code>.  Single variables are sync variables that can
only be written once.  If a sync or single variable is declared
with an initializing expression, its state is set to <code class="docutils literal notranslate"><span class="pre">full</span></code> and its
value is that of the expression.  Without an initializing
expression, a sync or single variable’s state is set to <code class="docutils literal notranslate"><span class="pre">empty</span></code> and
its value is the default value for the base type.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">config</span> <span class="kd">const</span> <span class="nx">n</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">sy$</span><span class="p">:</span> <span class="k">sync</span> <span class="kt">int</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>  <span class="c1">// state = full, value = 1</span>
<span class="kd">var</span> <span class="nx">si$</span><span class="p">:</span> <span class="k">single</span> <span class="kt">bool</span><span class="p">;</span> <span class="c1">// state = empty, value = false</span>
</pre></div>
</div>
<p>By convention, sync and single variable names end in a <code class="docutils literal notranslate"><span class="pre">$</span></code> to
add a visual cue indicating that reads and writes are possibly
expensive operations and can potentially block the task.</p>
<p>For both sync and single variables, the state must be <code class="docutils literal notranslate"><span class="pre">empty</span></code> before
the value can be written.  When the write has completed, the state
is set to <code class="docutils literal notranslate"><span class="pre">full</span></code>.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">si$</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> <span class="c1">// state = full, value = true</span>
</pre></div>
</div>
<p>For both sync and single variables, the state must be <code class="docutils literal notranslate"><span class="pre">full</span></code> before the
value can be read.  When the read has completed, the state of a
sync variable is set to <code class="docutils literal notranslate"><span class="pre">empty</span></code>, and the state of a single variable
remains <code class="docutils literal notranslate"><span class="pre">full</span></code>.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">sy</span> <span class="o">=</span> <span class="nx">sy$</span><span class="p">;</span> <span class="c1">// sy$: state = empty</span>
<span class="kd">var</span> <span class="nx">si</span> <span class="o">=</span> <span class="nx">si$</span><span class="p">;</span> <span class="c1">// si$: state = full</span>
</pre></div>
</div>
<p>If a sync or single variable is not in the correct state for reading
(<code class="docutils literal notranslate"><span class="pre">full</span></code>) or writing (<code class="docutils literal notranslate"><span class="pre">empty</span></code>), the current task blocks.</p>
<p>The following creates a new task via a <a class="reference internal" href="taskParallel.html#primers-taskparallel-begin"><span class="std std-ref">begin</span></a> statement and declares a variable <code class="docutils literal notranslate"><span class="pre">sy</span></code>
that is initialized to <code class="docutils literal notranslate"><span class="pre">sy$</span></code>.  The initialization statement will block
until <code class="docutils literal notranslate"><span class="pre">sy$</span></code> is <code class="docutils literal notranslate"><span class="pre">full</span></code>.  The last statement in the <code class="docutils literal notranslate"><span class="pre">begin</span></code> block sets
<code class="docutils literal notranslate"><span class="pre">done$</span></code> to <code class="docutils literal notranslate"><span class="pre">full</span></code>.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">done$</span><span class="p">:</span> <span class="k">sync</span> <span class="kt">bool</span><span class="p">;</span>
<span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;Launching new task&quot;</span><span class="p">);</span>
<span class="k">begin</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">sy</span> <span class="o">=</span> <span class="nx">sy$</span><span class="p">;</span> <span class="c1">// This statement will block until sy$ is full</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;New task unblocked, sy=&quot;</span><span class="p">,</span> <span class="nx">sy</span><span class="p">);</span>
  <span class="nx">done$</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Recall that execution proceeds immediately following the <code class="docutils literal notranslate"><span class="pre">begin</span></code>
statement after task creation.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;After launching new task&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>When <code class="docutils literal notranslate"><span class="pre">sy$</span></code> is written, its state will be set to <code class="docutils literal notranslate"><span class="pre">full</span></code> and the blocked
task above will continue.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">sy$</span> <span class="o">=</span> <span class="nx">n</span><span class="p">;</span>
</pre></div>
</div>
<p>This next statement blocks until the last statement in the above <code class="docutils literal notranslate"><span class="pre">begin</span></code>
completes.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">done$</span><span class="p">;</span>
</pre></div>
</div>
<p>Example: simple split-phase barrier for tasks</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">count$</span><span class="p">:</span> <span class="k">sync</span> <span class="kt">int</span> <span class="o">=</span> <span class="nx">n</span><span class="p">;</span>  <span class="c1">// counter which also serves as a lock</span>
<span class="kd">var</span> <span class="nx">release$</span><span class="p">:</span> <span class="k">single</span> <span class="kt">bool</span><span class="p">;</span> <span class="c1">// barrier release</span>

<span class="k">coforall</span> <span class="nx">t</span> <span class="kd">in</span> <span class="mi">1</span><span class="o">..</span><span class="nx">n</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">myc</span> <span class="o">=</span> <span class="nx">count$</span><span class="p">;</span>   <span class="c1">// read the count, grab the lock (state = empty)</span>
  <span class="k">if</span> <span class="nx">myc</span><span class="o">!=</span><span class="mi">1</span> <span class="p">{</span>         <span class="c1">// still waiting for others</span>
    <span class="nx">write</span><span class="p">(</span><span class="s">&quot;.&quot;</span><span class="p">);</span>
    <span class="nx">count$</span> <span class="o">=</span> <span class="nx">myc</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>   <span class="c1">// update the count, release the lock (state = full)</span>
                      <span class="c1">// we could do some work while waiting</span>
    <span class="nx">release$</span><span class="p">;</span>         <span class="c1">// wait for everyone</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>            <span class="c1">// last one here</span>
    <span class="nx">release$</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>  <span class="c1">// release everyone first (state = full)</span>
    <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;done&quot;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>There are a number of methods defined for sync and single variables.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">reset()</span></code> method, defined for sync variables, sets the value of
the variable to the default value for the type and the state to
<code class="docutils literal notranslate"><span class="pre">empty</span></code>.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">sy$</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>  <span class="c1">// value = 0, state = empty</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">isFull</span></code> method returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if the sync or single variable is
in the <code class="docutils literal notranslate"><span class="pre">full</span></code> state, <code class="docutils literal notranslate"><span class="pre">false</span></code> otherwise.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="nx">sy$</span><span class="p">.</span><span class="nx">isFull</span><span class="p">);</span>
<span class="nx">writeln</span><span class="p">(</span><span class="nx">si$</span><span class="p">.</span><span class="nx">isFull</span><span class="p">);</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">writeEF()</span></code> method, defined for sync and single variables,
blocks until the state is <code class="docutils literal notranslate"><span class="pre">empty</span></code> and then assigns the value argument
to the variable and then sets the state to <code class="docutils literal notranslate"><span class="pre">full</span></code>.  Assignment of
sync and single variables are performed using <code class="docutils literal notranslate"><span class="pre">writeEF()</span></code>.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">sy$</span><span class="p">.</span><span class="nx">writeEF</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="nx">n</span><span class="p">);</span> <span class="c1">// equivalent to: sy$ = 2*n;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">readFE()</span></code> method, defined for sync variables, blocks until the
state is <code class="docutils literal notranslate"><span class="pre">full</span></code> and then reads the value of the variable, sets the
state to <code class="docutils literal notranslate"><span class="pre">empty</span></code>, and then returns the value.  Normal reads of sync
variables are performed using <code class="docutils literal notranslate"><span class="pre">readFE()</span></code>.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">sy2</span> <span class="o">=</span> <span class="nx">sy$</span><span class="p">.</span><span class="nx">readFE</span><span class="p">();</span> <span class="c1">// equivalent to: var sy2 = sy$;</span>
<span class="nx">writeln</span><span class="p">(</span><span class="nx">sy2</span><span class="p">);</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">readFF()</span></code> method, defined for sync and single variables, blocks
until the state is <code class="docutils literal notranslate"><span class="pre">full</span></code> and then reads the value of the variable
and returns the value.  The state remains <code class="docutils literal notranslate"><span class="pre">full</span></code>.  Normal reads of
single variables are performed using <code class="docutils literal notranslate"><span class="pre">readFF()</span></code>.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">si2</span> <span class="o">=</span> <span class="nx">si$</span><span class="p">.</span><span class="nx">readFF</span><span class="p">();</span>
<span class="nx">writeln</span><span class="p">(</span><span class="nx">si2</span><span class="p">);</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">writeXF()</span></code> method, defined for sync variables, assigns the
value argument to the variable and then sets the state to <code class="docutils literal notranslate"><span class="pre">full</span></code>.
This method does not block.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">sy$</span><span class="p">.</span><span class="nx">writeXF</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="nx">n</span><span class="p">);</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">readXX()</span></code> method, defined for sync and single variables, returns
the value of the variable regardless of the state.  This method
does not block and the state is unchanged.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">sy3</span> <span class="o">=</span> <span class="nx">sy$</span><span class="p">.</span><span class="nx">readXX</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">si3</span> <span class="o">=</span> <span class="nx">si$</span><span class="p">.</span><span class="nx">readXX</span><span class="p">();</span>
<span class="nx">writeln</span><span class="p">(</span><span class="nx">sy3</span><span class="p">);</span>
<span class="nx">writeln</span><span class="p">(</span><span class="nx">si3</span><span class="p">);</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">writeFF()</span></code> method, defined for sync variables, blocks until the
state is <code class="docutils literal notranslate"><span class="pre">full</span></code> and then and then assigns the value argument to the
variable.  The state is unchanged.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">sy$</span><span class="p">.</span><span class="nx">writeFF</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="nx">n</span><span class="p">);</span>

<span class="nx">sy$</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
</pre></div>
</div>
<p>Sync and single arguments are passed by reference.  As a result,
the state of the variable does not change.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="nx">sy$</span><span class="p">.</span><span class="nx">isFull</span><span class="p">);</span>
<span class="nx">f_withSyncIntFormal</span><span class="p">(</span><span class="nx">sy$</span><span class="p">);</span>
<span class="nx">writeln</span><span class="p">(</span><span class="nx">si$</span><span class="p">.</span><span class="nx">isFull</span><span class="p">);</span>
<span class="nx">f_withSingleBoolFormal</span><span class="p">(</span><span class="nx">si$</span><span class="p">);</span>

<span class="nx">sy$</span> <span class="o">=</span> <span class="mi">4</span><span class="o">*</span><span class="nx">n</span><span class="p">;</span>
</pre></div>
</div>
<p>When a sync or single variable is passed as an argument to a
function that expects the base type of the variable, the value is
read before being passed to the function.  Therefore, the task will
block until the state of the variable is <code class="docutils literal notranslate"><span class="pre">full</span></code>.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">f_withIntFormal</span><span class="p">(</span><span class="nx">sy$</span><span class="p">);</span>
<span class="nx">f_withBoolFormal</span><span class="p">(</span><span class="nx">si$</span><span class="p">);</span>
</pre></div>
</div>
<p>When passing a sync or single variable to a generic formal,
whether with a <code class="docutils literal notranslate"><span class="pre">ref</span></code> intent or a default intent, the variable
is passed by reference. The state of the variable does not
change and sync operations are available.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">f_withGenericDefaultIntentFormal</span><span class="p">(</span><span class="nx">sy$</span><span class="p">);</span>
<span class="nx">f_withGenericDefaultIntentFormal</span><span class="p">(</span><span class="nx">si$</span><span class="p">);</span>
<span class="nx">f_withGenericRefFormal</span><span class="p">(</span><span class="nx">sy$</span><span class="p">);</span>
<span class="nx">f_withGenericRefFormal</span><span class="p">(</span><span class="nx">si$</span><span class="p">);</span>

<span class="nx">sy$</span> <span class="o">=</span> <span class="mi">5</span><span class="o">*</span><span class="nx">n</span><span class="p">;</span>
</pre></div>
</div>
<p>Currently, sync and single variables cannot be written out directly.
We need to extract the value, for example using <code class="docutils literal notranslate"><span class="pre">readFE()</span></code> or <code class="docutils literal notranslate"><span class="pre">readFF()</span></code>.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="nx">sy$</span><span class="p">.</span><span class="nx">readFE</span><span class="p">());</span>
<span class="nx">writeln</span><span class="p">(</span><span class="nx">si$</span><span class="p">.</span><span class="nx">readFF</span><span class="p">());</span>
</pre></div>
</div>
<p>Definitions of functions used above</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">proc</span> <span class="nf">f_withSyncIntFormal</span><span class="p">(</span><span class="nx">x</span><span class="p">:</span> <span class="k">sync</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">isFull</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">proc</span> <span class="nf">f_withSingleBoolFormal</span><span class="p">(</span><span class="nx">x</span><span class="p">:</span> <span class="k">single</span> <span class="kt">bool</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">isFull</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">proc</span> <span class="nf">f_withIntFormal</span><span class="p">(</span><span class="nx">x</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">proc</span> <span class="nf">f_withBoolFormal</span><span class="p">(</span><span class="nx">x</span><span class="p">:</span> <span class="kt">bool</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">proc</span> <span class="nf">f_withGenericDefaultIntentFormal</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;the full bit is: &quot;</span><span class="p">,</span> <span class="nx">x</span><span class="p">.</span><span class="nx">isFull</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">proc</span> <span class="nf">f_withGenericRefFormal</span><span class="p">(</span><span class="kd">ref</span> <span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;readXX returns: &quot;</span><span class="p">,</span> <span class="nx">x</span><span class="p">.</span><span class="nx">readXX</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="atomics.html" class="btn btn-neutral float-right" title="Atomics" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="taskParallel.html" class="btn btn-neutral float-left" title="Task Parallelism" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Hewlett Packard Enterprise Development LP

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 



</body>
</html>