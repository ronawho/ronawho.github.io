

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Ranges &mdash; Chapel Documentation 1.23</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Domains" href="domains.html" />
    <link rel="prev" title="Locales" href="locales.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

<a href="../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>1.23
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "1.23";
$pagename = "primers/ranges";
include "..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Tools</a></li>
</ul>
<p class="caption"><span class="caption-text">Writing Chapel Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Primers</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#language-basics">Language Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#iterators">Iterators</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#task-parallelism">Task Parallelism</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#locality">Locality</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#data-parallelism">Data Parallelism</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Ranges</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ranges-general-info">Ranges (general info)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#operators">Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="#slicing">Slicing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#definition-of-writerange">Definition of writeRange</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="domains.html">Domains</a></li>
<li class="toctree-l3"><a class="reference internal" href="arrays.html">Arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="slices.html">Slices</a></li>
<li class="toctree-l3"><a class="reference internal" href="sparse.html">Sparse Domains and Arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="associative.html">Associative Domains and Arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="reductions.html">Reductions</a></li>
<li class="toctree-l3"><a class="reference internal" href="distributions.html">Distributions</a></li>
<li class="toctree-l3"><a class="reference internal" href="replicated.html">Replicated Distribution</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#library-utilities">Library Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#numerical-libraries">Numerical Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#tools">Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#language-overview">Language Overview</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../builtins/index.html">Built-in Types and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/standard.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Chapel Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Primers</a> &raquo;</li>
        
      <li>Ranges</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/primers/ranges.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ranges">
<span id="primers-ranges"></span><h1>Ranges<a class="headerlink" href="#ranges" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/chapel-lang/chapel/blob/master/test/release/examples/primers/ranges.chpl">View ranges.chpl on GitHub</a></p>
<p>This primer illustrates Chapel ranges and range operations.</p>
<div class="section" id="ranges-general-info">
<span id="primers-ranges-general"></span><h2>Ranges (general info)<a class="headerlink" href="#ranges-general-info" title="Permalink to this headline">¶</a></h2>
<p>Ranges represent sequences of integral numbers, or “indices”.
A range literal is defined using the <code class="docutils literal notranslate"><span class="pre">..</span></code> operator.
The lower bound is always on the left;
the upper bound is always on the right.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;Basic range r&quot;</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">r</span> <span class="o">=</span> <span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">;</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="nx">r</span><span class="p">);</span>
</pre></div>
</div>
<p>Ranges can also be defined using an <cite>open-interval</cite> form using the
<code class="docutils literal notranslate"><span class="pre">..&lt;</span></code> operator which causes the upper bound to be omitted.  For
example, the range <code class="docutils literal notranslate"><span class="pre">3..&lt;10</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">3..9</span></code>.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;Open interval range rOpen&quot;</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">rOpen</span> <span class="o">=</span> <span class="mi">3</span><span class="o">..&lt;</span><span class="mi">10</span><span class="p">;</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="nx">rOpen</span><span class="p">);</span>
</pre></div>
</div>
<p>This form can be convenient when iterating over a 0-based
data structure using ranges like <code class="docutils literal notranslate"><span class="pre">lo..&lt;data.size</span></code>.</p>
<p>Ranges are a basic building block for iteration.  Here we use a
for-loop to iterate over the sequence represented by <code class="docutils literal notranslate"><span class="pre">r</span></code> and
compute the sum of the indices in the sequence.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">sum</span><span class="p">:</span> <span class="kt">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">for</span> <span class="nx">i</span> <span class="kd">in</span> <span class="nx">r</span> <span class="k">do</span>
  <span class="nx">sum</span> <span class="o">+=</span> <span class="nx">i</span><span class="p">;</span>
<span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;The sum of the values in &quot;</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="s">&quot; is &quot;</span><span class="p">,</span> <span class="nx">sum</span><span class="p">);</span>
</pre></div>
</div>
<p>We can compute this same sum with a reduction over the range.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">sum</span> <span class="o">=</span> <span class="o">+</span> <span class="k">reduce</span> <span class="nx">r</span><span class="p">;</span>
<span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;The sum of the values in &quot;</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="s">&quot; as computed by reduce is also &quot;</span><span class="p">,</span> <span class="nx">sum</span><span class="p">);</span>
<span class="nx">writeln</span><span class="p">();</span>
</pre></div>
</div>
<p>Ranges are also the building blocks for domains.  Here
we use the range <code class="docutils literal notranslate"><span class="pre">r</span></code> to build up a 2-D domain and an array.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;Domains and arrays&quot;</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">D</span><span class="p">:</span> <span class="k">domain</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">=</span> <span class="p">{</span><span class="nx">r</span><span class="p">,</span> <span class="nx">r</span><span class="p">};</span>
<span class="kd">var</span> <span class="nx">A</span><span class="p">:</span> <span class="p">[</span><span class="nx">D</span><span class="p">]</span> <span class="kt">real</span><span class="p">;</span>
<span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;D = &quot;</span><span class="p">,</span> <span class="nx">D</span><span class="p">);</span>
<span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;Array A&quot;</span><span class="p">);</span>
<span class="nx">writeln</span><span class="p">(</span><span class="nx">A</span><span class="p">);</span>
<span class="nx">writeln</span><span class="p">();</span>
</pre></div>
</div>
<p>Ranges don’t have to be fully bounded.  A range without a low bound
represents an infinite sequence of numbers that are less than or equal to
the high bound.  Similarly a range without a high bound represents
an infinitude of numbers greater or equal to the low bound.  A range
with no bounds is allowed as well.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;Unbounded ranges&quot;</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="o">..</span><span class="mi">5</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="o">..</span><span class="p">);</span>
</pre></div>
</div>
<p>When an unbounded range is used in a zippered iteration,
only the necessary number of indices are taken from its sequence.</p>
<p>Only ranges whose sequences have a starting point may be used in
an iteration. This includes all the above ranges except <code class="docutils literal notranslate"><span class="pre">..</span></code> and <code class="docutils literal notranslate"><span class="pre">..5</span></code>.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;Iterating over (312..315, 1..) generates&quot;</span><span class="p">);</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">)</span> <span class="kd">in</span> <span class="k">zip</span><span class="p">(</span><span class="mi">312</span><span class="o">..</span><span class="mi">315</span><span class="p">,</span> <span class="mi">1</span><span class="o">..</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">write</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">));</span>
<span class="p">}</span>
<span class="nx">writeln</span><span class="p">();</span>
<span class="nx">writeln</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="operators">
<span id="primers-ranges-operators"></span><h2>Operators<a class="headerlink" href="#operators" title="Permalink to this headline">¶</a></h2>
<p>There are several operators for working with ranges.  The <code class="docutils literal notranslate"><span class="pre">by</span></code> and
<code class="docutils literal notranslate"><span class="pre">align</span></code> operators create strided and aligned range values. The <code class="docutils literal notranslate"><span class="pre">#</span></code>
operator counts a number of elements from the range.  The <code class="docutils literal notranslate"><span class="pre">+</span></code> and
<code class="docutils literal notranslate"><span class="pre">-</span></code> operators shift the sequence the range represents.  The <code class="docutils literal notranslate"><span class="pre">==</span></code>
operator compares ranges for equality.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">by</span></code> operator applies a stride to a range, selecting a subsequence
from its sequence.  If the range was already strided, the effect is
multiplicative.  If the stride is negative, the direction of the sequence
is reversed.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;Range stride and the by operator&quot;</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="nx">r</span> <span class="k">by</span> <span class="mi">2</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="nx">r</span> <span class="k">by</span> <span class="mi">2</span> <span class="k">by</span> <span class="mi">2</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="nx">r</span> <span class="k">by</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="mi">5</span><span class="o">..</span> <span class="k">by</span> <span class="mi">2</span><span class="p">);</span>
<span class="nx">writeln</span><span class="p">();</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">align</span></code> operator specifies the alignment of a strided range.  The
indices in the aligned range are all equivalent to the specified
alignment modulo the absolute value of the stride.  For example,
alignment can differentiate the sequence of all odd numbers from all
even numbers.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">allOdds</span> <span class="o">=</span> <span class="o">..</span> <span class="k">by</span> <span class="mi">2</span> <span class="k">align</span> <span class="mi">1</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">allEvens</span> <span class="o">=</span> <span class="o">..</span> <span class="k">by</span> <span class="mi">2</span> <span class="k">align</span> <span class="mi">2</span><span class="p">;</span>
</pre></div>
</div>
<p>The alignment is always taken modulo the stride, so one could also say:
<code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">allEvens</span> <span class="pre">=</span> <span class="pre">..</span> <span class="pre">by</span> <span class="pre">2</span> <span class="pre">align</span> <span class="pre">0;</span></code>
<code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">allEvens</span> <span class="pre">=</span> <span class="pre">..</span> <span class="pre">by</span> <span class="pre">2</span> <span class="pre">align</span> <span class="pre">-2;</span></code>
etc.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;Range alignment and the align operator&quot;</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">oddsBetween1and10</span> <span class="o">=</span> <span class="nx">r</span> <span class="k">by</span> <span class="mi">2</span> <span class="k">align</span> <span class="mi">1</span><span class="p">;</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="nx">oddsBetween1and10</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">evensBetween1and10</span> <span class="o">=</span> <span class="nx">r</span> <span class="k">by</span> <span class="mi">2</span> <span class="k">align</span> <span class="mi">0</span><span class="p">;</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="nx">evensBetween1and10</span><span class="p">);</span>
</pre></div>
</div>
<p>If a range’s stride is <code class="docutils literal notranslate"><span class="pre">1</span></code> or <code class="docutils literal notranslate"><span class="pre">-1</span></code>, its sequence is always defined.
Otherwise, the sequence is defined only when the range’s alignment
is defined, or “unambiguous”. Without alignment, for example, it is
unknown whether the sequence contains all odds or all evens.
A defined sequence is required when using the range in an iteration
or in many other cases.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">align</span></code> operator always defines the alignment, overriding
the existing alignment, if any.
When creating a strided range from a range literal, <code class="docutils literal notranslate"><span class="pre">by</span></code> will define
the alignment to be the literal’s low bound for positive stride,
or the literal’s high bound for negative stride.
The corresponding bound must exist.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;Implicit alignment set using &#39;by&#39;&quot;</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span> <span class="k">by</span> <span class="o">-</span><span class="mi">2</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="o">..</span><span class="mi">5</span> <span class="k">by</span> <span class="o">-</span><span class="mi">3</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">rangeWithAmbiguousAlignment</span> <span class="o">=</span> <span class="mi">1</span><span class="o">..</span> <span class="k">by</span> <span class="o">-</span><span class="mi">3</span><span class="p">;</span>
<span class="nx">writeln</span><span class="p">();</span>
</pre></div>
</div>
<p>The count operator <code class="docutils literal notranslate"><span class="pre">#</span></code> counts off a number of elements from the start
of a range. If the count is negative, the elements are taken from the end
of the range, instead. It is an error to take a positive count of indices
from a range with no starting index, or a negative count of indices
from a range with no ending index.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;The count operator&quot;</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">numElements</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="mi">0</span><span class="o">..#</span><span class="nx">numElements</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="nx">r</span> <span class="o">#</span> <span class="mi">4</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="nx">r</span> <span class="k">by</span> <span class="o">-</span><span class="mi">1</span> <span class="o">#</span> <span class="mi">4</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="o">..</span><span class="mi">5</span> <span class="o">#</span> <span class="o">-</span><span class="mi">3</span><span class="p">);</span>
<span class="nx">writeln</span><span class="p">();</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">+</span></code> and <code class="docutils literal notranslate"><span class="pre">-</span></code> operators are used to shift a range’s sequence
higher or lower.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;Operators + and -&quot;</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="nx">r</span> <span class="o">+</span> <span class="mi">2</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="o">..</span><span class="mi">5</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">((</span><span class="nx">r</span> <span class="k">by</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
<span class="nx">writeln</span><span class="p">();</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">==</span></code> operator can be used to test if two ranges are equal.
Equality means they represent the same sequence of indices.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;Range equality&quot;</span><span class="p">);</span>
<span class="nx">writeln</span><span class="p">(</span><span class="nx">r</span><span class="p">(</span><span class="nx">allOdds</span><span class="p">)</span> <span class="o">==</span> <span class="nx">oddsBetween1and10</span><span class="p">);</span>          <span class="c1">// true</span>
<span class="nx">writeln</span><span class="p">(</span><span class="nx">r</span><span class="p">(</span><span class="nx">allEvens</span><span class="p">)</span> <span class="o">==</span> <span class="nx">evensBetween1and10</span><span class="p">);</span>        <span class="c1">// true</span>
<span class="nx">writeln</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="slicing">
<span id="primers-ranges-slicing"></span><h2>Slicing<a class="headerlink" href="#slicing" title="Permalink to this headline">¶</a></h2>
<p>Range slicing produces an intersection of the sequences defined
by two given ranges. Slicing is commutative in most respects.
It is written as indexing or application of one range to another.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;Range slicing&quot;</span><span class="p">);</span>
<span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;A slice of &quot;</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="s">&quot; with &quot;</span><span class="p">,</span> <span class="mi">2</span><span class="o">..</span><span class="mi">7</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="nx">r</span><span class="p">(</span><span class="mi">2</span><span class="o">..</span><span class="mi">7</span><span class="p">));</span>
<span class="kd">const</span> <span class="nx">r1</span> <span class="o">=</span> <span class="mi">5</span><span class="o">..</span><span class="mi">15</span><span class="p">;</span>
<span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;A slice of &quot;</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="s">&quot; with &quot;</span><span class="p">,</span> <span class="nx">r1</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="nx">r</span><span class="p">(</span><span class="nx">r1</span><span class="p">));</span>
<span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;A slice of &quot;</span><span class="p">,</span> <span class="nx">r1</span><span class="p">,</span> <span class="s">&quot; with &quot;</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="s">&quot; is the same&quot;</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="nx">r1</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
</pre></div>
</div>
<p>The odds between 1 and 10 (using range slicing):</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeRange</span><span class="p">(</span><span class="nx">r</span><span class="p">(</span><span class="nx">allOdds</span><span class="p">));</span>
</pre></div>
</div>
<p>The evens between 1 and 10 (using range slicing):</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeRange</span><span class="p">(</span><span class="nx">r</span><span class="p">(</span><span class="nx">allEvens</span><span class="p">));</span>
</pre></div>
</div>
<p>Either or both of the ranges in a range slicing operation can be strided</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">r2</span> <span class="o">=</span> <span class="mi">1</span><span class="o">..</span><span class="mi">20</span> <span class="k">by</span> <span class="mi">3</span><span class="p">;</span>
<span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;A slice of &quot;</span><span class="p">,</span> <span class="nx">r2</span><span class="p">,</span> <span class="s">&quot; with &quot;</span><span class="p">,</span> <span class="mi">1</span><span class="o">..</span><span class="mi">20</span> <span class="k">by</span> <span class="mi">2</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="nx">r2</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">20</span> <span class="k">by</span> <span class="mi">2</span><span class="p">));</span>
<span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;A slice of &quot;</span><span class="p">,</span> <span class="nx">r2</span><span class="p">,</span> <span class="s">&quot; with &quot;</span><span class="p">,</span> <span class="mi">1</span><span class="o">..</span><span class="mi">20</span> <span class="k">by</span> <span class="o">-</span><span class="mi">2</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="nx">r2</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">20</span> <span class="k">by</span> <span class="o">-</span><span class="mi">2</span><span class="p">));</span>
<span class="nx">writeln</span><span class="p">();</span>
</pre></div>
</div>
<p>When an unbounded range is used in slicing a bounded range,
the corresponding infinite sequence participates in the intersection.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;A slice of &quot;</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="s">&quot; with &quot;</span><span class="p">,</span> <span class="mi">5</span><span class="o">..</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="nx">r</span><span class="p">(</span><span class="mi">5</span><span class="o">..</span><span class="p">));</span>
<span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;A slice of &quot;</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="s">&quot; with &quot;</span><span class="p">,</span> <span class="mi">5</span><span class="o">..</span> <span class="k">by</span> <span class="mi">2</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">(</span><span class="nx">r</span><span class="p">(</span><span class="mi">5</span><span class="o">..</span> <span class="k">by</span> <span class="mi">2</span><span class="p">));</span>
<span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;A slice of &quot;</span><span class="p">,</span> <span class="mi">1</span><span class="o">..</span><span class="p">,</span> <span class="s">&quot; with &quot;</span><span class="p">,</span> <span class="o">..</span><span class="mi">5</span><span class="p">);</span>
<span class="nx">writeRange</span><span class="p">((</span><span class="mi">1</span><span class="o">..</span><span class="p">)(</span><span class="o">..</span><span class="mi">5</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="section" id="definition-of-writerange">
<span id="primers-ranges-writerange"></span><h2>Definition of writeRange<a class="headerlink" href="#definition-of-writerange" title="Permalink to this headline">¶</a></h2>
<p>The procedure that has been used throughout this primer to print
ranges is defined below. It adjusts to the specifics of the range.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">proc</span> <span class="nf">writeRange</span><span class="p">(</span><span class="nx">r</span><span class="p">:</span> <span class="kt">range</span><span class="p">(?))</span> <span class="p">{</span>
  <span class="nx">write</span><span class="p">(</span><span class="s">&quot;Range &quot;</span><span class="p">,</span> <span class="nx">r</span><span class="p">);</span>
  <span class="k">if</span> <span class="nx">r</span><span class="p">.</span><span class="nx">boundedType</span> <span class="o">==</span> <span class="nx">BoundedRangeType</span><span class="p">.</span><span class="nx">bounded</span> <span class="p">{</span>
    <span class="c1">// The range is fully bounded - print its entire sequence.</span>
    <span class="nx">write</span><span class="p">(</span><span class="s">&quot; = &quot;</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">first</span><span class="p">:</span> <span class="kt">bool</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;;</span>
    <span class="k">for</span> <span class="nx">i</span> <span class="kd">in</span> <span class="nx">r</span> <span class="p">{</span>
      <span class="k">if</span> <span class="o">!</span><span class="nx">first</span> <span class="k">then</span> <span class="nx">write</span><span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">);</span>
      <span class="nx">write</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
      <span class="nx">first</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="nx">r</span><span class="p">.</span><span class="nx">hasFirst</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// The range is not fully bounded, but its sequence has a starting point</span>
    <span class="c1">// - print the first three indices.  Note that in this and the next</span>
    <span class="c1">// case the sequence can be either increasing or decreasing.</span>
    <span class="nx">write</span><span class="p">(</span><span class="s">&quot; = &quot;</span><span class="p">);</span>
    <span class="k">for</span> <span class="nx">i</span> <span class="kd">in</span> <span class="nx">r</span> <span class="o">#</span> <span class="mi">3</span> <span class="k">do</span>
      <span class="nx">write</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="s">&quot;, &quot;</span><span class="p">);</span>
    <span class="nx">write</span><span class="p">(</span><span class="s">&quot;...&quot;</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="nx">r</span><span class="p">.</span><span class="nx">hasLast</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// The range is not fully bounded, but its sequence has an ending point.</span>
    <span class="c1">// Print the last three indices.</span>
    <span class="nx">write</span><span class="p">(</span><span class="s">&quot; = ...&quot;</span><span class="p">);</span>
    <span class="k">for</span> <span class="nx">i</span> <span class="kd">in</span> <span class="nx">r</span> <span class="o">#</span> <span class="o">-</span><span class="mi">3</span> <span class="k">do</span>
      <span class="nx">write</span><span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="nx">r</span><span class="p">.</span><span class="nx">stride</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">r</span><span class="p">.</span><span class="nx">stride</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="p">{</span>
    <span class="c1">// If we are here, the range is fully unbounded.</span>
    <span class="nx">write</span><span class="p">(</span><span class="s">&quot; = all integers, &quot;</span><span class="p">,</span>
          <span class="k">if</span> <span class="nx">r</span><span class="p">.</span><span class="nx">stride</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">then</span> <span class="s">&quot;increasing&quot;</span> <span class="k">else</span> <span class="s">&quot;decreasing&quot;</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// We got a more complex range, do not elaborate.</span>
  <span class="p">}</span>
  <span class="nx">writeln</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="domains.html" class="btn btn-neutral float-right" title="Domains" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="locales.html" class="btn btn-neutral float-left" title="Locales" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Hewlett Packard Enterprise Development LP

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 



</body>
</html>