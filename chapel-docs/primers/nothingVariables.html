

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The ‘nothing’ type &mdash; Chapel Documentation 1.23</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Error Handling" href="errorHandling.html" />
    <link rel="prev" title="Modules" href="modules.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

<a href="../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>1.23
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "1.23";
$pagename = "primers/nothingVariables";
include "..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Tools</a></li>
</ul>
<p class="caption"><span class="caption-text">Writing Chapel Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Primers</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#language-basics">Language Basics</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="variables.html">Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="procedures.html">Procedures</a></li>
<li class="toctree-l3"><a class="reference internal" href="classes.html">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="records.html">Records</a></li>
<li class="toctree-l3"><a class="reference internal" href="specialMethods.html">Special Methods on Classes and Records</a></li>
<li class="toctree-l3"><a class="reference internal" href="genericClasses.html">Generic Classes and Records</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuples.html">Tuples</a></li>
<li class="toctree-l3"><a class="reference internal" href="varargs.html">Variadic Arguments (var args)</a></li>
<li class="toctree-l3"><a class="reference internal" href="modules.html">Modules</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Nothing Variables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#nothing-variables">Nothing variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="#conditional-variables">Conditional variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="#conditional-fields">Conditional fields</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="errorHandling.html">Error Handling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#iterators">Iterators</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#task-parallelism">Task Parallelism</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#locality">Locality</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#data-parallelism">Data Parallelism</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#library-utilities">Library Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#numerical-libraries">Numerical Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#tools">Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#language-overview">Language Overview</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../builtins/index.html">Built-in Types and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/standard.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Chapel Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Primers</a> &raquo;</li>
        
      <li>The ‘nothing’ type</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/primers/nothingVariables.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-nothing-type">
<span id="primers-nothingvariables"></span><h1>The ‘nothing’ type<a class="headerlink" href="#the-nothing-type" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/chapel-lang/chapel/blob/master/test/release/examples/primers/nothingVariables.chpl">View nothingVariables.chpl on GitHub</a></p>
<p>This primer demonstrates the use of the <code class="docutils literal notranslate"><span class="pre">nothing</span></code> type on variables and
class/record fields. A variable or field that is of type <code class="docutils literal notranslate"><span class="pre">nothing</span></code> is
removed by the compiler and doesn’t exist during program execution.</p>
<p>The value <code class="docutils literal notranslate"><span class="pre">none</span></code> has type <code class="docutils literal notranslate"><span class="pre">nothing</span></code> and can be assigned to a
<code class="docutils literal notranslate"><span class="pre">nothing</span></code> variable, or returned from a function with <code class="docutils literal notranslate"><span class="pre">nothing</span></code>
return type.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">nothing</span></code> type is not to be confused with the <code class="docutils literal notranslate"><span class="pre">void</span></code> type, which
is the type of a function that does not return any value.</p>
</div>
<div class="section" id="nothing-variables">
<h2>Nothing variables<a class="headerlink" href="#nothing-variables" title="Permalink to this headline">¶</a></h2>
<p>This variable will be removed by the compiler. It is an error to assign a
non-nothing value to it, or to use it where a non-nothing value is expected.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">nothingVar</span><span class="p">:</span> <span class="nx">nothing</span><span class="p">;</span>
</pre></div>
</div>
<p>The value <code class="docutils literal notranslate"><span class="pre">none</span></code> is the only value of the <code class="docutils literal notranslate"><span class="pre">nothing</span></code> type.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">nothingVar2</span> <span class="o">=</span> <span class="nx">none</span><span class="p">;</span>
</pre></div>
</div>
<p>The following (commented out) statements are compile time errors:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">nothingVar</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="o">//</span> <span class="n">var</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">nothingVar</span><span class="p">;</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">nothing</span></code> variable can be passed to a generic function as long as the
function doesn’t do anything that expects it to be a value. The following
call to <code class="docutils literal notranslate"><span class="pre">writeln()</span></code> will simply print a blank line, as though the
argument was never there.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="nx">nothingVar</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="conditional-variables">
<h2>Conditional variables<a class="headerlink" href="#conditional-variables" title="Permalink to this headline">¶</a></h2>
<p>A variable that will just be removed by the compiler doesn’t seem very
useful on its own. But with the addition of compile time folding of
<code class="docutils literal notranslate"><span class="pre">param</span></code> values, it can be used to remove variables conditionally.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">config</span> <span class="kd">param</span> <span class="nx">useMultiplier</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</pre></div>
</div>
<p>If useMultiplier is <code class="docutils literal notranslate"><span class="pre">false</span></code>, the <code class="docutils literal notranslate"><span class="pre">multiplier</span></code> variable will be removed
by the compiler.  Since all uses of <code class="docutils literal notranslate"><span class="pre">multiplier</span></code> are guarded by the
<code class="docutils literal notranslate"><span class="pre">useMultiplier</span></code> param, they will also be removed.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">multiplier</span> <span class="o">=</span> <span class="k">if</span> <span class="nx">useMultiplier</span> <span class="k">then</span> <span class="mf">3.5</span> <span class="k">else</span> <span class="nx">none</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>

<span class="k">if</span> <span class="nx">useMultiplier</span> <span class="p">{</span>
  <span class="nx">value</span> <span class="o">*=</span> <span class="nx">multiplier</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">writeln</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="conditional-fields">
<h2>Conditional fields<a class="headerlink" href="#conditional-fields" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">nothing</span></code> type is extra useful for class and record fields, where a
large number of instances may be created, so removal of fields could save
a substantial amount of memory or cache space. An example is a record
containing two different implementations of its functionality, e.g. for
two different platforms.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">record</span> <span class="nc">nothingRecord</span> <span class="p">{</span>
  <span class="kd">param</span> <span class="nx">useImpl2</span><span class="p">:</span> <span class="kt">bool</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">impl1Var1</span> <span class="o">=</span> <span class="k">if</span> <span class="nx">useImpl2</span> <span class="k">then</span> <span class="nx">none</span> <span class="k">else</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">impl1Var2</span> <span class="o">=</span> <span class="k">if</span> <span class="nx">useImpl2</span> <span class="k">then</span> <span class="nx">none</span> <span class="k">else</span> <span class="mf">2.0</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">impl2Var1</span> <span class="o">=</span> <span class="k">if</span> <span class="nx">useImpl2</span> <span class="k">then</span> <span class="mf">3.0</span> <span class="k">else</span> <span class="nx">none</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">impl2Var2</span> <span class="o">=</span> <span class="k">if</span> <span class="nx">useImpl2</span> <span class="k">then</span> <span class="s">&quot;4.0&quot;</span> <span class="k">else</span> <span class="nx">none</span><span class="p">;</span>

  <span class="k">proc</span> <span class="nf">myProc</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="nx">useImpl2</span> <span class="p">{</span>
      <span class="nx">writeln</span><span class="p">((</span><span class="nx">impl2Var1</span><span class="p">,</span> <span class="nx">impl2Var2</span><span class="p">));</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">writeln</span><span class="p">((</span><span class="nx">impl1Var1</span><span class="p">,</span> <span class="nx">impl1Var2</span><span class="p">));</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">vr1</span></code> doesn’t contain the fields <code class="docutils literal notranslate"><span class="pre">impl2Var1</span></code> or <code class="docutils literal notranslate"><span class="pre">impl2Var2</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">vr2</span></code> doesn’t contain the fields <code class="docutils literal notranslate"><span class="pre">impl1Var1</span></code> or <code class="docutils literal notranslate"><span class="pre">impl1Var2</span></code></li>
</ul>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">vr1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">nothingRecord</span><span class="p">(</span><span class="nx">useImpl2</span><span class="o">=</span><span class="kc">false</span><span class="p">),</span>
    <span class="nx">vr2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">nothingRecord</span><span class="p">(</span><span class="nx">useImpl2</span><span class="o">=</span><span class="kc">true</span><span class="p">);</span>

<span class="nx">vr1</span><span class="p">.</span><span class="nx">myProc</span><span class="p">();</span>
<span class="nx">vr2</span><span class="p">.</span><span class="nx">myProc</span><span class="p">();</span>
</pre></div>
</div>
<p>By leaving out the unnecessary fields, the memory and cache footprint
are significantly reduced, resulting in potential performance improvements</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">config</span> <span class="kd">const</span> <span class="nx">n</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">A</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="nx">n</span><span class="p">]</span> <span class="nx">nothingRecord</span><span class="p">(</span><span class="nx">useImpl2</span><span class="o">=</span><span class="kc">false</span><span class="p">);</span>
<span class="k">for</span> <span class="nx">vr</span> <span class="kd">in</span> <span class="nx">A</span> <span class="p">{</span>
  <span class="k">if</span> <span class="nx">vr</span><span class="p">.</span><span class="nx">useImpl2</span> <span class="p">{</span>
    <span class="nx">vr</span><span class="p">.</span><span class="nx">impl2Var1</span> <span class="o">=</span> <span class="mf">1.1</span><span class="p">;</span>
    <span class="nx">vr</span><span class="p">.</span><span class="nx">impl2Var2</span> <span class="o">=</span> <span class="s">&quot;hello world!&quot;</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">vr</span><span class="p">.</span><span class="nx">impl1Var1</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
    <span class="nx">vr</span><span class="p">.</span><span class="nx">impl1Var2</span> <span class="o">=</span> <span class="mf">3.14</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Although <code class="docutils literal notranslate"><span class="pre">nothing</span></code> variables don’t seem useful at first glance, they can
be used to conditionally remove unnecessary variables reducing memory
and cache footprint. This can lead to less memory overhead and better
performance.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="errorHandling.html" class="btn btn-neutral float-right" title="Error Handling" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="modules.html" class="btn btn-neutral float-left" title="Modules" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Hewlett Packard Enterprise Development LP

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 



</body>
</html>