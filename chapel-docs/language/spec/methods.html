

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Methods &mdash; Chapel Documentation 1.23</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Error Handling" href="error-handling.html" />
    <link rel="prev" title="Procedures" href="procedures.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

<a href="../../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>1.23
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "1.23";
$pagename = "language/spec/methods";
include "../..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Tools</a></li>
</ul>
<p class="caption"><span class="caption-text">Writing Chapel Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../primers/index.html">Primers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Language Specification</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="scope.html">Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="notation.html">Notation</a></li>
<li class="toctree-l2"><a class="reference internal" href="organization.html">Organization</a></li>
<li class="toctree-l2"><a class="reference internal" href="acknowledgements.html">Acknowledgments</a></li>
<li class="toctree-l2"><a class="reference internal" href="language-overview.html">Language Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="lexical-structure.html">Lexical Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html">Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="variables.html">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="conversions.html">Conversions</a></li>
<li class="toctree-l2"><a class="reference internal" href="expressions.html">Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="statements.html">Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="procedures.html">Procedures</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Methods</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#method-calls">Method Calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-method-receiver-and-the-this-argument">The Method Receiver and the <em>this</em> Argument</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-this-method">The <em>this</em> Method</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-these-method">The <em>these</em> Method</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="error-handling.html">Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="tuples.html">Tuples</a></li>
<li class="toctree-l2"><a class="reference internal" href="classes.html">Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="records.html">Records</a></li>
<li class="toctree-l2"><a class="reference internal" href="unions.html">Unions</a></li>
<li class="toctree-l2"><a class="reference internal" href="ranges.html">Ranges</a></li>
<li class="toctree-l2"><a class="reference internal" href="domains.html">Domains</a></li>
<li class="toctree-l2"><a class="reference internal" href="arrays.html">Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="iterators.html">Iterators</a></li>
<li class="toctree-l2"><a class="reference internal" href="generics.html">Generics</a></li>
<li class="toctree-l2"><a class="reference internal" href="input-and-output.html">Input and Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="task-parallelism-and-synchronization.html">Task Parallelism and Synchronization</a></li>
<li class="toctree-l2"><a class="reference internal" href="data-parallelism.html">Data Parallelism</a></li>
<li class="toctree-l2"><a class="reference internal" href="locales.html">Locales</a></li>
<li class="toctree-l2"><a class="reference internal" href="domain-maps.html">Domain Maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-defined-reductions-and-scans.html">User-Defined Reductions and Scans</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory-consistency-model.html">Memory Consistency Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="interoperability.html">Interoperability</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../builtins/index.html">Built-in Types and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/standard.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../archivedSpecs.html">Documentation Archives</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chapel Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Chapel Language Specification</a> &raquo;</li>
        
      <li>Methods</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/language/spec/methods.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="methods">
<span id="chapter-methods"></span><h1>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">Â¶</a></h1>
<p>A <em>method</em> is a procedure or iterator that is associated with an
expression known as the <em>receiver</em>.</p>
<p>Methods are declared with the following syntax:</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>method-declaration-statement:
  procedure-kind[OPT] proc-or-iter this-intent[OPT] type-binding[OPT] function-name argument-list[OPT]
    return-intent[OPT] return-type[OPT] where-clause[OPT] function-body

proc-or-iter:
  `proc&#39;
  `iter&#39;

this-intent:
  `param&#39;
  `type&#39;
  `ref&#39;
  `const ref&#39;
  `const&#39;

type-binding:
  identifier .
  `(&#39; expr `)&#39; .
</pre></div>
</div>
<p>Methods defined within the lexical scope of a class, record, or union
are referred to as <em>primary methods</em>. For such methods, the
<code class="docutils literal notranslate"><span class="pre">type-binding</span></code> is omitted and is taken to be the innermost class,
record, or union in which the method is defined.</p>
<p>Methods defined outside of such scopes are known as <em>secondary methods</em>
and must have a <code class="docutils literal notranslate"><span class="pre">type-binding</span></code> (otherwise, they would simply be
standalone functions rather than methods). Note that secondary methods
can be defined not only for classes, records, and unions, but also for
any other type (e.g., integers, reals, strings).</p>
<p>[Secondary_Methods_with_Type_Expressions] Secondary methods can be
declared with a type expression instead of a type identifier. In
particular, if the <code class="docutils literal notranslate"><span class="pre">type-binding</span></code> is a parenthesized expression, the
compiler will evaluate that expression to find the receiver type for the
method. In that case, the method applies only to receivers of that type.
See also
<a class="reference internal" href="generics.html#creating-general-and-specialized-versions-of-a-function"><span class="std std-ref">Creating General and Specialized Versions of a Function</span></a>.</p>
<p>Method calls are described in <a class="reference internal" href="#method-calls"><span class="std std-ref">Method Calls</span></a>.</p>
<p>The use of <code class="docutils literal notranslate"><span class="pre">this-intent</span></code> is described in
<a class="reference internal" href="#method-receiver-and-this"><span class="std std-ref">The Method Receiver and the this Argument</span></a>.</p>
<div class="section" id="method-calls">
<span id="id1"></span><h2>Method Calls<a class="headerlink" href="#method-calls" title="Permalink to this headline">Â¶</a></h2>
<p>A method is invoked with a method call, which is similar to a non-method
call expression, but it can include a receiver clause. The receiver
clause syntactically identifies a single argument by putting it before
the method name. That argument is the method receiver. When calling a
method from another method, or from within a class or record
declaration, the receiver clause can be omitted.</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>method-call-expression:
  receiver-clause[OPT] expression ( named-expression-list )
  receiver-clause[OPT] expression [ named-expression-list ]
  receiver-clause[OPT] parenthesesless-function-identifier
</pre></div>
</div>
<p>The receiver-clause (or its absence) specifies the methodâs receiver
<a class="reference internal" href="#method-receiver-and-this"><span class="std std-ref">The Method Receiver and the this Argument</span></a>.</p>
<blockquote>
<div><p><em>Example (defineMethod.chpl)</em>.</p>
<p>A method to output information about an instance of the <code class="docutils literal notranslate"><span class="pre">Actor</span></code>
class can be defined as follows:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">proc</span> <span class="nf">Actor.print</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;Actor &quot;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="s">&quot; is &quot;</span><span class="p">,</span> <span class="nx">age</span><span class="p">,</span> <span class="s">&quot; years old&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This method can be called on an instance of the <code class="docutils literal notranslate"><span class="pre">Actor</span></code> class,
<code class="docutils literal notranslate"><span class="pre">anActor</span></code>, with the call expression <code class="docutils literal notranslate"><span class="pre">anActor.print()</span></code>.</p>
</div></blockquote>
<p>The actual arguments supplied in the method call are bound to the formal
arguments in the method declaration following the rules specified for
procedures (<a class="reference internal" href="procedures.html#chapter-procedures"><span class="std std-ref">Procedures</span></a>). The exception is the
receiver <a class="reference internal" href="#method-receiver-and-this"><span class="std std-ref">The Method Receiver and the this Argument</span></a>.</p>
</div>
<div class="section" id="the-method-receiver-and-the-this-argument">
<span id="method-receiver-and-this"></span><h2>The Method Receiver and the <em>this</em> Argument<a class="headerlink" href="#the-method-receiver-and-the-this-argument" title="Permalink to this headline">Â¶</a></h2>
<p>A methodâs <em>receiver</em> is an implicit formal argument named <code class="docutils literal notranslate"><span class="pre">this</span></code>
representing the expression on which the method is invoked. The
receiverâs actual argument is specified by the <code class="docutils literal notranslate"><span class="pre">receiver-clause</span></code> of a
method-call-expression as specified in <a class="reference internal" href="#method-calls"><span class="std std-ref">Method Calls</span></a>.</p>
<blockquote>
<div><p><em>Example (implicitThis.chpl)</em>.</p>
<p>Let class <code class="docutils literal notranslate"><span class="pre">C</span></code>, method <code class="docutils literal notranslate"><span class="pre">foo</span></code>, and function <code class="docutils literal notranslate"><span class="pre">bar</span></code> be defined as</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">C</span> <span class="p">{</span>
  <span class="k">proc</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">bar</span><span class="p">(</span><span class="nx">this</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="k">proc</span> <span class="nf">bar</span><span class="p">(</span><span class="nx">c</span><span class="p">:</span> <span class="nx">C</span><span class="p">)</span> <span class="p">{</span> <span class="nx">writeln</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span> <span class="p">}</span>
</pre></div>
</div>
<p>Then given an instance of <code class="docutils literal notranslate"><span class="pre">C</span></code> called <code class="docutils literal notranslate"><span class="pre">c1</span></code>, the method call
<code class="docutils literal notranslate"><span class="pre">c1.foo()</span></code> results in a call to <code class="docutils literal notranslate"><span class="pre">bar</span></code> where the argument is
<code class="docutils literal notranslate"><span class="pre">c1</span></code>. Within primary method <code class="docutils literal notranslate"><span class="pre">C.foo()</span></code>, the (implicit) receiver
formal has static type <code class="docutils literal notranslate"><span class="pre">borrowed</span> <span class="pre">C</span></code> and is referred to as <code class="docutils literal notranslate"><span class="pre">this</span></code>.</p>
</div></blockquote>
<p>Methods whose receivers are objects are called <em>instance methods</em>.
Methods may also be defined to have <code class="docutils literal notranslate"><span class="pre">type</span></code> receiversâthese are known
as <em>type methods</em>.</p>
<p>Note that within a method for a class <code class="docutils literal notranslate"><span class="pre">C</span></code>, the type of <code class="docutils literal notranslate"><span class="pre">this</span></code> is
generally <code class="docutils literal notranslate"><span class="pre">borrowed</span> <span class="pre">C</span></code>. Within a type method on a class <code class="docutils literal notranslate"><span class="pre">C</span></code>,
<code class="docutils literal notranslate"><span class="pre">this</span></code> refers to the class type <code class="docutils literal notranslate"><span class="pre">C</span></code> with management and nilability
matching the type of the receiver. Please
see&nbsp;<a class="reference internal" href="classes.html#class-methods"><span class="std std-ref">Class Methods</span></a> for more details.</p>
<p>The optional <code class="docutils literal notranslate"><span class="pre">this-intent</span></code> is used to specify type methods, to
constrain a receiver argument to be a <code class="docutils literal notranslate"><span class="pre">param</span></code>, or to specify how the
receiver argument should be passed to the method.</p>
<p>When no <code class="docutils literal notranslate"><span class="pre">this-intent</span></code> is used, a default this intent applies. For
methods on classes and other primitive types, the default this intent is
the same as the default intent for that type. For record methods, the
intent for the receiver formal argument is <code class="docutils literal notranslate"><span class="pre">ref</span></code> or <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">ref</span></code>,
depending on whether the formal argument is modified inside of the
method. Programmers wishing to be explicit about whether or not record
methods modify the receiver can explicitly use the <code class="docutils literal notranslate"><span class="pre">ref</span></code> or
<code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">ref</span></code> <code class="docutils literal notranslate"><span class="pre">this-intent</span></code>.</p>
<p>A method whose <code class="docutils literal notranslate"><span class="pre">this-intent</span></code> is <code class="docutils literal notranslate"><span class="pre">type</span></code> defines a <em>type method</em>. It
can only be called on the type itself rather than on an instance of the
type. When <code class="docutils literal notranslate"><span class="pre">this-intent</span></code> is <code class="docutils literal notranslate"><span class="pre">param</span></code>, it specifies that the function
can only be applied to param objects of the given type binding.</p>
<blockquote>
<div><p><em>Example (paramTypeThisIntent.chpl)</em>.</p>
<p>In the following code, the <code class="docutils literal notranslate"><span class="pre">isOdd</span></code> method is defined with a
<code class="docutils literal notranslate"><span class="pre">this-intent</span></code> of <code class="docutils literal notranslate"><span class="pre">param</span></code>, permitting it to be called on params
only. The <code class="docutils literal notranslate"><span class="pre">size</span></code> method is defined with a <code class="docutils literal notranslate"><span class="pre">this-intent</span></code> of
<code class="docutils literal notranslate"><span class="pre">type</span></code>, requiring it to be called on the <code class="docutils literal notranslate"><span class="pre">int</span></code> type itself, not
on integer values.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">proc</span> <span class="nf">param</span> <span class="kt">int</span><span class="p">.</span><span class="nx">isOdd</span><span class="p">()</span> <span class="kd">param</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">this</span> <span class="o">&amp;</span> <span class="mh">0x1</span> <span class="o">==</span> <span class="mh">0x1</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">proc</span> <span class="nf">type</span> <span class="kt">int</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="kd">param</span> <span class="p">{</span>
  <span class="k">return</span> <span class="mi">64</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">param</span> <span class="nx">three</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">seven</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>

<span class="nx">writeln</span><span class="p">(</span><span class="m">42.i</span><span class="nx">sOdd</span><span class="p">());</span>          <span class="c1">// prints false</span>
<span class="nx">writeln</span><span class="p">(</span><span class="nx">three</span><span class="p">.</span><span class="nx">isOdd</span><span class="p">());</span>       <span class="c1">// prints true</span>
<span class="nx">writeln</span><span class="p">((</span><span class="mi">42</span><span class="o">+</span><span class="nx">three</span><span class="p">).</span><span class="nx">isOdd</span><span class="p">());</span>  <span class="c1">// prints true</span>
<span class="c1">// writeln(seven.isOdd());    // illegal since &#39;seven&#39; is not a param</span>

<span class="nx">writeln</span><span class="p">(</span><span class="kt">int</span><span class="p">.</span><span class="nx">size</span><span class="p">());</span>          <span class="c1">// prints 64</span>
<span class="c1">// writeln(42.size());        // illegal since &#39;size()&#39; is a type method</span>
</pre></div>
</div>
</div></blockquote>
<p>Type methods can also be iterators.</p>
<blockquote>
<div><p><em>Example (typeMethodIter.chpl)</em>.</p>
<p>In the following code, the class <code class="docutils literal notranslate"><span class="pre">C</span></code> defines a type method iterator
which can be invoked on the type itself:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">C</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">x</span><span class="p">:</span> <span class="kt">int</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">y</span><span class="p">:</span> <span class="kt">string</span><span class="p">;</span>

  <span class="k">iter</span> <span class="nf">type</span> <span class="nx">myIter</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">yield</span> <span class="mi">3</span><span class="p">;</span>
    <span class="k">yield</span> <span class="mi">5</span><span class="p">;</span>
    <span class="k">yield</span> <span class="mi">7</span><span class="p">;</span>
    <span class="k">yield</span> <span class="mi">11</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">for</span> <span class="nx">i</span> <span class="kd">in</span> <span class="nx">C</span><span class="p">.</span><span class="nx">myIter</span><span class="p">()</span> <span class="k">do</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>When <code class="docutils literal notranslate"><span class="pre">this-intent</span></code> is <code class="docutils literal notranslate"><span class="pre">ref</span></code>, the receiver argument will be passed by
reference, allowing modifications to <code class="docutils literal notranslate"><span class="pre">this</span></code>. If <code class="docutils literal notranslate"><span class="pre">this-intent</span></code> is
<code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">ref</span></code>, the receiver argument is passed by reference but it
cannot be modified inside the method. The <code class="docutils literal notranslate"><span class="pre">this-intent</span></code> can also
describe an abstract intent as follows. If it is <code class="docutils literal notranslate"><span class="pre">const</span></code>, the receiver
argument will be passed with <code class="docutils literal notranslate"><span class="pre">const</span></code> intent. If it is left out
entirely, the receiver will be passed with a default intent. For
records, that default intent is <code class="docutils literal notranslate"><span class="pre">ref</span></code> if <code class="docutils literal notranslate"><span class="pre">this</span></code> is modified within
the function and <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">ref</span></code> otherwise. For other types, the default
<code class="docutils literal notranslate"><span class="pre">this</span></code> intent matches the default argument intent described in
<a class="reference internal" href="procedures.html#the-default-intent"><span class="std std-ref">The Default Intent</span></a>.</p>
<blockquote>
<div><p><em>Example (refThisIntent.chpl)</em>.</p>
<p>In the following code, the <code class="docutils literal notranslate"><span class="pre">doubleMe</span></code> function is defined with a
<code class="docutils literal notranslate"><span class="pre">this-intent</span></code> of <code class="docutils literal notranslate"><span class="pre">ref</span></code>, allowing variables of type <code class="docutils literal notranslate"><span class="pre">int</span></code> to
double themselves.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">proc</span> <span class="nf">ref</span> <span class="kt">int</span><span class="p">.</span><span class="nx">doubleMe</span><span class="p">()</span> <span class="p">{</span> <span class="nx">this</span> <span class="o">*=</span> <span class="mi">2</span><span class="p">;</span> <span class="p">}</span>
</pre></div>
</div>
<p>Given a variable <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">2</span></code>, a call to <code class="docutils literal notranslate"><span class="pre">x.doubleMe()</span></code> will set <code class="docutils literal notranslate"><span class="pre">x</span></code>
to <code class="docutils literal notranslate"><span class="pre">4</span></code>.</p>
</div></blockquote>
</div>
<div class="section" id="the-this-method">
<span id="id2"></span><h2>The <em>this</em> Method<a class="headerlink" href="#the-this-method" title="Permalink to this headline">Â¶</a></h2>
<p>A procedure method declared with the name <code class="docutils literal notranslate"><span class="pre">this</span></code> allows the receiver
to be âindexedâ similarly to how an array is indexed. Indexing (as with
<code class="docutils literal notranslate"><span class="pre">A[1]</span></code>) has the semantics of calling a method named <code class="docutils literal notranslate"><span class="pre">this</span></code>. There is
no other way to call a method called <code class="docutils literal notranslate"><span class="pre">this</span></code>. The <code class="docutils literal notranslate"><span class="pre">this</span></code> method must
be declared with parentheses even if the argument list is empty.</p>
<blockquote>
<div><p><em>Example (thisMethod.chpl)</em>.</p>
<p>In the following code, the <code class="docutils literal notranslate"><span class="pre">this</span></code> method is used to create a class
that acts like a simple array that contains three integers indexed by
1, 2, and 3.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ThreeArray</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">x3</span><span class="p">:</span> <span class="kt">int</span><span class="p">;</span>
  <span class="k">proc</span> <span class="nf">this</span><span class="p">(</span><span class="nx">i</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="kd">ref</span> <span class="p">{</span>
    <span class="k">select</span> <span class="nx">i</span> <span class="p">{</span>
      <span class="k">when</span> <span class="mi">1</span> <span class="k">do</span> <span class="k">return</span> <span class="nx">x1</span><span class="p">;</span>
      <span class="k">when</span> <span class="mi">2</span> <span class="k">do</span> <span class="k">return</span> <span class="nx">x2</span><span class="p">;</span>
      <span class="k">when</span> <span class="mi">3</span> <span class="k">do</span> <span class="k">return</span> <span class="nx">x3</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">halt</span><span class="p">(</span><span class="s">&quot;ThreeArray index out of bounds: &quot;</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="the-these-method">
<span id="id3"></span><h2>The <em>these</em> Method<a class="headerlink" href="#the-these-method" title="Permalink to this headline">Â¶</a></h2>
<p>An iterator method declared with the name <code class="docutils literal notranslate"><span class="pre">these</span></code> allows the receiver
to be âiterated overâ similarly to how a domain or array supports
iteration. When a value supporting a <code class="docutils literal notranslate"><span class="pre">these</span></code> method is used as the the
<code class="docutils literal notranslate"><span class="pre">iteratable-expression</span></code> of a loop, the loop proceeds in a manner
controlled by the <code class="docutils literal notranslate"><span class="pre">these</span></code> iterator.</p>
<blockquote>
<div><p><em>Example (theseIterator.chpl)</em>.</p>
<p>In the following code, the <code class="docutils literal notranslate"><span class="pre">these</span></code> method is used to create a class
that acts like a simple array that can be iterated over and contains
three integers.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ThreeArray</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">x3</span><span class="p">:</span> <span class="kt">int</span><span class="p">;</span>
  <span class="k">iter</span> <span class="nf">these</span><span class="p">()</span> <span class="kd">ref</span> <span class="p">{</span>
    <span class="k">yield</span> <span class="nx">x1</span><span class="p">;</span>
    <span class="k">yield</span> <span class="nx">x2</span><span class="p">;</span>
    <span class="k">yield</span> <span class="nx">x3</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>An iterator type method with the name <code class="docutils literal notranslate"><span class="pre">these</span></code> supports iteration over
the class type itself.</p>
<blockquote>
<div><p><em>Example (typeMethodIterThese.chpl)</em>.</p>
<p>In the following code, the class <code class="docutils literal notranslate"><span class="pre">C</span></code> defines a type method iterator
named <code class="docutils literal notranslate"><span class="pre">these</span></code>, supporting direct iteration over the type:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">C</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">x</span><span class="p">:</span> <span class="kt">int</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">y</span><span class="p">:</span> <span class="kt">string</span><span class="p">;</span>

  <span class="k">iter</span> <span class="nf">type</span> <span class="nx">these</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">yield</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">yield</span> <span class="mi">2</span><span class="p">;</span>
    <span class="k">yield</span> <span class="mi">4</span><span class="p">;</span>
    <span class="k">yield</span> <span class="mi">8</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">for</span> <span class="nx">i</span> <span class="kd">in</span> <span class="nx">C</span> <span class="k">do</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="error-handling.html" class="btn btn-neutral float-right" title="Error Handling" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="procedures.html" class="btn btn-neutral float-left" title="Procedures" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Hewlett Packard Enterprise Development LP

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 



</body>
</html>