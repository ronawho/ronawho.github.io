

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Ranges &mdash; Chapel Documentation 1.23</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Domains" href="domains.html" />
    <link rel="prev" title="Unions" href="unions.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

<a href="../../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>1.23
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "1.23";
$pagename = "language/spec/ranges";
include "../..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Tools</a></li>
</ul>
<p class="caption"><span class="caption-text">Writing Chapel Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../primers/index.html">Primers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Language Specification</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="scope.html">Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="notation.html">Notation</a></li>
<li class="toctree-l2"><a class="reference internal" href="organization.html">Organization</a></li>
<li class="toctree-l2"><a class="reference internal" href="acknowledgements.html">Acknowledgments</a></li>
<li class="toctree-l2"><a class="reference internal" href="language-overview.html">Language Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="lexical-structure.html">Lexical Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html">Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="variables.html">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="conversions.html">Conversions</a></li>
<li class="toctree-l2"><a class="reference internal" href="expressions.html">Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="statements.html">Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="procedures.html">Procedures</a></li>
<li class="toctree-l2"><a class="reference internal" href="methods.html">Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="error-handling.html">Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="tuples.html">Tuples</a></li>
<li class="toctree-l2"><a class="reference internal" href="classes.html">Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="records.html">Records</a></li>
<li class="toctree-l2"><a class="reference internal" href="unions.html">Unions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Ranges</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#range-concepts">Range Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#range-types">Range Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#range-values">Range Values</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#range-literals">Range Literals</a></li>
<li class="toctree-l4"><a class="reference internal" href="#default-values">Default Values</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#common-operations">Common Operations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#range-assignment">Range Assignment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#range-comparisons">Range Comparisons</a></li>
<li class="toctree-l4"><a class="reference internal" href="#iterating-over-ranges">Iterating over Ranges</a></li>
<li class="toctree-l4"><a class="reference internal" href="#range-promotion-of-scalar-functions">Range Promotion of Scalar Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#range-operators">Range Operators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#by-operator">By Operator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#align-operator">Align Operator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#count-operator">Count Operator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#arithmetic-operators">Arithmetic Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="#range-slicing">Range Slicing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#predefined-functions-on-ranges">Predefined Functions on Ranges</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#range-type-parameters">Range Type Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#range-properties">Range Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#other-queries">Other Queries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#range-transformations">Range Transformations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="domains.html">Domains</a></li>
<li class="toctree-l2"><a class="reference internal" href="arrays.html">Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="iterators.html">Iterators</a></li>
<li class="toctree-l2"><a class="reference internal" href="generics.html">Generics</a></li>
<li class="toctree-l2"><a class="reference internal" href="input-and-output.html">Input and Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="task-parallelism-and-synchronization.html">Task Parallelism and Synchronization</a></li>
<li class="toctree-l2"><a class="reference internal" href="data-parallelism.html">Data Parallelism</a></li>
<li class="toctree-l2"><a class="reference internal" href="locales.html">Locales</a></li>
<li class="toctree-l2"><a class="reference internal" href="domain-maps.html">Domain Maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-defined-reductions-and-scans.html">User-Defined Reductions and Scans</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory-consistency-model.html">Memory Consistency Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="interoperability.html">Interoperability</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../builtins/index.html">Built-in Types and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/standard.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../archivedSpecs.html">Documentation Archives</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chapel Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Chapel Language Specification</a> &raquo;</li>
        
      <li>Ranges</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/language/spec/ranges.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ranges">
<span id="chapter-ranges"></span><h1>Ranges<a class="headerlink" href="#ranges" title="Permalink to this headline">¶</a></h1>
<p>A <em>range</em> is a first-class, constant-space representation of a regular
sequence of indices of either integer, boolean, or enumerated type.
Ranges support iteration over the sequences they represent and are the
basis for defining domains (<a class="reference internal" href="domains.html#chapter-domains"><span class="std std-ref">Domains</span></a>).</p>
<p>Ranges are presented as follows:</p>
<ul class="simple">
<li>definition of the key range concepts <a class="reference internal" href="#range-concepts"><span class="std std-ref">Range Concepts</span></a></li>
<li>range types <a class="reference internal" href="#range-types"><span class="std std-ref">Range Types</span></a></li>
<li>range values <a class="reference internal" href="#range-values"><span class="std std-ref">Range Values</span></a></li>
<li>range assignment <a class="reference internal" href="#range-assignment"><span class="std std-ref">Range Assignment</span></a></li>
<li>operators on ranges <a class="reference internal" href="#range-operators"><span class="std std-ref">Range Operators</span></a></li>
<li>predefined functions on ranges
<a class="reference internal" href="#predefined-range-functions"><span class="std std-ref">Predefined Functions on Ranges</span></a></li>
</ul>
<div class="section" id="range-concepts">
<span id="id1"></span><h2>Range Concepts<a class="headerlink" href="#range-concepts" title="Permalink to this headline">¶</a></h2>
<p>A range has four primary properties. Together they define the sequence
of indices that the range represents, or the <em>represented sequence</em>, as
follows.</p>
<ul class="simple">
<li>The <em>low bound</em> is either a specific index value or -<span class="math notranslate nohighlight">\(\infty\)</span>.</li>
<li>The <em>high bound</em> is either a specific index value or
+<span class="math notranslate nohighlight">\(\infty\)</span>. The low and high bounds determine the span of the
represented sequence. Chapel does not represent <span class="math notranslate nohighlight">\(\infty\)</span>
explicitly. Instead, infinite bound(s) are represented implicitly in
the range’s type (<a class="reference internal" href="#range-types"><span class="std std-ref">Range Types</span></a>). When the low and/or high
bound is <span class="math notranslate nohighlight">\(\infty\)</span>, the represented sequence is unbounded in the
corresponding direction(s).</li>
<li>The <em>stride</em> is a non-zero integer. It defines the distance between
any two adjacent members of the represented sequence. The sign of the
stride indicates the direction of the sequence:<ul>
<li><span class="math notranslate nohighlight">\(stride &gt; 0\)</span> indicates an increasing sequence,</li>
<li><span class="math notranslate nohighlight">\(stride &lt; 0\)</span> indicates a decreasing sequence.</li>
</ul>
</li>
<li>The <em>alignment</em> is either a specific index value or is <em>ambiguous</em>.
It defines how the represented sequence’s members are aligned
relative to the stride. For a range with a stride other than 1 or -1,
ambiguous alignment means that the represented sequence is undefined.
In such a case, certain operations discussed later result in an
error.</li>
</ul>
<p>More formally, the represented sequence for the range
<span class="math notranslate nohighlight">\((low, high, stride, alignmt)\)</span> contains all indices <span class="math notranslate nohighlight">\(ix\)</span>
such that:</p>
<table border="1" class="docutils">
<colgroup>
<col width="63%" />
<col width="37%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><span class="math notranslate nohighlight">\(low \leq ix \leq high\)</span> and <span class="math notranslate nohighlight">\(ix \equiv alignmt \pmod{|stride|}\)</span></td>
<td>if <span class="math notranslate nohighlight">\(alignmt\)</span> is not ambiguous</td>
</tr>
<tr class="row-even"><td><span class="math notranslate nohighlight">\(low \leq ix \leq high\)</span></td>
<td>if <span class="math notranslate nohighlight">\(stride = 1\)</span> or <span class="math notranslate nohighlight">\(stride = -1\)</span></td>
</tr>
<tr class="row-odd"><td>the represented sequence is undefined</td>
<td>otherwise</td>
</tr>
</tbody>
</table>
<p>The sequence, if defined, is increasing if <span class="math notranslate nohighlight">\(stride &gt; 0\)</span> and
decreasing if <span class="math notranslate nohighlight">\(stride &lt; 0\)</span>.</p>
<p>If the represented sequence is defined but there are no indices
satisfying the applicable equation(s) above, the range and its
represented sequence are <em>empty</em>. A common case of this occurs when the
high bound is greater than the low bound.</p>
<p>We will say that a value <span class="math notranslate nohighlight">\(ix\)</span> is <em>aligned</em> w.r.t. the range
<span class="math notranslate nohighlight">\((low, high, stride, alignmt)\)</span> if:</p>
<ul class="simple">
<li><span class="math notranslate nohighlight">\(alignmt\)</span> is not ambiguous and
<span class="math notranslate nohighlight">\(ix \equiv alignmt \pmod{|stride|}\)</span>, or</li>
<li><span class="math notranslate nohighlight">\(stride\)</span> is 1 or -1.</li>
</ul>
<p>Furthermore, <span class="math notranslate nohighlight">\(\infty\)</span> is never aligned.</p>
<p>Ranges have the following additional properties.</p>
<ul>
<li><p class="first">A range is <em>ambiguously aligned</em> if</p>
<ul class="simple">
<li>its alignment is ambiguous, and</li>
<li>its stride is neither 1 nor -1.</li>
</ul>
</li>
<li><p class="first">The <em>first index</em> is the first member of the represented sequence.</p>
<p>A range <em>has no</em> first index when the first member is undefined, that
is, in the following cases:</p>
<ul class="simple">
<li>the range is ambiguously aligned,</li>
<li>the represented sequence is empty,</li>
<li>the represented sequence is increasing and the low bound is
-<span class="math notranslate nohighlight">\(\infty\)</span>,</li>
<li>the represented sequence is decreasing and the high bound is
+<span class="math notranslate nohighlight">\(\infty\)</span>.</li>
</ul>
</li>
<li><p class="first">The <em>last index</em> is the last member of the represented sequence.</p>
<p>A range <em>has no</em> last index when the last member is undefined, that
is, in the following cases:</p>
<ul class="simple">
<li>it is ambiguously aligned,</li>
<li>the represented sequence is empty,</li>
<li>the represented sequence is increasing and the high bound is
+<span class="math notranslate nohighlight">\(\infty\)</span>,</li>
<li>the represented sequence is decreasing and the low bound is
-<span class="math notranslate nohighlight">\(\infty\)</span>.</li>
</ul>
</li>
<li><p class="first">The <em>aligned low bound</em> is the smallest value that is greater than or
equal to the low bound and is aligned w.r.t. the range, if such a
value exists.</p>
<p>The aligned low bound equals the smallest member of the represented
sequence, when both exist.</p>
</li>
<li><p class="first">The <em>aligned high bound</em> is the largest value that is less than or
equal to the high bound and is aligned w.r.t. the range, if such a
value exists.</p>
<p>The aligned high bound equals the largest member of the represented
sequence, when both exist.</p>
</li>
<li><p class="first">The range is <em>iterable</em>, that is, it is legal to iterate over it, if
it has a first index.</p>
</li>
</ul>
</div>
<div class="section" id="range-types">
<span id="id2"></span><h2>Range Types<a class="headerlink" href="#range-types" title="Permalink to this headline">¶</a></h2>
<p>The type of a range is characterized by three parameters:</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">idxType</span></code> is the type of the indices of the range’s represented
sequence. However, when the range’s low and/or high bound is
<span class="math notranslate nohighlight">\(\infty\)</span>, the represented sequence also contains indices that
are not representable by <code class="docutils literal notranslate"><span class="pre">idxType</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">idxType</span></code> must be an integral, boolean, or enumerated type and is
<code class="docutils literal notranslate"><span class="pre">int</span></code> by default. The range’s low bound and high bound (when they
are not <span class="math notranslate nohighlight">\(\infty\)</span>) and alignment are of the type <code class="docutils literal notranslate"><span class="pre">idxType</span></code>.
The range’s stride is of the signed integer type that has the same
bit size as <code class="docutils literal notranslate"><span class="pre">idxType</span></code> for integral ranges; for boolean and
enumerated ranges, it is simply <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">boundedType</span></code> indicates which of the range’s bounds are not
<span class="math notranslate nohighlight">\(\infty\)</span>. <code class="docutils literal notranslate"><span class="pre">boundedType</span></code> is an enumeration constant of the
type <code class="docutils literal notranslate"><span class="pre">BoundedRangeType</span></code>. It is discussed further below.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">stridable</span></code> is a boolean that determines whether the range’s stride
can take on values other than 1. <code class="docutils literal notranslate"><span class="pre">stridable</span></code> is <code class="docutils literal notranslate"><span class="pre">false</span></code> by
default. A range is called <em>stridable</em> if its type’s <code class="docutils literal notranslate"><span class="pre">stridable</span></code> is
<code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">boundedType</span></code> is one of the constants of the following type:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">enum</span> <span class="nx">BoundedRangeType</span> <span class="p">{</span> <span class="nx">bounded</span><span class="p">,</span> <span class="nx">boundedLow</span><span class="p">,</span> <span class="nx">boundedHigh</span><span class="p">,</span> <span class="nx">boundedNone</span> <span class="p">};</span>
</pre></div>
</div>
<p>The value of <code class="docutils literal notranslate"><span class="pre">boundedType</span></code> determines which bounds of the range are
specified (making the range “bounded”, as opposed to infinite, in the
corresponding direction(s)) as follows:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">bounded</span></code>: both bounds are specified.</li>
<li><code class="docutils literal notranslate"><span class="pre">boundedLow</span></code>: the low bound is specified (the high bound is
+<span class="math notranslate nohighlight">\(\infty\)</span>).</li>
<li><code class="docutils literal notranslate"><span class="pre">boundedHigh</span></code>: the high bound is specified (the low bound is
-<span class="math notranslate nohighlight">\(\infty\)</span>).</li>
<li><code class="docutils literal notranslate"><span class="pre">boundedNone</span></code>: neither bound is specified (both bounds are
<span class="math notranslate nohighlight">\(\infty\)</span>).</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">boundedType</span></code> is <code class="docutils literal notranslate"><span class="pre">BoundedRangeType.bounded</span></code> by default.</p>
<p>The parameters <code class="docutils literal notranslate"><span class="pre">idxType</span></code>, <code class="docutils literal notranslate"><span class="pre">boundedType</span></code>, and <code class="docutils literal notranslate"><span class="pre">stridable</span></code> affect
all values of the corresponding range type. For example, the range’s low
bound is -<span class="math notranslate nohighlight">\(\infty\)</span> if and only if the <code class="docutils literal notranslate"><span class="pre">boundedType</span></code> of that
range’s type is either <code class="docutils literal notranslate"><span class="pre">boundedHigh</span></code> or <code class="docutils literal notranslate"><span class="pre">boundedNone</span></code>.</p>
<blockquote>
<div><p><em>Rationale</em>.</p>
<p>Providing <code class="docutils literal notranslate"><span class="pre">boundedType</span></code> and <code class="docutils literal notranslate"><span class="pre">stridable</span></code> in a range’s type allows
the compiler to identify the more common cases where the range is
<code class="docutils literal notranslate"><span class="pre">bounded</span></code> and/or its stride is 1. The compiler can also detect user
and library code that is specialized to these cases. As a result, the
compiler has the opportunity to optimize these cases and the
specialized code more aggressively.</p>
</div></blockquote>
<p>A range type has the following syntax:</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>range-type:
  `range&#39; ( named-expression-list )
</pre></div>
</div>
<p>That is, a range type is obtained as if by invoking the range type
constructor (<a class="reference internal" href="generics.html#type-constructors"><span class="std std-ref">The Type Constructor</span></a>) that has the following
header:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">proc</span> <span class="nf">range</span><span class="p">(</span><span class="kd">type</span> <span class="nx">idxType</span> <span class="o">=</span> <span class="kt">int</span><span class="p">,</span>
           <span class="kd">param</span> <span class="nx">boundedType</span> <span class="o">=</span> <span class="nx">BoundedRangeType</span><span class="p">.</span><span class="nx">bounded</span><span class="p">,</span>
           <span class="kd">param</span> <span class="nx">stridable</span> <span class="o">=</span> <span class="kc">false</span><span class="p">)</span> <span class="kd">type</span>
</pre></div>
</div>
<p>As a special case, the keyword <code class="docutils literal notranslate"><span class="pre">range</span></code> without a parenthesized
argument list refers to the range type with the default values of all
its parameters, i.e., <code class="docutils literal notranslate"><span class="pre">range(int,</span> <span class="pre">BoundedRangeType.bounded,</span> <span class="pre">false)</span></code>.</p>
<blockquote>
<div><p><em>Example (rangeVariable.chpl)</em>.</p>
<p>The following declaration declares a variable <code class="docutils literal notranslate"><span class="pre">r</span></code> that can
represent ranges of 32-bit integers, with both high and low bounds
specified, and the ability to have a stride other than 1.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">r</span><span class="p">:</span> <span class="kt">range</span><span class="p">(</span><span class="kt">int</span><span class="p">(</span><span class="mi">32</span><span class="p">),</span> <span class="nx">BoundedRangeType</span><span class="p">.</span><span class="nx">bounded</span><span class="p">,</span> <span class="nx">stridable</span><span class="o">=</span><span class="kc">true</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="range-values">
<span id="id3"></span><h2>Range Values<a class="headerlink" href="#range-values" title="Permalink to this headline">¶</a></h2>
<p>A range value consists of the range’s four primary properties
(<a class="reference internal" href="#range-concepts"><span class="std std-ref">Range Concepts</span></a>): low bound, high bound, stride and
alignment.</p>
<div class="section" id="range-literals">
<span id="id4"></span><h3>Range Literals<a class="headerlink" href="#range-literals" title="Permalink to this headline">¶</a></h3>
<p>Range literals are specified with the following syntax.</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>range-literal:
  expression .. expression
  expression ..&lt; expression
  expression ..
  .. expression
  ..&lt; expression
  ..
</pre></div>
</div>
<p>The expressions to the left and to the right of <code class="docutils literal notranslate"><span class="pre">..</span></code> or <code class="docutils literal notranslate"><span class="pre">..&lt;</span></code>,
when given, are called the <cite>lower bound expression</cite> and the <cite>upper
bound expression</cite>, respectively.  The <code class="docutils literal notranslate"><span class="pre">..</span></code> operator defines a
closed-interval range, whereas the <code class="docutils literal notranslate"><span class="pre">..&lt;</span></code> operator defines a
half-open interval.</p>
<p>The type of a range literal is a range with the following parameters:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">idxType</span></code> is determined as follows:<ul>
<li>If both the lower bound and the upper bound expressions are given and
have the same type, then <code class="docutils literal notranslate"><span class="pre">idxType</span></code> is that type.</li>
<li>If both the lower bound and the upper bound expressions are given and
an implicit conversion is allowed from one expression’s type to
the other’s, then <code class="docutils literal notranslate"><span class="pre">idxType</span></code> is that type.</li>
<li>If only one bound expression is given and it has an integral,
boolean, or enumerated type, then <code class="docutils literal notranslate"><span class="pre">idxType</span></code> is that type.</li>
<li>If neither bound expression is given, then <code class="docutils literal notranslate"><span class="pre">idxType</span></code> is <code class="docutils literal notranslate"><span class="pre">int</span></code>.</li>
<li>Otherwise, the range literal is not legal.</li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">boundedType</span></code> is a value of the type <code class="docutils literal notranslate"><span class="pre">BoundedRangeType</span></code> that is
determined as follows:<ul>
<li><code class="docutils literal notranslate"><span class="pre">bounded</span></code>, if both the lower bound and the upper bound expressions
are given,</li>
<li><code class="docutils literal notranslate"><span class="pre">boundedLow</span></code>, if only the upper bound expression is given,</li>
<li><code class="docutils literal notranslate"><span class="pre">boundedHigh</span></code>, if only the lower bound expression is given,</li>
<li><code class="docutils literal notranslate"><span class="pre">boundedNone</span></code>, if neither bound expression is given.</li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">stridable</span></code> is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</li>
</ul>
<p>The value of a range literal is as follows:</p>
<ul class="simple">
<li>The low bound is given by the lower bound expression, if present, and
is -<span class="math notranslate nohighlight">\(\infty\)</span> otherwise.</li>
<li>When the range has an upper bound expression, a closed-interval
range (<code class="docutils literal notranslate"><span class="pre">..</span></code>) takes the expression’s value as its high bound;
whereas the high bound of a half-open interval range (<code class="docutils literal notranslate"><span class="pre">..&lt;</span></code>)
excludes the upper bound and is therefore one less than the upper
bound expression.  If there is no upper bound expression, the high
bound is +<span class="math notranslate nohighlight">\(\infty\)</span>.</li>
<li>The stride is 1.</li>
<li>The alignment is ambiguous.</li>
</ul>
</div>
<div class="section" id="default-values">
<span id="range-default-values"></span><h3>Default Values<a class="headerlink" href="#default-values" title="Permalink to this headline">¶</a></h3>
<p>The default value for a range type depends on the type’s <code class="docutils literal notranslate"><span class="pre">boundedType</span></code>
parameter as follows:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">1..0</span></code> (an empty range) if <code class="docutils literal notranslate"><span class="pre">boundedType</span></code> is <code class="docutils literal notranslate"><span class="pre">bounded</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">1..</span></code> if <code class="docutils literal notranslate"><span class="pre">boundedType</span></code> is <code class="docutils literal notranslate"><span class="pre">boundedLow</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">..0</span></code> if <code class="docutils literal notranslate"><span class="pre">boundedType</span></code> is <code class="docutils literal notranslate"><span class="pre">boundedHigh</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">..</span></code> if <code class="docutils literal notranslate"><span class="pre">boundedType</span></code> is <code class="docutils literal notranslate"><span class="pre">boundedNone</span></code></li>
</ul>
<blockquote>
<div><p><em>Rationale</em>.</p>
<p>We use 0 and 1 to represent an empty range because these values are
available for any <code class="docutils literal notranslate"><span class="pre">idxType</span></code>.</p>
<p>We have not found the natural choice of the default value for
<code class="docutils literal notranslate"><span class="pre">boundedLow</span></code> and <code class="docutils literal notranslate"><span class="pre">boundedHigh</span></code> ranges. The values indicated above
are distinguished by the following property. Slicing the default
value for a <code class="docutils literal notranslate"><span class="pre">boundedLow</span></code> range with the default value for a
<code class="docutils literal notranslate"><span class="pre">boundedHigh</span></code> range (or visa versa) produces an empty range,
matching the default value for a <code class="docutils literal notranslate"><span class="pre">bounded</span></code> range</p>
</div></blockquote>
</div>
</div>
<div class="section" id="common-operations">
<span id="ranges-common-operations"></span><h2>Common Operations<a class="headerlink" href="#common-operations" title="Permalink to this headline">¶</a></h2>
<p>All operations on a range return a new range rather than modifying the
existing one. This supports a coding style in which all ranges are
<em>immutable</em> (i.e. declared as <code class="docutils literal notranslate"><span class="pre">const</span></code>).</p>
<blockquote>
<div><p><em>Rationale</em>.</p>
<p>The intention is to provide ranges as immutable objects.</p>
<p>Immutable objects may be cached without creating coherence concerns.
They are also inherently thread-safe. In terms of implementation,
immutable objects are created in a consistent state and stay that
way: Outside of initializers, internal consistency checks can be
dispensed with.</p>
<p>These are the same arguments as were used to justify making strings
immutable in Java and C#.</p>
</div></blockquote>
<div class="section" id="range-assignment">
<span id="id5"></span><h3>Range Assignment<a class="headerlink" href="#range-assignment" title="Permalink to this headline">¶</a></h3>
<p>Assigning one range to another results in the target range copying the
low and high bounds, stride, and alignment from the source range.</p>
<p>Range assignment is legal when:</p>
<ul class="simple">
<li>An implicit conversion is allowed from <code class="docutils literal notranslate"><span class="pre">idxType</span></code> of the source
range to <code class="docutils literal notranslate"><span class="pre">idxType</span></code> of the destination range type,</li>
<li>the two range types have the same <code class="docutils literal notranslate"><span class="pre">boundedType</span></code>, and</li>
<li>either the destination range is stridable or the source range is not
stridable.</li>
</ul>
</div>
<div class="section" id="range-comparisons">
<span id="id6"></span><h3>Range Comparisons<a class="headerlink" href="#range-comparisons" title="Permalink to this headline">¶</a></h3>
<p>Ranges can be compared using equality and inequality.</p>
<dl class="function">
<dt>
<code class="descname">proc ==(r1: range(?), r2: range(?)): bool</code></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if the two ranges have the same represented sequence or
the same four primary properties, and <code class="docutils literal notranslate"><span class="pre">false</span></code> otherwise.</p>
</dd></dl>

</div>
<div class="section" id="iterating-over-ranges">
<span id="id7"></span><h3>Iterating over Ranges<a class="headerlink" href="#iterating-over-ranges" title="Permalink to this headline">¶</a></h3>
<p>A range can be used as an iterator expression in a loop. This is legal
only if the range is iterable. In this case the loop iterates over the
members of the range’s represented sequence, in the order defined by the
sequence. If the range is empty, no iterations are executed.</p>
<blockquote>
<div><p><em>Implementation Notes</em>.</p>
<p>An attempt to iterate over a range causes an error if adding stride
to the range’s last index overflows its index type, i.e. if the sum
is greater than the index type’s maximum value, or smaller than its
minimum value.</p>
</div></blockquote>
<div class="section" id="iterating-over-unbounded-ranges-in-zippered-iterations">
<span id="id8"></span><h4>Iterating over Unbounded Ranges in Zippered Iterations<a class="headerlink" href="#iterating-over-unbounded-ranges-in-zippered-iterations" title="Permalink to this headline">¶</a></h4>
<p>When a range with the first index but without the last index is used in
a zippered iteration (&nbsp;<a class="reference internal" href="statements.html#zipper-iteration"><span class="std std-ref">Zipper Iteration</span></a>), it generates as
many indices as needed to match the other iterator(s).</p>
<blockquote>
<div><p><em>Example (zipWithUnbounded.chpl)</em>.</p>
<p>The code</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="nx">i</span> <span class="kd">in</span> <span class="k">zip</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="o">..</span><span class="p">)</span> <span class="k">do</span>
  <span class="nx">write</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="s">&quot;; &quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>produces the output</p>
<div class="highlight-printoutput notranslate"><div class="highlight"><pre><span></span>(1, 3); (2, 4); (3, 5); (4, 6); (5, 7);
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="range-promotion-of-scalar-functions">
<span id="id9"></span><h3>Range Promotion of Scalar Functions<a class="headerlink" href="#range-promotion-of-scalar-functions" title="Permalink to this headline">¶</a></h3>
<p>Range values may be passed to a scalar function argument whose type
matches the range’s index type. This results in a promotion of the
scalar function as described in&nbsp;<a class="reference internal" href="data-parallelism.html#promotion"><span class="std std-ref">Promotion</span></a>.</p>
<blockquote>
<div><p><em>Example (rangePromotion.chpl)</em>.</p>
<p>Given a function <code class="docutils literal notranslate"><span class="pre">addOne(x:int)</span></code> that accepts <code class="docutils literal notranslate"><span class="pre">int</span></code> values and a
range <code class="docutils literal notranslate"><span class="pre">1..10</span></code>, the function <code class="docutils literal notranslate"><span class="pre">addOne()</span></code> can be called with
<code class="docutils literal notranslate"><span class="pre">1..10</span></code> as its actual argument which will result in the function
being invoked for each value in the range.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">proc</span> <span class="nf">addOne</span><span class="p">(</span><span class="nx">x</span><span class="p">:</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">A</span><span class="p">:[</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">]</span> <span class="kt">int</span><span class="p">;</span>
<span class="nx">A</span> <span class="o">=</span> <span class="nx">addOne</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>The last statement is equivalent to:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">forall</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span> <span class="kd">in</span> <span class="k">zip</span><span class="p">(</span><span class="nx">A</span><span class="p">,</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">)</span> <span class="k">do</span>
  <span class="nx">a</span> <span class="o">=</span> <span class="nx">addOne</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="range-operators">
<span id="id10"></span><h2>Range Operators<a class="headerlink" href="#range-operators" title="Permalink to this headline">¶</a></h2>
<p>The following operators can be applied to range expressions and are
described in this section: stride (<code class="docutils literal notranslate"><span class="pre">by</span></code>), alignment (<code class="docutils literal notranslate"><span class="pre">align</span></code>), count
(<code class="docutils literal notranslate"><span class="pre">#</span></code>) and slicing (<code class="docutils literal notranslate"><span class="pre">()</span></code> or <code class="docutils literal notranslate"><span class="pre">[]</span></code>). Chapel also defines a set
of functions that operate on ranges. They are described in
<a class="reference internal" href="#predefined-range-functions"><span class="std std-ref">Predefined Functions on Ranges</span></a>.</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>range-expression:
  expression
  strided-range-expression
  counted-range-expression
  aligned-range-expression
  sliced-range-expression
</pre></div>
</div>
<div class="section" id="by-operator">
<span id="by-operator-for-ranges"></span><h3>By Operator<a class="headerlink" href="#by-operator" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">by</span></code> operator selects a subsequence of the range’s represented
sequence, optionally reversing its direction. The operator takes two
arguments, a base range and an integral step. It produces a new range
whose represented sequence contains each <span class="math notranslate nohighlight">\(|\)</span>step<span class="math notranslate nohighlight">\(|\)</span>-th
element of the base range’s represented sequence. The operator reverses
the direction of the represented sequence if step<span class="math notranslate nohighlight">\(&lt;\)</span>0. If the
resulting sequence is increasing, it starts at the base range’s aligned
low bound, if it exists. If the resulting sequence is decreasing, it
starts at the base range’s aligned high bound, if it exists. Otherwise,
the base range’s alignment is used to determine which members of the
represented sequence to retain. If the base range’s represented sequence
is undefined, the resulting sequence is undefined, too.</p>
<p>The syntax of the <code class="docutils literal notranslate"><span class="pre">by</span></code> operator is:</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>strided-range-expression:
  range-expression `by&#39; step-expression

step-expression:
  expression
</pre></div>
</div>
<p>The type of the step must be a signed or unsigned integer of the same
bit size as the base range’s <code class="docutils literal notranslate"><span class="pre">idxType</span></code>, or an implicit conversion must
be allowed to that type from the step’s type. It is an error for the
step to be zero.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p><em>Future</em>.</p>
<p class="last">We may consider allowing the step to be of any integer type, for
maximum flexibility.</p>
</div>
</div></blockquote>
<p>The type of the result of the <code class="docutils literal notranslate"><span class="pre">by</span></code> operator is the type of the base
range, but with the <code class="docutils literal notranslate"><span class="pre">stridable</span></code> parameter set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<p>Formally, the result of the <code class="docutils literal notranslate"><span class="pre">by</span></code> operator is a range with the
following primary properties:</p>
<ul class="simple">
<li>The low and upper bounds are the same as those of the base range.</li>
<li>The stride is the product of the base range’s stride and the step,
cast to the base range’s stride type before multiplying.</li>
<li>The alignment is:<ul>
<li>the aligned low bound of the base range, if such exists and the
stride is positive;</li>
<li>the aligned high bound of the base range, if such exists and the
stride is negative;</li>
<li>the same as that of the base range, otherwise.</li>
</ul>
</li>
</ul>
<blockquote>
<div><p><em>Example (rangeByOperator.chpl)</em>.</p>
<p>In the following declarations, range <code class="docutils literal notranslate"><span class="pre">r1</span></code> represents the odd
integers between 1 and 20. Range <code class="docutils literal notranslate"><span class="pre">r2</span></code> strides <code class="docutils literal notranslate"><span class="pre">r1</span></code> by two and
represents every other odd integer between 1 and 20: 1, 5, 9, 13 and
17.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">r1</span> <span class="o">=</span> <span class="mi">1</span><span class="o">..</span><span class="mi">20</span> <span class="k">by</span> <span class="mi">2</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">r2</span> <span class="o">=</span> <span class="nx">r1</span> <span class="k">by</span> <span class="mi">2</span><span class="p">;</span>
</pre></div>
</div>
<p><em>Rationale</em>.</p>
<p><em>Why isn’t the high bound specified first if the stride is negative?</em>
The reason for this choice is that the <code class="docutils literal notranslate"><span class="pre">by</span></code> operator is binary, not
ternary. Given a range <code class="docutils literal notranslate"><span class="pre">R</span></code> initialized to <code class="docutils literal notranslate"><span class="pre">1..3</span></code>, we want
<code class="docutils literal notranslate"><span class="pre">R</span> <span class="pre">by</span> <span class="pre">-1</span></code> to contain the ordered sequence <span class="math notranslate nohighlight">\(3,2,1\)</span>. But then
<code class="docutils literal notranslate"><span class="pre">R</span> <span class="pre">by</span> <span class="pre">-1</span></code> would be different from <code class="docutils literal notranslate"><span class="pre">3..1</span> <span class="pre">by</span> <span class="pre">-1</span></code> even though it
should be identical by substituting the value in R into the
expression.</p>
</div></blockquote>
</div>
<div class="section" id="align-operator">
<span id="align-operator-for-ranges"></span><h3>Align Operator<a class="headerlink" href="#align-operator" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">align</span></code> operator can be applied to any range, and creates a new
range with the given alignment.</p>
<p>The syntax for the <code class="docutils literal notranslate"><span class="pre">align</span></code> operator is:</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>aligned-range-expression:
  range-expression `align&#39; expression
</pre></div>
</div>
<p>The type of the resulting range expression is the same as that of the
range appearing as the left operand, but with the <code class="docutils literal notranslate"><span class="pre">stridable</span></code>
parameter set to <code class="docutils literal notranslate"><span class="pre">true</span></code>. An implicit conversion from the type of the
right operand to the index type of the operand range must be allowed.
The resulting range has the same low and high bounds and stride as the
source range. The alignment equals the <code class="docutils literal notranslate"><span class="pre">align</span></code> operator’s right
operand and therefore is not ambiguous.</p>
<blockquote>
<div><p><em>Example (alignedStride.chpl)</em>.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">r1</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">..</span> <span class="mi">10</span> <span class="k">by</span> <span class="mi">3</span> <span class="k">align</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">for</span> <span class="nx">i</span> <span class="kd">in</span> <span class="nx">r1</span> <span class="k">do</span>
  <span class="nx">write</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>                  <span class="c1">// Produces &quot; 0 3 6 9&quot;.</span>
<span class="nx">writeln</span><span class="p">();</span>
</pre></div>
</div>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">r2</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">..</span> <span class="mi">10</span> <span class="k">by</span> <span class="mi">3</span> <span class="k">align</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">for</span> <span class="nx">i</span> <span class="kd">in</span> <span class="nx">r2</span> <span class="k">do</span>
  <span class="nx">write</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>                  <span class="c1">// Produces &quot; 1 4 7 10&quot;.</span>
<span class="nx">writeln</span><span class="p">();</span>
</pre></div>
</div>
</div></blockquote>
<p>When the stride is negative, the same indices are printed in reverse:</p>
<blockquote>
<div><p><em>Example (alignedNegStride.chpl)</em>.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">r3</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">..</span> <span class="mi">10</span> <span class="k">by</span> <span class="o">-</span><span class="mi">3</span> <span class="k">align</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">for</span> <span class="nx">i</span> <span class="kd">in</span> <span class="nx">r3</span> <span class="k">do</span>
  <span class="nx">write</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>                  <span class="c1">// Produces &quot; 9 6 3 0&quot;.</span>
<span class="nx">writeln</span><span class="p">();</span>
</pre></div>
</div>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">r4</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">..</span> <span class="mi">10</span> <span class="k">by</span> <span class="o">-</span><span class="mi">3</span> <span class="k">align</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">for</span> <span class="nx">i</span> <span class="kd">in</span> <span class="nx">r4</span> <span class="k">do</span>
  <span class="nx">write</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>                  <span class="c1">// Produces &quot; 10 7 4 1&quot;.</span>
<span class="nx">writeln</span><span class="p">();</span>
</pre></div>
</div>
</div></blockquote>
<p>To create a range aligned relative to its <code class="docutils literal notranslate"><span class="pre">first</span></code> index, use the
<code class="docutils literal notranslate"><span class="pre">offset</span></code> method (<a class="reference internal" href="#range-offset-method"><span class="std std-ref">Range Offset Method</span></a>).</p>
</div>
<div class="section" id="count-operator">
<span id="id11"></span><h3>Count Operator<a class="headerlink" href="#count-operator" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">#</span></code> operator takes a range and an integral count and creates a
new range containing the specified number of indices. The low or high
bound of the left operand is preserved, and the other bound adjusted to
provide the specified number of indices. If the count is positive,
indices are taken from the start of the range; if the count is negative,
indices are taken from the end of the range. The count must be less than
or equal to the <code class="docutils literal notranslate"><span class="pre">length</span></code> of the range.</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>counted-range-expression:
  range-expression # expression
</pre></div>
</div>
<p>The type of the count expression must be a signed or unsigned integer of
the same bit size as the base range’s <code class="docutils literal notranslate"><span class="pre">idxType</span></code>, or an implicit
conversion must be allowed to that type from the count’s type.</p>
<p>The type of the result of the <code class="docutils literal notranslate"><span class="pre">#</span></code> operator is the type of the range
argument.</p>
<p>Depending on the sign of the count and the stride, the high or low bound
is unchanged and the other bound is adjusted so that it is
<span class="math notranslate nohighlight">\(c * stride - 1\)</span> units away. Specifically:</p>
<ul class="simple">
<li>If the count times the stride is positive, the low bound is preserved
and the high bound is adjusted to be one less than the low bound plus
that product.</li>
<li>If the count times the stride is negative, the high bound is
preserved and the low bound is adjusted to be one greater than the
high bound plus that product.</li>
</ul>
<blockquote>
<div><p><em>Rationale</em>.</p>
<p>Following the principle of preserving as much information from the
original range as possible, we must still choose the other bound so
that exactly <em>count</em> indices lie within the range. Making the two
bounds lie <span class="math notranslate nohighlight">\(count * stride - 1\)</span> apart will achieve this,
regardless of the current alignment of the range.</p>
<p>This choice also has the nice symmetry that the alignment can be
adjusted without knowing the bounds of the original range, and the
same number of indices will be produced:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">r</span> <span class="o">#</span> <span class="mi">4</span> <span class="k">align</span> <span class="mi">0</span>   <span class="c1">// Contains four indices.</span>
<span class="nx">r</span> <span class="o">#</span> <span class="mi">4</span> <span class="k">align</span> <span class="mi">1</span>   <span class="c1">// Contains four indices.</span>
<span class="nx">r</span> <span class="o">#</span> <span class="mi">4</span> <span class="k">align</span> <span class="mi">2</span>   <span class="c1">// Contains four indices.</span>
<span class="nx">r</span> <span class="o">#</span> <span class="mi">4</span> <span class="k">align</span> <span class="mi">3</span>   <span class="c1">// Contains four indices.</span>
</pre></div>
</div>
</div></blockquote>
<p>It is an error to apply the count operator with a positive count to a
range that has no first index. It is also an error to apply the count
operator with a negative count to a range that has no last index. It is
an error to apply the count operator to a range that is ambiguously
aligned.</p>
<blockquote>
<div><p><em>Example (rangeCountOperator.chpl)</em>.</p>
<p>The following declarations result in equivalent ranges.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">r1</span> <span class="o">=</span> <span class="mi">1</span><span class="o">..</span><span class="mi">10</span> <span class="k">by</span> <span class="o">-</span><span class="mi">2</span> <span class="o">#</span> <span class="o">-</span><span class="mi">3</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">r2</span> <span class="o">=</span> <span class="o">..</span><span class="mi">6</span> <span class="k">by</span> <span class="o">-</span><span class="mi">2</span> <span class="o">#</span> <span class="mi">3</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">r3</span> <span class="o">=</span> <span class="o">-</span><span class="mi">6</span><span class="o">..</span><span class="mi">6</span> <span class="k">by</span> <span class="o">-</span><span class="mi">2</span> <span class="o">#</span> <span class="mi">3</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">r4</span> <span class="o">=</span> <span class="mi">1</span><span class="o">..#</span><span class="mi">6</span> <span class="k">by</span> <span class="o">-</span><span class="mi">2</span><span class="p">;</span>
</pre></div>
</div>
<p>Each of these ranges represents the ordered set of three indices: 6,
4, 2.</p>
</div></blockquote>
</div>
<div class="section" id="arithmetic-operators">
<span id="range-arithmetic"></span><h3>Arithmetic Operators<a class="headerlink" href="#arithmetic-operators" title="Permalink to this headline">¶</a></h3>
<p>The following arithmetic operators are defined on ranges and integral
types:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">proc</span> <span class="nf">+</span><span class="p">(</span><span class="nx">r</span><span class="p">:</span> <span class="kt">range</span><span class="p">,</span> <span class="nx">s</span><span class="p">:</span> <span class="nx">integral</span><span class="p">):</span> <span class="kt">range</span>
<span class="k">proc</span> <span class="nf">+</span><span class="p">(</span><span class="nx">s</span><span class="p">:</span> <span class="nx">integral</span><span class="p">,</span> <span class="nx">r</span><span class="p">:</span> <span class="kt">range</span><span class="p">):</span> <span class="kt">range</span>
<span class="k">proc</span> <span class="nf">-</span><span class="p">(</span><span class="nx">r</span><span class="p">:</span> <span class="kt">range</span><span class="p">,</span> <span class="nx">s</span><span class="p">:</span> <span class="nx">integral</span><span class="p">):</span> <span class="kt">range</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">+</span></code> and <code class="docutils literal notranslate"><span class="pre">-</span></code> operators apply the scalar via the operator to the
range’s low and high bounds, producing a shifted version of the range.
If the operand range is unbounded above or below, the missing bounds are
ignored. The index type of the resulting range is the type of the value
that would result from an addition between the scalar value and a value
with the range’s index type. The bounded and stridable parameters for
the result range are the same as for the input range.</p>
<p>The stride of the resulting range is the same as the stride of the
original. The alignment of the resulting range is shifted by the same
amount as the high and low bounds. It is permissible to apply the shift
operators to a range that is ambiguously aligned. In that case, the
resulting range is also ambiguously aligned.</p>
<blockquote>
<div><p><em>Example (rangeAdd.chpl)</em>.</p>
<p>The following code creates a bounded, non-stridable range <code class="docutils literal notranslate"><span class="pre">r</span></code> which
has an index type of <code class="docutils literal notranslate"><span class="pre">int</span></code> representing the indices
<span class="math notranslate nohighlight">\({0, 1, 2, 3}\)</span>. It then uses the <code class="docutils literal notranslate"><span class="pre">+</span></code> operator to create a
second range <code class="docutils literal notranslate"><span class="pre">r2</span></code> representing the indices <span class="math notranslate nohighlight">\({1, 2, 3, 4}\)</span>.
The <code class="docutils literal notranslate"><span class="pre">r2</span></code> range is bounded, non-stridable, and is represented by
indices of type <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="mi">0</span><span class="o">..</span><span class="mi">3</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">r2</span> <span class="o">=</span> <span class="nx">r</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>    <span class="c1">// 1..4</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="range-slicing">
<span id="id12"></span><h3>Range Slicing<a class="headerlink" href="#range-slicing" title="Permalink to this headline">¶</a></h3>
<p>Ranges can be <em>sliced</em> using other ranges to create new sub-ranges. The
resulting range represents the intersection between the two ranges’
represented sequences. The stride and alignment of the resulting range
are adjusted as needed to make this true. <code class="docutils literal notranslate"><span class="pre">idxType</span></code> and the sign of
the stride of the result are determined by the first operand.</p>
<p>Range slicing is specified by the syntax:</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>sliced-range-expression:
  range-expression ( range-expression )
  range-expression [ range-expression ]
</pre></div>
</div>
<p>If either of the operand ranges is ambiguously aligned, then the
resulting range is also ambiguously aligned. In this case, the result is
valid only if the strides of the operand ranges are relatively prime.
Otherwise, an error is generated at run time.</p>
<blockquote>
<div><p><em>Rationale</em>.</p>
<p>If the strides of the two operand ranges are relatively prime, then
they are guaranteed to have some elements in their intersection,
regardless whether their relative alignment can be determined. In
that case, the bounds and stride in the resulting range are valid
with respect to the given inputs. The alignment can be supplied later
to create a valid range.</p>
<p>If the strides are not relatively prime, then the result of the
slicing operation would be completely ambiguous. The only reasonable
action for the implementation is to generate an error.</p>
</div></blockquote>
<p>If the resulting sequence cannot be expressed as a range of the original
type, the slice expression evaluates to the empty range <code class="docutils literal notranslate"><span class="pre">1..0</span></code>. This
can happen, for example, when the operands represent all odd and all
even numbers, or when the first operand is an unbounded range with
unsigned <code class="docutils literal notranslate"><span class="pre">idxType</span></code> and the second operand represents only negative
numbers.</p>
<blockquote>
<div><p><em>Example (rangeSlicing.chpl)</em>.</p>
<p>In the following example, <code class="docutils literal notranslate"><span class="pre">r</span></code> represents the integers from 1 to 20
inclusive. Ranges <code class="docutils literal notranslate"><span class="pre">r2</span></code> and <code class="docutils literal notranslate"><span class="pre">r3</span></code> are defined using range slices
and represent the indices from 3 to 20 and the odd integers between 1
and 20 respectively. Range <code class="docutils literal notranslate"><span class="pre">r4</span></code> represents the odd integers between
1 and 20 that are also divisible by 3.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="mi">1</span><span class="o">..</span><span class="mi">20</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">r2</span> <span class="o">=</span> <span class="nx">r</span><span class="p">[</span><span class="mi">3</span><span class="o">..</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">r3</span> <span class="o">=</span> <span class="nx">r</span><span class="p">[</span><span class="mi">1</span><span class="o">..</span> <span class="k">by</span> <span class="mi">2</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">r4</span> <span class="o">=</span> <span class="nx">r3</span><span class="p">[</span><span class="mi">0</span><span class="o">..</span> <span class="k">by</span> <span class="mi">3</span><span class="p">];</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="predefined-functions-on-ranges">
<span id="predefined-range-functions"></span><h2>Predefined Functions on Ranges<a class="headerlink" href="#predefined-functions-on-ranges" title="Permalink to this headline">¶</a></h2>
<div class="section" id="range-type-parameters">
<span id="range-type-accessors"></span><h3>Range Type Parameters<a class="headerlink" href="#range-type-parameters" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt>
<code class="descname">proc range.boundedType : BoundedRangeType</code></dt>
<dd><p>Returns the <code class="docutils literal notranslate"><span class="pre">boundedType</span></code> parameter of the range’s type.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.idxType : type</code></dt>
<dd><p>Returns the <code class="docutils literal notranslate"><span class="pre">idxType</span></code> parameter of the range’s type.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.stridable : bool</code></dt>
<dd><p>Returns the <code class="docutils literal notranslate"><span class="pre">stridable</span></code> parameter of the range’s type.</p>
</dd></dl>

</div>
<div class="section" id="range-properties">
<span id="id13"></span><h3>Range Properties<a class="headerlink" href="#range-properties" title="Permalink to this headline">¶</a></h3>
<p>Most of the methods in this subsection report on the range properties
defined in <a class="reference internal" href="#range-concepts"><span class="std std-ref">Range Concepts</span></a>. A range’s represented sequence
can be examined, for example, by iterating over the range in a for loop
<a class="reference internal" href="statements.html#the-for-loop"><span class="std std-ref">The For Loop</span></a>.</p>
<blockquote>
<div><p><em>Open issue</em>.</p>
<p>The behavior of the methods that report properties that may be
undefined, <span class="math notranslate nohighlight">\(\infty\)</span>, or ambiguous, may change.</p>
</div></blockquote>
<dl class="function">
<dt>
<code class="descname">proc range.aligned : bool</code></dt>
<dd><p>Reports whether the range’s alignment is unambiguous.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.alignedHigh : idxType</code></dt>
<dd><p>Returns the range’s aligned high bound. If the aligned high bound is
undefined (does not exist), the behavior is undefined.</p>
</dd></dl>

<p><em>Example (alignedHigh.chpl)</em>.</p>
<blockquote>
<div><p>The following code:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="mi">0</span><span class="o">..</span><span class="mi">20</span> <span class="k">by</span> <span class="mi">3</span><span class="p">;</span>
<span class="nx">writeln</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">alignedHigh</span><span class="p">);</span>
</pre></div>
</div>
<p>produces the output</p>
<div class="highlight-printoutput notranslate"><div class="highlight"><pre><span></span>18
</pre></div>
</div>
</div></blockquote>
<dl class="function">
<dt>
<code class="descname">proc range.alignedLow : idxType</code></dt>
<dd><p>Returns the range’s aligned low bound. If the aligned low bound is
undefined (does not exist), the behavior is undefined.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.alignment : idxType</code></dt>
<dd><p>Returns the range’s alignment. If the alignment is ambiguous, the
behavior is undefined. See also <code class="docutils literal notranslate"><span class="pre">aligned</span></code>.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.first : idxType</code></dt>
<dd><p>Returns the range’s first index. If the range has no first index, the
behavior is undefined. See also <code class="docutils literal notranslate"><span class="pre">hasFirst</span></code>.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.hasFirst(): bool</code></dt>
<dd><p>Reports whether the range has the first index.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.hasHighBound() param: bool</code></dt>
<dd><p>Reports whether the range’s high bound is <em>not</em> +<span class="math notranslate nohighlight">\(\infty\)</span>.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.hasLast(): bool</code></dt>
<dd><p>Reports whether the range has the last index.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.hasLowBound() param: bool</code></dt>
<dd><p>Reports whether the range’s low bound is <em>not</em> -<span class="math notranslate nohighlight">\(\infty\)</span>.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.high : idxType</code></dt>
<dd><p>Returns the range’s high bound. If the high bound is +<span class="math notranslate nohighlight">\(\infty\)</span>,
the behavior is undefined. See also <code class="docutils literal notranslate"><span class="pre">hasHighBound</span></code>.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.isAmbiguous(): bool</code></dt>
<dd><p>Reports whether the range is ambiguously aligned.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.last : idxType</code></dt>
<dd><p>Returns the range’s last index. If the range has no last index, the
behavior is undefined. See also <code class="docutils literal notranslate"><span class="pre">hasLast</span></code>.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.length : idxType</code></dt>
<dd><p>Returns the number of indices in the range’s represented sequence. If
the represented sequence is infinite or is undefined, an error is
generated.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.low : idxType</code></dt>
<dd><p>Returns the range’s low bound. If the low bound is -<span class="math notranslate nohighlight">\(\infty\)</span>, the
behavior is undefined. See also <code class="docutils literal notranslate"><span class="pre">hasLowBound</span></code>.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.size : idxType</code></dt>
<dd><p>Same as <span class="math notranslate nohighlight">\(range\)</span>.length.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.stride : int(numBits(idxType))</code></dt>
<dd><p>Returns the range’s stride. This will never return 0. If the range is
not stridable, this will always return 1.</p>
</dd></dl>

</div>
<div class="section" id="other-queries">
<span id="range-queries"></span><h3>Other Queries<a class="headerlink" href="#other-queries" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt>
<code class="descname">proc range.boundsCheck(r2: range(?)): bool</code></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">false</span></code> if either range is ambiguously aligned. Returns
<code class="docutils literal notranslate"><span class="pre">true</span></code> if range <code class="docutils literal notranslate"><span class="pre">r2</span></code> lies entirely within this range and <code class="docutils literal notranslate"><span class="pre">false</span></code>
otherwise.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc ident(r1: range(?), r2: range(?)): bool</code></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if the two ranges are the same in every respect: i.e.
the two ranges have the same <code class="docutils literal notranslate"><span class="pre">idxType</span></code>, <code class="docutils literal notranslate"><span class="pre">boundedType</span></code>,
<code class="docutils literal notranslate"><span class="pre">stridable</span></code>, <code class="docutils literal notranslate"><span class="pre">low</span></code>, <code class="docutils literal notranslate"><span class="pre">high</span></code>, <code class="docutils literal notranslate"><span class="pre">stride</span></code> and <code class="docutils literal notranslate"><span class="pre">alignment</span></code> values.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.indexOrder(i: idxType): idxType</code></dt>
<dd><p>If <code class="docutils literal notranslate"><span class="pre">i</span></code> is a member of the range’s represented sequence, returns an
integer giving the ordinal index of <code class="docutils literal notranslate"><span class="pre">i</span></code> within the sequence using
0-based indexing. Otherwise, returns <code class="docutils literal notranslate"><span class="pre">(-1):idxType</span></code>. It is an error to
invoke <code class="docutils literal notranslate"><span class="pre">indexOrder</span></code> if the represented sequence is not defined or the
range does not have the first index.</p>
</dd></dl>

<p><em>Example</em>.</p>
<blockquote>
<div><p>The following calls show the order of index 4 in each of the given
ranges:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">0</span><span class="o">..</span><span class="mi">10</span><span class="p">).</span><span class="nx">indexOrder</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span>
<span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">).</span><span class="nx">indexOrder</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>
<span class="p">(</span><span class="mi">3</span><span class="o">..</span><span class="mi">5</span><span class="p">).</span><span class="nx">indexOrder</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
<span class="p">(</span><span class="mi">0</span><span class="o">..</span><span class="mi">10</span> <span class="k">by</span> <span class="mi">2</span><span class="p">).</span><span class="nx">indexOrder</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
<span class="p">(</span><span class="mi">3</span><span class="o">..</span><span class="mi">5</span> <span class="k">by</span> <span class="mi">2</span><span class="p">).</span><span class="nx">indexOrder</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
</div></blockquote>
<dl class="function">
<dt>
<code class="descname">proc range.member(i: idxType): bool</code></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if the range’s represented sequence contains <code class="docutils literal notranslate"><span class="pre">i</span></code>,
<code class="docutils literal notranslate"><span class="pre">false</span></code> otherwise. It is an error to invoke <code class="docutils literal notranslate"><span class="pre">member</span></code> if the
represented sequence is not defined.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.member(other: range): bool</code></dt>
<dd><p>Reports whether <code class="docutils literal notranslate"><span class="pre">other</span></code> is a subrange of the receiver. That is, if the
represented sequences of the receiver and <code class="docutils literal notranslate"><span class="pre">other</span></code> are defined and the
receiver’s sequence contains all members of the <code class="docutils literal notranslate"><span class="pre">other</span></code>’s sequence.</p>
</dd></dl>

</div>
<div class="section" id="range-transformations">
<span id="id14"></span><h3>Range Transformations<a class="headerlink" href="#range-transformations" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt>
<code class="descname">proc range.alignHigh()</code></dt>
<dd><p>Sets the high bound of this range to its aligned high bound, if it is
defined. Generates an error otherwise.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.alignLow()</code></dt>
<dd><p>Sets the low bound of this range to its aligned low bound, if it is
defined. Generates an error otherwise.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.expand(i: idxType)</code></dt>
<dd><p>Returns a new range whose bounds are extended by <span class="math notranslate nohighlight">\(i\)</span> units on each
end. If <span class="math notranslate nohighlight">\(i &lt;
0\)</span> then the resulting range is contracted by its absolute value. In
symbols, given that the operand range is represented by the tuple
<span class="math notranslate nohighlight">\((l,h,s,a)\)</span>, the result is <span class="math notranslate nohighlight">\((l-i,h+i,s,a)\)</span>. The stride and
alignment of the original range are preserved. If the operand range is
ambiguously aligned, then so is the resulting range.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.exterior(i: idxType)</code></dt>
<dd><p>Returns a new range containing the indices just outside the low or high
bound of the range (low if <span class="math notranslate nohighlight">\(i &lt; 0\)</span> and high otherwise). The stride
and alignment of the original range are preserved. Let the operand range
be denoted by the tuple <span class="math notranslate nohighlight">\((l,h,s,a)\)</span>. Then:</p>
<ul class="simple">
<li>if <span class="math notranslate nohighlight">\(i &lt; 0\)</span>, the result is <span class="math notranslate nohighlight">\((l+i,l-1,s,a)\)</span>,</li>
<li>if <span class="math notranslate nohighlight">\(i &gt; 0\)</span>, the result is <span class="math notranslate nohighlight">\((h+1,h+i,s,a)\)</span>, and</li>
<li>if <span class="math notranslate nohighlight">\(i = 0\)</span>, the result is <span class="math notranslate nohighlight">\((l,h,s,a)\)</span>.</li>
</ul>
<p>If the operand range is ambiguously aligned, then so is the resulting
range.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.interior(i: idxType)</code></dt>
<dd><p>Returns a new range containing the indices just inside the low or high
bound of the range (low if <span class="math notranslate nohighlight">\(i &lt; 0\)</span> and high otherwise). The stride
and alignment of the original range are preserved. Let the operand range
be denoted by the tuple <span class="math notranslate nohighlight">\((l,h,s,a)\)</span>. Then:</p>
<ul class="simple">
<li>if <span class="math notranslate nohighlight">\(i &lt; 0\)</span>, the result is <span class="math notranslate nohighlight">\((l,l-(i-1),s,a)\)</span>,</li>
<li>if <span class="math notranslate nohighlight">\(i &gt; 0\)</span>, the result is <span class="math notranslate nohighlight">\((h-(i-1),h,s,a)\)</span>, and</li>
<li>if <span class="math notranslate nohighlight">\(i = 0\)</span>, the result is <span class="math notranslate nohighlight">\((l,h,s,a)\)</span>.</li>
</ul>
<p>This differs from the behavior of the count operator, in that
<code class="docutils literal notranslate"><span class="pre">interior()</span></code> preserves the alignment, and it uses the low and high
bounds rather than <code class="docutils literal notranslate"><span class="pre">first</span></code> and <code class="docutils literal notranslate"><span class="pre">last</span></code> to establish the bounds of the
resulting range. If the operand range is ambiguously aligned, then so is
the resulting range.</p>
</dd></dl>

<span class="target" id="range-offset-method"></span><dl class="function">
<dt>
<code class="descname">proc range.offset(n: idxType)</code></dt>
<dd><p>Returns a new range whose alignment is this range’s first index plus
<code class="docutils literal notranslate"><span class="pre">n</span></code>. The new alignment, therefore, is not ambiguous. If the range has
no first index, a run-time error is generated.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc range.translate(i: integral)</code></dt>
<dd><p>Returns a new range with its <code class="docutils literal notranslate"><span class="pre">low</span></code>, <code class="docutils literal notranslate"><span class="pre">high</span></code> and <code class="docutils literal notranslate"><span class="pre">alignment</span></code> values
adjusted by <span class="math notranslate nohighlight">\(i\)</span>. The <code class="docutils literal notranslate"><span class="pre">stride</span></code> value is preserved. If the range’s
alignment is ambiguous, the behavior is undefined.</p>
</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="domains.html" class="btn btn-neutral float-right" title="Domains" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="unions.html" class="btn btn-neutral float-left" title="Unions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Hewlett Packard Enterprise Development LP

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 



</body>
</html>