

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>BlockDist &mdash; Chapel Documentation 1.23</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="CyclicDist" href="CyclicDist.html" />
    <link rel="prev" title="BlockCycDist" href="BlockCycDist.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

<a href="../../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>1.23
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "1.23";
$pagename = "modules/dists/BlockDist";
include "../..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Tools</a></li>
</ul>
<p class="caption"><span class="caption-text">Writing Chapel Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../builtins/index.html">Built-in Types and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../standard.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../packages.html">Package Modules</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../layoutdist.html">Standard Layouts and Distributions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../layoutdist.html#standard-layouts">Standard Layouts</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../layoutdist.html#standard-distributions">Standard Distributions</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="BlockCycDist.html">BlockCycDist</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">BlockDist</a></li>
<li class="toctree-l3"><a class="reference internal" href="CyclicDist.html">CyclicDist</a></li>
<li class="toctree-l3"><a class="reference internal" href="DimensionalDist2D.html">DimensionalDist2D</a></li>
<li class="toctree-l3"><a class="reference internal" href="HashedDist.html">HashedDist</a></li>
<li class="toctree-l3"><a class="reference internal" href="PrivateDist.html">PrivateDist</a></li>
<li class="toctree-l3"><a class="reference internal" href="ReplicatedDist.html">ReplicatedDist</a></li>
<li class="toctree-l3"><a class="reference internal" href="StencilDist.html">StencilDist</a></li>
<li class="toctree-l3"><a class="reference internal" href="dims/BlockCycDim.html">BlockCycDim</a></li>
<li class="toctree-l3"><a class="reference internal" href="dims/BlockDim.html">BlockDim</a></li>
<li class="toctree-l3"><a class="reference internal" href="dims/ReplicatedDim.html">ReplicatedDim</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../layoutdist.html#index">Index</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chapel Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../layoutdist.html">Standard Layouts and Distributions</a> &raquo;</li>
        
      <li>BlockDist</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/modules/dists/BlockDist.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <span class="target" id="module-BlockDist"></span><div class="section" id="blockdist">
<h1>BlockDist<a class="headerlink" href="#blockdist" title="Permalink to this headline">¶</a></h1>
<p><strong>Usage</strong></p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">BlockDist</span><span class="p">;</span>
</pre></div>
</div>
<dl class="class">
<dt id="BlockDist.Block">
<em class="property">class </em><code class="descname">Block</code><a class="headerlink" href="#BlockDist.Block" title="Permalink to this definition">¶</a></dt>
<dd><p>This Block distribution partitions indices into blocks
according to a <code class="docutils literal notranslate"><span class="pre">boundingBox</span></code> domain
and maps each entire block onto a locale from a <code class="docutils literal notranslate"><span class="pre">targetLocales</span></code> array.</p>
<p>The indices inside the bounding box are partitioned “evenly” across
the target locales. An index outside the bounding box is mapped to the
same locale as the nearest index inside the bounding box.</p>
<p>Formally, an index <code class="docutils literal notranslate"><span class="pre">idx</span></code> is mapped to <code class="docutils literal notranslate"><span class="pre">targetLocales[locIdx]</span></code>,
where <code class="docutils literal notranslate"><span class="pre">locIdx</span></code> is computed as follows.</p>
<p>In the 1-dimensional case, for a Block distribution with:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="46%" />
<col width="54%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">boundingBox</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">{low..high}</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">targetLocales</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">[0..N-1]</span> <span class="pre">locale</span></code></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>we have:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">if <code class="docutils literal notranslate"><span class="pre">idx</span></code> is …</th>
<th class="head"><code class="docutils literal notranslate"><span class="pre">locIdx</span></code> is …</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">low&lt;=idx&lt;=high</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">floor(</span>&#160; <span class="pre">(idx-low)*N</span> <span class="pre">/</span> <span class="pre">(high-low+1)</span>&#160; <span class="pre">)</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">idx</span> <span class="pre">&lt;</span> <span class="pre">low</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">0</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">idx</span> <span class="pre">&gt;</span> <span class="pre">high</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">N-1</span></code></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>In the multidimensional case, <code class="docutils literal notranslate"><span class="pre">idx</span></code> and <code class="docutils literal notranslate"><span class="pre">locIdx</span></code> are tuples
of indices; <code class="docutils literal notranslate"><span class="pre">boundingBox</span></code> and <code class="docutils literal notranslate"><span class="pre">targetLocales</span></code> are multi-dimensional;
the above computation is applied in each dimension.</p>
<p><strong>Example</strong></p>
<p>The following code declares a domain <code class="docutils literal notranslate"><span class="pre">D</span></code> distributed over
a Block distribution with a bounding box equal to the domain <code class="docutils literal notranslate"><span class="pre">Space</span></code>,
and declares an array <code class="docutils literal notranslate"><span class="pre">A</span></code> over that domain.
The <cite>forall</cite> loop sets each array element
to the ID of the locale to which it is mapped.</p>
<blockquote>
<div><div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">BlockDist</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">Space</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="o">..</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="o">..</span><span class="mi">8</span><span class="p">};</span>
<span class="kd">const</span> <span class="nx">D</span><span class="p">:</span> <span class="k">domain</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="k">dmapped</span> <span class="nx">Block</span><span class="p">(</span><span class="nx">boundingBox</span><span class="o">=</span><span class="nx">Space</span><span class="p">)</span> <span class="o">=</span> <span class="nx">Space</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">A</span><span class="p">:</span> <span class="p">[</span><span class="nx">D</span><span class="p">]</span> <span class="kt">int</span><span class="p">;</span>

<span class="k">forall</span> <span class="nx">a</span> <span class="kd">in</span> <span class="nx">A</span> <span class="k">do</span>
  <span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">locale</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>

<span class="nx">writeln</span><span class="p">(</span><span class="nx">A</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>When run on 6 locales, the output is:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
<span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
<span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
<span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">3</span>
<span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">3</span>
<span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">3</span>
<span class="mi">4</span> <span class="mi">4</span> <span class="mi">4</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">5</span> <span class="mi">5</span> <span class="mi">5</span>
<span class="mi">4</span> <span class="mi">4</span> <span class="mi">4</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">5</span> <span class="mi">5</span> <span class="mi">5</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Initializer Arguments</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">Block</span></code> class initializer is defined as follows:</p>
<blockquote>
<div><div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">proc</span> <span class="nf">Block.init</span><span class="p">(</span>
  <span class="nx">boundingBox</span><span class="p">:</span> <span class="k">domain</span><span class="p">,</span>
  <span class="nx">targetLocales</span><span class="p">:</span> <span class="p">[]</span> <span class="nx">locale</span>  <span class="o">=</span> <span class="nx">Locales</span><span class="p">,</span>
  <span class="nx">dataParTasksPerLocale</span>     <span class="o">=</span> <span class="c1">// value of  dataParTasksPerLocale      config const,</span>
  <span class="nx">dataParIgnoreRunningTasks</span> <span class="o">=</span> <span class="c1">// value of  dataParIgnoreRunningTasks  config const,</span>
  <span class="nx">dataParMinGranularity</span>     <span class="o">=</span> <span class="c1">// value of  dataParMinGranularity      config const,</span>
  <span class="kd">param</span> <span class="nx">rank</span>                <span class="o">=</span> <span class="nx">boundingBox</span><span class="p">.</span><span class="nx">rank</span><span class="p">,</span>
  <span class="kd">type</span>  <span class="nx">idxType</span>             <span class="o">=</span> <span class="nx">boundingBox</span><span class="p">.</span><span class="nx">idxType</span><span class="p">,</span>
  <span class="kd">type</span>  <span class="nx">sparseLayoutType</span>    <span class="o">=</span> <span class="nx">DefaultDist</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>The arguments <code class="docutils literal notranslate"><span class="pre">boundingBox</span></code> (a domain) and <code class="docutils literal notranslate"><span class="pre">targetLocales</span></code> (an array)
define the mapping of any index of <code class="docutils literal notranslate"><span class="pre">idxType</span></code> type to a locale
as described above.</p>
<p>The rank of <code class="docutils literal notranslate"><span class="pre">targetLocales</span></code> must match the rank of the distribution,
or be <code class="docutils literal notranslate"><span class="pre">1</span></code>.  If the rank of <code class="docutils literal notranslate"><span class="pre">targetLocales</span></code> is <code class="docutils literal notranslate"><span class="pre">1</span></code>, a greedy
heuristic is used to reshape the array of target locales so that it
matches the rank of the distribution and each dimension contains an
approximately equal number of indices.</p>
<p>The arguments <code class="docutils literal notranslate"><span class="pre">dataParTasksPerLocale</span></code>, <code class="docutils literal notranslate"><span class="pre">dataParIgnoreRunningTasks</span></code>,
and <code class="docutils literal notranslate"><span class="pre">dataParMinGranularity</span></code> set the knobs that are used to
control intra-locale data parallelism for Block-distributed domains
and arrays in the same way that the like-named config constants
control data parallelism for ranges and default-distributed domains
and arrays.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">rank</span></code> and <code class="docutils literal notranslate"><span class="pre">idxType</span></code> arguments are inferred from the <code class="docutils literal notranslate"><span class="pre">boundingBox</span></code>
argument unless explicitly set.  They must match the rank and index type of the
domains “dmapped” using that Block instance. If the <code class="docutils literal notranslate"><span class="pre">boundingBox</span></code> argument is
a stridable domain, the stride information will be ignored and the
<code class="docutils literal notranslate"><span class="pre">boundingBox</span></code> will only use the lo..hi bounds.</p>
<p>When a <code class="docutils literal notranslate"><span class="pre">sparse</span> <span class="pre">subdomain</span></code> is created for a <code class="docutils literal notranslate"><span class="pre">Block</span></code> distributed domain, the
<code class="docutils literal notranslate"><span class="pre">sparseLayoutType</span></code> will be the layout of these sparse domains. The default is
currently coordinate, but <a class="reference internal" href="../layouts/LayoutCS.html#LayoutCS.CS" title="LayoutCS.CS"><code class="xref chpl chpl-class docutils literal notranslate"><span class="pre">LayoutCS.CS</span></code></a> is an interesting alternative.</p>
<p><strong>Convenience Initializer Functions</strong></p>
<p>It is common for a <code class="docutils literal notranslate"><span class="pre">Block</span></code> distribution to distribute its <code class="docutils literal notranslate"><span class="pre">boundingBox</span></code>
across all locales. In this case, a convenience function can be used to
declare variables of block-distributed domain or array type.  These functions
take a domain or list of ranges as arguments and return a block-distributed
domain or array.</p>
<blockquote>
<div><div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">BlockDist</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">BlockDom1</span> <span class="o">=</span> <span class="nx">newBlockDom</span><span class="p">({</span><span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">});</span>
<span class="kd">var</span> <span class="nx">BlockArr1</span> <span class="o">=</span> <span class="nx">newBlockArr</span><span class="p">({</span><span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">},</span> <span class="kt">real</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">BlockDom2</span> <span class="o">=</span> <span class="nx">newBlockDom</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">BlockArr2</span> <span class="o">=</span> <span class="nx">newBlockArr</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">,</span> <span class="kt">real</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Data-Parallel Iteration</strong></p>
<p>A <cite>forall</cite> loop over a Block-distributed domain or array
executes each iteration on the locale where that iteration’s index
is mapped to.</p>
<p>Parallelism within each locale is guided by the values of
<code class="docutils literal notranslate"><span class="pre">dataParTasksPerLocale</span></code>, <code class="docutils literal notranslate"><span class="pre">dataParIgnoreRunningTasks</span></code>, and
<code class="docutils literal notranslate"><span class="pre">dataParMinGranularity</span></code> of the respective Block instance.
Updates to these values, if any, take effect only on the locale
where the updates are made.</p>
<p><strong>Sparse Subdomains</strong></p>
<p>When a <code class="docutils literal notranslate"><span class="pre">sparse</span> <span class="pre">subdomain</span></code> is declared as a subdomain to a Block-distributed
domain, the resulting sparse domain will also be Block-distributed. The
sparse layout used in this sparse subdomain can be controlled with the
<code class="docutils literal notranslate"><span class="pre">sparseLayoutType</span></code> initializer argument to Block.</p>
<p>This example demonstrates a Block-distributed sparse domain and array:</p>
<blockquote>
<div><div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span> <span class="k">use</span> <span class="nx">BlockDist</span><span class="p">;</span>

 <span class="kd">const</span> <span class="nx">Space</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="o">..</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="o">..</span><span class="mi">8</span><span class="p">};</span>

 <span class="c1">// Declare a dense, Block-distributed domain.</span>
 <span class="kd">const</span> <span class="nx">DenseDom</span><span class="p">:</span> <span class="k">domain</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="k">dmapped</span> <span class="nx">Block</span><span class="p">(</span><span class="nx">boundingBox</span><span class="o">=</span><span class="nx">Space</span><span class="p">)</span> <span class="o">=</span> <span class="nx">Space</span><span class="p">;</span>

 <span class="c1">// Declare a sparse subdomain.</span>
 <span class="c1">// Since DenseDom is Block-distributed, SparseDom will be as well.</span>
 <span class="kd">var</span> <span class="nx">SparseDom</span><span class="p">:</span> <span class="k">sparse</span> <span class="k">subdomain</span><span class="p">(</span><span class="nx">DenseDom</span><span class="p">);</span>

 <span class="c1">// Add some elements to the sparse subdomain.</span>
 <span class="c1">// SparseDom.bulkAdd is another way to do this that allows more control.</span>
 <span class="nx">SparseDom</span> <span class="o">+=</span> <span class="p">[</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span> <span class="p">];</span>

 <span class="c1">// Declare a sparse array.</span>
 <span class="c1">// This array is also Block-distributed.</span>
 <span class="kd">var</span> <span class="nx">A</span><span class="p">:</span> <span class="p">[</span><span class="nx">SparseDom</span><span class="p">]</span> <span class="kt">int</span><span class="p">;</span>

 <span class="nx">A</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

 <span class="nx">writeln</span><span class="p">(</span> <span class="s">&quot;A[(1, 1)] = &quot;</span><span class="p">,</span> <span class="nx">A</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]);</span>
 <span class="k">for</span> <span class="p">(</span><span class="nx">ij</span><span class="p">,</span><span class="nx">x</span><span class="p">)</span> <span class="kd">in</span> <span class="k">zip</span><span class="p">(</span><span class="nx">SparseDom</span><span class="p">,</span> <span class="nx">A</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">writeln</span><span class="p">(</span> <span class="s">&quot;A[&quot;</span><span class="p">,</span> <span class="nx">ij</span><span class="p">,</span> <span class="s">&quot;] = &quot;</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="s">&quot; on locale &quot;</span><span class="p">,</span> <span class="nx">x</span><span class="p">.</span><span class="nx">locale</span><span class="p">);</span>
 <span class="p">}</span>

<span class="c1">// Results in this output when run on 4 locales:</span>
<span class="c1">// A[(1, 1)] = 0</span>
<span class="c1">// A[(1, 2)] = 1 on locale LOCALE0</span>
<span class="c1">// A[(3, 6)] = 1 on locale LOCALE1</span>
<span class="c1">// A[(5, 4)] = 1 on locale LOCALE2</span>
<span class="c1">// A[(7, 8)] = 1 on locale LOCALE3</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="CyclicDist.html" class="btn btn-neutral float-right" title="CyclicDist" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="BlockCycDist.html" class="btn btn-neutral float-left" title="BlockCycDist" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Hewlett Packard Enterprise Development LP

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 



</body>
</html>