

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>HDF5 &mdash; Chapel Documentation 1.23</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="C_HDF5" href="HDF5/C_HDF5.html" />
    <link rel="prev" title="Futures" href="Futures.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

<a href="../../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>1.23
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "1.23";
$pagename = "modules/packages/HDF5";
include "../..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Tools</a></li>
</ul>
<p class="caption"><span class="caption-text">Writing Chapel Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../builtins/index.html">Built-in Types and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../standard.html">Standard Modules</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../packages.html">Package Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="AllLocalesBarriers.html">AllLocalesBarriers</a></li>
<li class="toctree-l2"><a class="reference internal" href="AtomicObjects.html">AtomicObjects</a></li>
<li class="toctree-l2"><a class="reference internal" href="BLAS.html">BLAS</a></li>
<li class="toctree-l2"><a class="reference internal" href="Buffers.html">Buffers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Collection.html">Collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="Crypto.html">Crypto</a></li>
<li class="toctree-l2"><a class="reference internal" href="Curl.html">Curl</a></li>
<li class="toctree-l2"><a class="reference internal" href="DistributedBag.html">DistributedBag</a></li>
<li class="toctree-l2"><a class="reference internal" href="DistributedDeque.html">DistributedDeque</a></li>
<li class="toctree-l2"><a class="reference internal" href="DistributedIters.html">DistributedIters</a></li>
<li class="toctree-l2"><a class="reference internal" href="EpochManager.html">EpochManager</a></li>
<li class="toctree-l2"><a class="reference internal" href="FFTW.html">FFTW</a></li>
<li class="toctree-l2"><a class="reference internal" href="FunctionalOperations.html">FunctionalOperations</a></li>
<li class="toctree-l2"><a class="reference internal" href="Futures.html">Futures</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">HDF5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="HDF5/C_HDF5.html">C_HDF5</a></li>
<li class="toctree-l3"><a class="reference internal" href="HDF5/IOusingMPI.html">IOusingMPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compiling-with-hdf5">Compiling with HDF5</a></li>
<li class="toctree-l3"><a class="reference internal" href="#chapel-hdf5-api">Chapel HDF5 API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="HDFS.html">HDFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="LAPACK.html">LAPACK</a></li>
<li class="toctree-l2"><a class="reference internal" href="LinearAlgebra.html">LinearAlgebra</a></li>
<li class="toctree-l2"><a class="reference internal" href="LockFreeQueue.html">LockFreeQueue</a></li>
<li class="toctree-l2"><a class="reference internal" href="LockFreeStack.html">LockFreeStack</a></li>
<li class="toctree-l2"><a class="reference internal" href="MPI.html">MPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="NetCDF.html">NetCDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="Norm.html">Norm</a></li>
<li class="toctree-l2"><a class="reference internal" href="OrderedSet.html">OrderedSet</a></li>
<li class="toctree-l2"><a class="reference internal" href="PeekPoke.html">PeekPoke</a></li>
<li class="toctree-l2"><a class="reference internal" href="RangeChunk.html">RangeChunk</a></li>
<li class="toctree-l2"><a class="reference internal" href="RecordParser.html">RecordParser</a></li>
<li class="toctree-l2"><a class="reference internal" href="ReplicatedVar.html">ReplicatedVar</a></li>
<li class="toctree-l2"><a class="reference internal" href="Search.html">Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="Sort.html">Sort</a></li>
<li class="toctree-l2"><a class="reference internal" href="TOML.html">TOML</a></li>
<li class="toctree-l2"><a class="reference internal" href="URL.html">URL</a></li>
<li class="toctree-l2"><a class="reference internal" href="UnitTest.html">UnitTest</a></li>
<li class="toctree-l2"><a class="reference internal" href="UnorderedAtomics.html">UnorderedAtomics</a></li>
<li class="toctree-l2"><a class="reference internal" href="UnorderedCopy.html">UnorderedCopy</a></li>
<li class="toctree-l2"><a class="reference internal" href="VisualDebug.html">VisualDebug</a></li>
<li class="toctree-l2"><a class="reference internal" href="ZMQ.html">ZMQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages.html#index">Index</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chapel Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../packages.html">Package Modules</a> &raquo;</li>
        
      <li>HDF5</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/modules/packages/HDF5.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <span class="target" id="module-HDF5"></span><div class="section" id="hdf5">
<h1>HDF5<a class="headerlink" href="#hdf5" title="Permalink to this headline">¶</a></h1>
<p><strong>Usage</strong></p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">HDF5</span><span class="p">;</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">import</span> <span class="nx">HDF5</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>Submodules</strong></p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="HDF5/C_HDF5.html">C_HDF5</a></li>
<li class="toctree-l1"><a class="reference internal" href="HDF5/IOusingMPI.html">IOusingMPI</a></li>
</ul>
</div>
<p>HDF5 bindings for Chapel</p>
<p>This module implements the C-API for HDF5 version 1.10.1, as well as some
functionality for reading and writing HDF5 files built on top of the C-API.</p>
<div class="section" id="compiling-with-hdf5">
<h2>Compiling with HDF5<a class="headerlink" href="#compiling-with-hdf5" title="Permalink to this headline">¶</a></h2>
<p>In order to compile a Chapel program that uses this module, the HDF5 library
must be installed on the system.  The paths to the <code class="docutils literal notranslate"><span class="pre">hdf5_hl.h</span></code> header
file and HDF5 library must be known to the compiler, either by finding
them in a default search path, or by using the <code class="docutils literal notranslate"><span class="pre">-I</span></code> and <code class="docutils literal notranslate"><span class="pre">-L</span></code> compiler
arguments.</p>
<p>The compilation command should look something like this:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>chpl -I<span class="nv">$PATH_TO_HDF5_DIR</span> <span class="se">\</span>
     -L<span class="nv">$PATH_TO_HDF5_LIBS</span> -lhdf5 source.chpl
</pre></div>
</div>
<p>On Cray systems with the <code class="docutils literal notranslate"><span class="pre">cray-hdf5</span></code> module loaded, no compiler flags
are necessary to use the HDF5 module.</p>
<p>This module currently requires using a version of the Chapel compiler that
is linked with LLVM.  See <a class="reference internal" href="../../technotes/llvm.html#readme-llvm"><span class="std std-ref">LLVM Support</span></a>.</p>
</div>
<div class="section" id="chapel-hdf5-api">
<h2>Chapel HDF5 API<a class="headerlink" href="#chapel-hdf5-api" title="Permalink to this headline">¶</a></h2>
<p>This module provides some higher-level functions using the HDF5 API. It
provides for parallel reads and writes to HDF5 files using multiple
Chapel locales.</p>
<p>The native HDF5 functions can be called directly by calling into the
<a class="reference internal" href="HDF5/C_HDF5.html#module-C_HDF5" title="C_HDF5: The C_HDF5 module defines the interface to the HDF5 library."><code class="xref chpl chpl-mod docutils literal notranslate"><span class="pre">C_HDF5</span></code></a> submodule.</p>
<dl class="function">
<dt id="HDF5.readAllHDF5Files">
<em class="property">proc </em><code class="descname">readAllHDF5Files</code><span class="sig-paren">(</span><em>locs: [] locale</em>, <em>dirName: string</em>, <em>dsetName: string</em>, <em>filenameStart: string</em>, <em>type eltType</em>, <em>param rank</em>, <em>preprocessor: borrowed nilable HDF5Preprocessor =</em><span class="sig-paren">)</span><a class="headerlink" href="#HDF5.readAllHDF5Files" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the dataset named <cite>dsetName</cite> from all HDF5 files in the
directory <cite>dirName</cite> with filenames that begin with <cite>filenameStart</cite>.
This will read the files in parallel with one task per locale in the
<cite>locs</cite> array.  Specifying the same locale multiple times in the <cite>locs</cite>
array will cause undefined behavior.</p>
<p>Returns a distributed array of <a class="reference internal" href="#HDF5.ArrayWrapper" title="HDF5.ArrayWrapper"><code class="xref chpl chpl-record docutils literal notranslate"><span class="pre">ArrayWrapper</span></code></a> records
containing the arrays that are read. Each instance will reside on
the locale where the corresponding data was read.</p>
</dd></dl>

<dl class="function">
<dt id="HDF5.readAllNamedHDF5Files">
<em class="property">proc </em><code class="descname">readAllNamedHDF5Files</code><span class="sig-paren">(</span><em>locs: [] locale</em>, <em>filenames: [] string</em>, <em>dsetName: string</em>, <em>type eltType</em>, <em>param rank</em>, <em>preprocessor: borrowed nilable HDF5Preprocessor =</em><span class="sig-paren">)</span><a class="headerlink" href="#HDF5.readAllNamedHDF5Files" title="Permalink to this definition">¶</a></dt>
<dd><p>Read all HDF5 files named in the filenames array into arrays</p>
</dd></dl>

<dl class="function">
<dt id="HDF5.readNamedHDF5FilesInto1DArrayInt">
<em class="property">proc </em><code class="descname">readNamedHDF5FilesInto1DArrayInt</code><span class="sig-paren">(</span><em>filenames: [] string</em>, <em>fnCols: int</em>, <em>fnRows: int</em>, <em>dsetName: string</em>, <em>preprocessor: borrowed nilable HDF5Preprocessor =</em><span class="sig-paren">)</span><a class="headerlink" href="#HDF5.readNamedHDF5FilesInto1DArrayInt" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the datasets named <cite>dsetName</cite> from the files named in
<cite>filenames</cite> into a 1D array.  This function assumes the data
elements are all int(64)s.
<cite>fnCols</cite> and <cite>fnRows</cite> refer to the columns and rows that <cite>filenames</cite>
should have when converting it back to 2-D.</p>
</dd></dl>

<dl class="function">
<dt id="HDF5.readHDF5Dataset">
<em class="property">proc </em><code class="descname">readHDF5Dataset</code><span class="sig-paren">(</span><em>file_id</em>, <em>dsetName: string</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#HDF5.readHDF5Dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the dataset named <cite>dsetName</cite> from the open file that <cite>file_id</cite>
refers to.  Store the dataset into the array <cite>data</cite>.
Can read data of type int/uint (size 8, 16, 32, 64), real (size 32, 64),
and c_string.</p>
</dd></dl>

<dl class="function">
<dt id="HDF5.getHDF5Type">
<em class="property">proc </em><code class="descname">getHDF5Type</code><span class="sig-paren">(</span><em>type eltType</em><span class="sig-paren">)</span><a class="headerlink" href="#HDF5.getHDF5Type" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the HDF5 type equivalent to the Chapel type <cite>eltType</cite></p>
</dd></dl>

<dl class="enum">
<dt id="HDF5.Hdf5OpenMode">
<em class="property">enum </em><code class="descname">Hdf5OpenMode</code> { Truncate, Append }<a class="headerlink" href="#HDF5.Hdf5OpenMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Enum indicating the way to open a file for writing.  <cite>Truncate</cite> will
clear the contents of an existing file.  <cite>Append</cite> will add to a file
that already exists.  Both will open a new empty file.</p>
</dd></dl>

<dl class="function">
<dt id="HDF5.writeArraysToHDF5Files">
<em class="property">proc </em><code class="descname">writeArraysToHDF5Files</code><span class="sig-paren">(</span><em>dirName: string</em>, <em>dsetNames: [] string</em>, <em>filenames: [] string</em>, <em>type eltType</em>, <em>param rank: int</em>, <em>data: [] eltTypeArrayWrapperrank</em>, <em>mode: Hdf5OpenMode</em><span class="sig-paren">)</span> throws<a class="headerlink" href="#HDF5.writeArraysToHDF5Files" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the arrays from the <a class="reference internal" href="#HDF5.ArrayWrapper" title="HDF5.ArrayWrapper"><code class="xref chpl chpl-record docutils literal notranslate"><span class="pre">ArrayWrapper</span></code></a> records stored in
the <cite>data</cite> argument to the corresponding filename in the
<cite>filenames</cite> array. The dataset name is taken from the corresponding
position in the <cite>dsetNames</cite> array.</p>
<p>The <cite>data</cite> argument should be a Block distributed array with
<cite>dataParTasksPerLocale==1</cite>.</p>
<p>Either truncate or append to the file depending on the <cite>mode</cite> argument.</p>
<p>It would be preferable to find the <cite>eltType</cite> and <cite>rank</cite> values
directly from the <cite>data</cite> argument instead of needing explicit
arguments for them, but it isn’t obvious how to do that currently.
If the generic fields in the <cite>ArrayWrapper</cite> could be queried that
would be a nice replacement for these arguments.  e.g.
<cite>data: [] ArrayWrapper(?eltType, ?rank)</cite>.</p>
</dd></dl>

<dl class="iterfunction">
<dt id="HDF5.hdf5ReadChunks">
<em class="property">iter </em><code class="descname">hdf5ReadChunks</code><span class="sig-paren">(</span><em>filename: string</em>, <em>dset: string</em>, <em>chunkShape: domain</em>, <em>type eltType</em>, <em>preprocessor: borrowed nilable HDF5Preprocessor =</em><span class="sig-paren">)</span><a class="headerlink" href="#HDF5.hdf5ReadChunks" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the dataset named <cite>dset</cite> from the HDF5 file named <cite>filename</cite>.
The dataset consists of elements of type <cite>eltType</cite>.  The file will
be read in chunks matching the <cite>chunkShape</cite> domain, and yielded as
arrays of that size until the end of the dataset is reached.</p>
<p>This allows operating on a very large dataset in smaller sections,
for example when it is too big to fit into the system memory, or
to allow each section to fit within cache.</p>
<p>Currently, the <cite>chunkShape</cite> domain describing the yielded array shape
and the shape of the data in the file must both have the same rank.
For example, if the data in the file is 2D, <cite>chunkShape</cite> must be
two-dimensional as well.  It is expected that this restriction can
be relaxed in the future.</p>
</dd></dl>

<dl class="class">
<dt id="HDF5.HDF5Preprocessor">
<em class="property">class </em><code class="descname">HDF5Preprocessor</code><a class="headerlink" href="#HDF5.HDF5Preprocessor" title="Permalink to this definition">¶</a></dt>
<dd><p>A class to preprocess arrays returned by HDF5 file reading procedures.
Procedures in this module that take an <cite>HDF5Preprocessor</cite> argument can
accept a subclass of this class with the <cite>preprocess</cite> method overridden
to do preprocessing as desired before returning the data read.</p>
<dl class="method">
<dt id="HDF5.HDF5Preprocessor.preprocess">
<em class="property">proc </em><code class="descname">preprocess</code><span class="sig-paren">(</span><em>A: []</em><span class="sig-paren">)</span><a class="headerlink" href="#HDF5.HDF5Preprocessor.preprocess" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="record">
<dt id="HDF5.ArrayWrapper">
<em class="property">record </em><code class="descname">ArrayWrapper</code><a class="headerlink" href="#HDF5.ArrayWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>A record that stores a rectangular array.  An array of <cite>ArrayWrapper</cite>
records can store multiple differently sized arrays.</p>
<dl class="attribute">
<dt id="HDF5.ArrayWrapper.eltType">
<em class="property">type </em><code class="descname">eltType</code><a class="headerlink" href="#HDF5.ArrayWrapper.eltType" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="HDF5.ArrayWrapper.rank">
<em class="property">param </em><code class="descname">rank</code>: int<a class="headerlink" href="#HDF5.ArrayWrapper.rank" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="HDF5.ArrayWrapper.D">
<em class="property">var </em><code class="descname">D</code>: domain(rank)<a class="headerlink" href="#HDF5.ArrayWrapper.D" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="HDF5.ArrayWrapper.A">
<em class="property">var </em><code class="descname">A</code>: [D] eltType<a class="headerlink" href="#HDF5.ArrayWrapper.A" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="HDF5/C_HDF5.html" class="btn btn-neutral float-right" title="C_HDF5" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Futures.html" class="btn btn-neutral float-left" title="Futures" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Hewlett Packard Enterprise Development LP

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 



</body>
</html>