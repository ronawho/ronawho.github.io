

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Memory &mdash; Chapel Documentation 1.23</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Path" href="Path.html" />
    <link rel="prev" title="Math" href="Math.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

<a href="../../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>1.23
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "1.23";
$pagename = "modules/standard/Memory";
include "../..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Tools</a></li>
</ul>
<p class="caption"><span class="caption-text">Writing Chapel Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../builtins/index.html">Built-in Types and Functions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../standard.html">Standard Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Assert.html">Assert</a></li>
<li class="toctree-l2"><a class="reference internal" href="Barriers.html">Barriers</a></li>
<li class="toctree-l2"><a class="reference internal" href="BigInteger.html">BigInteger</a></li>
<li class="toctree-l2"><a class="reference internal" href="BitOps.html">BitOps</a></li>
<li class="toctree-l2"><a class="reference internal" href="Builtins.html">Builtins</a></li>
<li class="toctree-l2"><a class="reference internal" href="CommDiagnostics.html">CommDiagnostics</a></li>
<li class="toctree-l2"><a class="reference internal" href="DateTime.html">DateTime</a></li>
<li class="toctree-l2"><a class="reference internal" href="DynamicIters.html">DynamicIters</a></li>
<li class="toctree-l2"><a class="reference internal" href="FileSystem.html">FileSystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="GMP.html">GMP</a></li>
<li class="toctree-l2"><a class="reference internal" href="Heap.html">Heap</a></li>
<li class="toctree-l2"><a class="reference internal" href="Help.html">Help</a></li>
<li class="toctree-l2"><a class="reference internal" href="IO.html">IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="LinkedLists.html">LinkedLists</a></li>
<li class="toctree-l2"><a class="reference internal" href="List.html">List</a></li>
<li class="toctree-l2"><a class="reference internal" href="Map.html">Map</a></li>
<li class="toctree-l2"><a class="reference internal" href="Math.html">Math</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Memory</a></li>
<li class="toctree-l2"><a class="reference internal" href="Path.html">Path</a></li>
<li class="toctree-l2"><a class="reference internal" href="Random.html">Random</a></li>
<li class="toctree-l2"><a class="reference internal" href="Reflection.html">Reflection</a></li>
<li class="toctree-l2"><a class="reference internal" href="Regexp.html">Regexp</a></li>
<li class="toctree-l2"><a class="reference internal" href="Set.html">Set</a></li>
<li class="toctree-l2"><a class="reference internal" href="Spawn.html">Spawn</a></li>
<li class="toctree-l2"><a class="reference internal" href="Sys.html">Sys</a></li>
<li class="toctree-l2"><a class="reference internal" href="SysBasic.html">SysBasic</a></li>
<li class="toctree-l2"><a class="reference internal" href="SysCTypes.html">SysCTypes</a></li>
<li class="toctree-l2"><a class="reference internal" href="SysError.html">SysError</a></li>
<li class="toctree-l2"><a class="reference internal" href="Time.html">Time</a></li>
<li class="toctree-l2"><a class="reference internal" href="Types.html">Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="Version.html">Version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#index">Index</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chapel Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../standard.html">Standard Modules</a> &raquo;</li>
        
      <li>Memory</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/modules/standard/Memory.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <span class="target" id="module-Memory"></span><div class="section" id="memory">
<h1>Memory<a class="headerlink" href="#memory" title="Permalink to this headline">¶</a></h1>
<p><strong>Usage</strong></p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Memory</span><span class="p">;</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">import</span> <span class="nx">Memory</span><span class="p">;</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#module-Memory" title="Memory: The :mod:`Memory` module provides procedures which report information"><code class="xref chpl chpl-mod docutils literal notranslate"><span class="pre">Memory</span></code></a> module provides procedures which report information
about memory usage.  With one exception, to use these procedures you
must enable memory tracking.  Do this by setting one or more of the
config vars below, using appropriate <code class="docutils literal notranslate"><span class="pre">--configVarName=value</span></code> or
<code class="docutils literal notranslate"><span class="pre">-sconfigVarName=value</span></code> command line options when you run the
program.  If memory tracking is not enabled, calling any procedure
described here, other than <a class="reference internal" href="#Memory.locale.physicalMemory" title="Memory.locale.physicalMemory"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">locale.physicalMemory</span></code></a>, will cause
the program to halt with an error message.</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">memTrack</span></code>: <cite>bool</cite>:</dt>
<dd>Enable memory tracking.  This causes memory allocations and
deallocations to be internally tracked, to support logging them on
the fly and/or producing any of several kinds of memory-related
reports, described below.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">memLeaks</span></code>: <cite>bool</cite>:</dt>
<dd>Enable memory tracking and produce detailed information about
leaked memory by invoking <a class="reference internal" href="#Memory.printMemAllocs" title="Memory.printMemAllocs"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">printMemAllocs</span></code></a> implicitly when
the program terminates normally. If there are no leaks, nothing is
printed.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">memLeaksByType</span></code>: <cite>bool</cite>:</dt>
<dd>Enable memory tracking and produce summary information about
leaked memory by invoking <a class="reference internal" href="#Memory.printMemAllocsByType" title="Memory.printMemAllocsByType"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">printMemAllocsByType</span></code></a> implicitly
when the program terminates normally. If there are no leaks,
nothing is printed.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">memLeaksLog</span></code>: <cite>string</cite>:</dt>
<dd>Enable memory tracking and append a report to the named file when
the program terminates normally.
The report contains the compilation command used to build the
program, the execution command used to run it, the summary
allocation statistics produced by <a class="reference internal" href="#Memory.printMemAllocStats" title="Memory.printMemAllocStats"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">printMemAllocStats</span></code></a>, and the
summary information about leaked memory produced by
<a class="reference internal" href="#Memory.printMemAllocsByType" title="Memory.printMemAllocsByType"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">printMemAllocsByType</span></code></a>.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">memStats</span></code>: <cite>bool</cite>:</dt>
<dd>Enable memory tracking and produce summary memory statistics by
invoking <a class="reference internal" href="#Memory.printMemAllocStats" title="Memory.printMemAllocStats"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">printMemAllocStats</span></code></a> implicitly at normal program
termination.  Note that for a multi-locale run, each top-level
locale reports its own memory statistics and these reports may
appear in any order in the program output (and possibly even
interleaved, though we have gone to some effort to avoid that).
These statistics can be put in order by sorting the output lines
that begin with the string <code class="docutils literal notranslate"><span class="pre">memStats:</span></code>.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">memMax</span></code>: <cite>uint</cite>:</dt>
<dd>If the value is greater than 0 (zero), enable memory tracking
and use the value as a limit on the number of bytes of memory
that can be allocated per top-level (network-connected) locale.
If during execution the amount of allocated memory exceeds this
limit on any locale, halt the program with a message saying so.</dd>
</dl>
<p>The following two config variables do not enable memory tracking;
they only modify how it is done.</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">memThreshold</span></code>: <cite>uint</cite>:</dt>
<dd>If this is set to a value greater than 0 (zero), only allocation
requests larger than this are tracked and/or reported.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">memLog</span></code>: <cite>string</cite>:</dt>
<dd>Memory reporting is written to this file.  By default it is the
<code class="docutils literal notranslate"><span class="pre">stdout</span></code> associated with the process (not the Chapel channel
with the same name).  Setting this config variable to a file path
causes the reporting to be written to that named file instead.
In multilocale executions each top-level locale produces output
to its own file, with a dot (‘.’) and the locale ID appended to
this path.</dd>
</dl>
<dl class="enum">
<dt id="Memory.MemUnits">
<em class="property">enum </em><code class="descname">MemUnits</code> { Bytes, KB, MB, GB }<a class="headerlink" href="#Memory.MemUnits" title="Permalink to this definition">¶</a></dt>
<dd><p>The amount of memory returned by <a class="reference internal" href="#Memory.locale.physicalMemory" title="Memory.locale.physicalMemory"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">locale.physicalMemory</span></code></a> can
be expressed either as individual bytes or as chunks of 2**10,
2**20, or 2**30 bytes.</p>
</dd></dl>

<dl class="method">
<dt id="Memory.locale.physicalMemory">
<em class="property">proc </em><code class="descclassname">locale.</code><code class="descname">physicalMemory</code><span class="sig-paren">(</span><em>unit: MemUnits = MemUnits.Bytes</em>, <em>type retType = int(64)</em><span class="sig-paren">)</span><a class="headerlink" href="#Memory.locale.physicalMemory" title="Permalink to this definition">¶</a></dt>
<dd><p>How much physical memory is present on this locale?</p>
<p>Note that this is a physical quantity and does not take into account
things like virtual memory support which might allow for allocating
a larger amount, or system or user limits which might prevent
allocating so much.</p>
<p><em>Note:</em> Unlike the other procedures in the <a class="reference internal" href="#module-Memory" title="Memory: The :mod:`Memory` module provides procedures which report information"><code class="xref chpl chpl-mod docutils literal notranslate"><span class="pre">Memory</span></code></a> module, this
one does not require memory tracking to be enabled.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>unit</strong> : <a class="reference internal" href="#Memory.MemUnits" title="Memory.MemUnits"><code class="xref chpl chpl-type docutils literal notranslate"><span class="pre">MemUnits</span></code></a> – Units in which the returned value is to be expressed.</li>
<li><strong>retType</strong> : <cite>type</cite> – Type of the returned value.  Defaults to <cite>int(64)</cite>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Size of physical memory on the locale where the call is made.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><cite>retType</cite></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="Memory.memoryUsed">
<em class="property">proc </em><code class="descname">memoryUsed</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Memory.memoryUsed" title="Permalink to this definition">¶</a></dt>
<dd><p>How much memory is this program currently using on this locale?</p>
<p>This is the amount of memory known to be currently allocated on the
calling top-level (network-connected) locale by the program, through
Chapel mechanisms.  It does not include memory allocated directly
from the system, outside of Chapel mechanisms, such as allocations
made by code written in other languages and linked into the program.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Amount of allocated memory, in bytes.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><cite>uint(64)</cite></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="Memory.printMemAllocs">
<em class="property">proc </em><code class="descname">printMemAllocs</code><span class="sig-paren">(</span><em>thresh = 0</em><span class="sig-paren">)</span><a class="headerlink" href="#Memory.printMemAllocs" title="Permalink to this definition">¶</a></dt>
<dd><p>Print detailed information about allocated memory to <code class="docutils literal notranslate"><span class="pre">memLog</span></code>.
The report contains a section for each top-level locale, containing
a table of entries for the allocations made on that locale.  Each
entry shows the source file and line at which the allocation was
requested, the address and size (bytes) of the allocated space, and
a description of the type of information the requesting code said it
was going to store there.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><strong>thresh</strong> : <cite>int</cite> – Do not print entries whose size is less than this.
Defaults to 0.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="Memory.printMemAllocsByType">
<em class="property">proc </em><code class="descname">printMemAllocsByType</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Memory.printMemAllocsByType" title="Permalink to this definition">¶</a></dt>
<dd><p>Print summary information about allocated memory to <code class="docutils literal notranslate"><span class="pre">memLog</span></code>.  The
report contains a section for each top-level locale, containing a
table of entries, one for each different allocation type for which
at least one allocation exists on that locale.  The entries show the
type (that is, the string the code requesting the allocation used to
describe what it would store there) and the total number of
allocations and bytes allocated for that type.</p>
</dd></dl>

<dl class="function">
<dt id="Memory.printMemAllocStats">
<em class="property">proc </em><code class="descname">printMemAllocStats</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Memory.printMemAllocStats" title="Permalink to this definition">¶</a></dt>
<dd><p>Print summary memory statistics to <code class="docutils literal notranslate"><span class="pre">memLog</span></code>.  The report contains
a section for each top-level locale showing the number of bytes of
memory currently allocated, the maximum number allocated at any
point during execution (the high-water mark), and the sum of the
sizes of all allocation and deallocation requests.</p>
</dd></dl>

<dl class="function">
<dt id="Memory.startVerboseMem">
<em class="property">proc </em><code class="descname">startVerboseMem</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Memory.startVerboseMem" title="Permalink to this definition">¶</a></dt>
<dd><p>Start on-the-fly reporting of memory allocations and deallocations
done on any locale.  Continue reporting until <a class="reference internal" href="#Memory.stopVerboseMem" title="Memory.stopVerboseMem"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">stopVerboseMem</span></code></a>
is called.</p>
<p>The reporting output consists of a single line describing each
memory allocation or deallocation, written to <code class="docutils literal notranslate"><span class="pre">memLog</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="Memory.stopVerboseMem">
<em class="property">proc </em><code class="descname">stopVerboseMem</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Memory.stopVerboseMem" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop on-the-fly reporting of memory allocations and deallocations
done on any locale.</p>
</dd></dl>

<dl class="function">
<dt id="Memory.startVerboseMemHere">
<em class="property">proc </em><code class="descname">startVerboseMemHere</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Memory.startVerboseMemHere" title="Permalink to this definition">¶</a></dt>
<dd><p>Start on-the-fly reporting of memory allocations and deallocations
done on this locale.  Continue reporting until
<a class="reference internal" href="#Memory.stopVerboseMemHere" title="Memory.stopVerboseMemHere"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">stopVerboseMemHere</span></code></a> is called.</p>
<p>The reporting output consists of a single line describing each
memory allocation or deallocation, written to <code class="docutils literal notranslate"><span class="pre">memLog</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="Memory.stopVerboseMemHere">
<em class="property">proc </em><code class="descname">stopVerboseMemHere</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Memory.stopVerboseMemHere" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop on-the-fly reporting of memory allocations and deallocations
done on this locale.</p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Path.html" class="btn btn-neutral float-right" title="Path" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Math.html" class="btn btn-neutral float-left" title="Math" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Hewlett Packard Enterprise Development LP

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 



</body>
</html>