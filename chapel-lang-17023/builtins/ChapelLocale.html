

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Locales &mdash; Chapel Documentation 1.24</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/style.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Ranges" href="ChapelRange.html" />
    <link rel="prev" title="Errors" href="ChapelError.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

<a href="../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>1.24
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "1.24";
$pagename = "builtins/ChapelLocale";
include "..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Tools</a></li>
</ul>
<p class="caption"><span class="caption-text">Writing Chapel Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Built-in Types and Functions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Atomics.html">Atomics</a></li>
<li class="toctree-l2"><a class="reference internal" href="Bytes.html">Bytes</a></li>
<li class="toctree-l2"><a class="reference internal" href="ChapelArray.html">Domain and Array Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="ChapelComplex_forDocs.html">Complex</a></li>
<li class="toctree-l2"><a class="reference internal" href="ChapelError.html">Errors</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Locales</a></li>
<li class="toctree-l2"><a class="reference internal" href="ChapelRange.html">Ranges</a></li>
<li class="toctree-l2"><a class="reference internal" href="ChapelSyncvar.html">Synchronization Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="ChapelTuple.html">Tuples</a></li>
<li class="toctree-l2"><a class="reference internal" href="OwnedObject.html">owned</a></li>
<li class="toctree-l2"><a class="reference internal" href="SharedObject.html">shared</a></li>
<li class="toctree-l2"><a class="reference internal" href="String.html">Strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#index">Index</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules/standard.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mason-packages.html">Mason Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Chapel Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Built-in Types and Functions</a> &raquo;</li>
        
      <li>Locales</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/builtins/ChapelLocale.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <span class="target" id="module-ChapelLocale"></span><div class="section" id="locales">
<h1>Locales<a class="headerlink" href="#locales" title="Permalink to this headline">¶</a></h1>
<p>A <em>locale</em> is a Chapel abstraction for a piece of a target
architecture that has processing and storage capabilities.
Generally speaking, the tasks running within a locale have
roughly uniform access to values stored in the locale’s local
memory and longer latencies for accessing the memories of other
locales.  As examples, a single shared memory machine would be
defined as a single locale, while in a system consisting of a
group of network-connected multicore nodes or SMPs each node
would be defined as a locale.</p>
<p>Chapel provides several predefined methods on locales, as well as
a few variables that describe the locales upon which a program is
running.</p>
<p>In addition to what is documented below, <code class="docutils literal notranslate"><span class="pre">numLocales</span></code>, <code class="docutils literal notranslate"><span class="pre">LocaleSpace</span></code>,
and <code class="docutils literal notranslate"><span class="pre">Locales</span></code> are available as global variables.</p>
<p><code class="docutils literal notranslate"><span class="pre">numLocales</span></code> is the number of top-level (network connected) locales.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">config</span> <span class="kd">const</span> <span class="nx">numLocales</span><span class="p">:</span> <span class="kt">int</span><span class="p">;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">LocaleSpace</span></code> is the domain over which the global <code class="docutils literal notranslate"><span class="pre">Locales</span></code> array is
defined.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">LocaleSpace</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="o">..</span><span class="nx">numLocales</span><span class="o">-</span><span class="mi">1</span><span class="p">};</span>
</pre></div>
</div>
<p>The global <code class="docutils literal notranslate"><span class="pre">Locales</span></code> array contains an entry for each top-level locale.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">Locales</span><span class="p">:</span> <span class="p">[</span><span class="nx">LocaleSpace</span><span class="p">]</span> <span class="kt">locale</span><span class="p">;</span>
</pre></div>
</div>
<p>One common code idiom in Chapel is the following, which spreads parallel
tasks across the network-connected locales upon which the program is running:</p>
<blockquote>
<div><div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">coforall</span> <span class="nx">loc</span> <span class="kd">in</span> <span class="nx">Locales</span> <span class="p">{</span> <span class="k">on</span> <span class="nx">loc</span> <span class="p">{</span> <span class="o">..</span><span class="p">.</span> <span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>The default value for a <code class="docutils literal notranslate"><span class="pre">locale</span></code> variable is <code class="docutils literal notranslate"><span class="pre">Locales[0]</span></code></p>
<dl class="chpl function">
<dt id="ChapelLocale.here">
<em class="property">proc </em><code class="sig-name descname">here</code><a class="headerlink" href="#ChapelLocale.here" title="Permalink to this definition">¶</a></dt>
<dd><p>This returns the locale from which the call is made.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>current locale</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>locale</p>
</dd>
</dl>
</dd></dl>

<dl class="chpl method">
<dt id="ChapelLocale.locale.hostname">
<em class="property">proc </em><code class="sig-prename descclassname">locale.</code><code class="sig-name descname">hostname</code><a class="headerlink" href="#ChapelLocale.locale.hostname" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the hostname of this locale.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the hostname of the compute node associated with the locale</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="chpl method">
<dt id="ChapelLocale.locale.name">
<em class="property">proc </em><code class="sig-prename descclassname">locale.</code><code class="sig-name descname">name</code><a class="headerlink" href="#ChapelLocale.locale.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the name of this locale.  In practice, this is often the
same as the hostname, though in some cases (like when using
local launchers), it may be modified.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>locale name</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="chpl method">
<dt id="ChapelLocale.locale.id">
<em class="property">proc </em><code class="sig-prename descclassname">locale.</code><code class="sig-name descname">id</code><a class="headerlink" href="#ChapelLocale.locale.id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the integer identifier for this locale.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>locale number, in the range <code class="docutils literal notranslate"><span class="pre">0..numLocales-1</span></code></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="chpl method">
<dt id="ChapelLocale.locale.maxTaskPar">
<em class="property">proc </em><code class="sig-prename descclassname">locale.</code><code class="sig-name descname">maxTaskPar</code><a class="headerlink" href="#ChapelLocale.locale.maxTaskPar" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the maximum task concurrency that one can expect to
achieve on this locale.  The value is an estimate by the
runtime tasking layer.  Typically it is the number of physical
processor cores available to the program.  Creating more tasks
than this will probably increase walltime rather than decrease
it.</p>
</dd></dl>

<dl class="chpl method">
<dt id="ChapelLocale.locale.numPUs">
<em class="property">proc </em><code class="sig-prename descclassname">locale.</code><code class="sig-name descname">numPUs</code><span class="sig-paren">(</span><em class="sig-param">logical: bool = false</em>, <em class="sig-param">accessible: bool = true</em><span class="sig-paren">)</span><a class="headerlink" href="#ChapelLocale.locale.numPUs" title="Permalink to this definition">¶</a></dt>
<dd><p>A <em>processing unit</em> or <em>PU</em> is an instance of the processor
architecture, basically the thing that executes instructions.
<a class="reference internal" href="#ChapelLocale.locale.numPUs" title="ChapelLocale.locale.numPUs"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">locale.numPUs</span></code></a> tells how many of these are present on this
locale.  It can count either physical PUs (commonly known as
<em>cores</em>) or hardware threads such as hyperthreads and the like.
It can also either take into account any OS limits on which PUs
the program has access to or do its best to ignore such limits.
By default it returns the number of accessible physical cores.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>logical</strong> : <cite>bool</cite> – Count logical PUs (hyperthreads and the like),
or physical ones (cores)?  Defaults to <cite>false</cite>,
for cores.</p></li>
<li><p><strong>accessible</strong> : <cite>bool</cite> – Count only PUs that can be reached, or all of
them?  Defaults to <cite>true</cite>, for accessible PUs.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>number of PUs</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><cite>int</cite></p>
</dd>
</dl>
<p>There are several things that can cause the OS to limit the
processor resources available to a Chapel program.  On plain
Linux systems using the <code class="docutils literal notranslate"><span class="pre">taskset(1)</span></code> command will do it.  On
Cray systems the <code class="docutils literal notranslate"><span class="pre">CHPL_LAUNCHER_CORES_PER_LOCALE</span></code> environment
variable may do it, indirectly via the system job launcher.
Also on Cray systems, using a system job launcher (<code class="docutils literal notranslate"><span class="pre">aprun</span></code> or
<code class="docutils literal notranslate"><span class="pre">slurm</span></code>) to run a Chapel program manually may do it, as can
running programs within Cray batch jobs that have been set up
with limited processor resources.</p>
</dd></dl>

<dl class="chpl method">
<dt id="ChapelLocale.locale.callStackSize">
<em class="property">proc </em><code class="sig-prename descclassname">locale.</code><code class="sig-name descname">callStackSize</code><a class="headerlink" href="#ChapelLocale.locale.callStackSize" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">callStackSize</span></code> holds the size of a task stack on a given
locale.  Thus, <code class="docutils literal notranslate"><span class="pre">here.callStackSize</span></code> is the size of the call
stack for any task on the current locale, including the
caller.</p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ChapelRange.html" class="btn btn-neutral float-right" title="Ranges" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ChapelError.html" class="btn btn-neutral float-left" title="Errors" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Hewlett Packard Enterprise Development LP

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 



</body>
</html>