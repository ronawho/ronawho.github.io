

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Building Chapel &mdash; Chapel Documentation 1.24</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/style.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Compiling Chapel Programs" href="compiling.html" />
    <link rel="prev" title="Setting up Your Environment for Chapel" href="chplenv.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

<a href="../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>1.24
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "1.24";
$pagename = "usingchapel/building";
include "..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Using Chapel</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="prereqs.html">Chapel Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="chplenv.html">Setting up Your Environment for Chapel</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Building Chapel</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#platform-support">Platform Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="#makefile-targets">Makefile Targets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#makefile-options">Makefile Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#platform-specific-settings">Platform-specific Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-chapel">Installing Chapel</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="compiling.html">Compiling Chapel Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="man.html">Chapel Man Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="executing.html">Executing Chapel Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="multilocale.html">Multilocale Chapel Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="launcher.html">Chapel Launchers</a></li>
<li class="toctree-l2"><a class="reference internal" href="tasks.html">Chapel Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">Debugging Chapel Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="bugs.html">Reporting Chapel Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Tools</a></li>
</ul>
<p class="caption"><span class="caption-text">Writing Chapel Programs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../builtins/index.html">Built-in Types and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/standard.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mason-packages.html">Mason Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Chapel Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Using Chapel</a> &raquo;</li>
        
      <li>Building Chapel</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/usingchapel/building.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="building-chapel">
<span id="readme-building"></span><h1>Building Chapel<a class="headerlink" href="#building-chapel" title="Permalink to this headline">¶</a></h1>
<p>To build the Chapel compiler, set up your environment as described in
<a class="reference internal" href="QUICKSTART.html#chapelhome-quickstart"><span class="std std-ref">Chapel Quickstart Instructions</span></a> (or <a class="reference internal" href="chplenv.html#readme-chplenv"><span class="std std-ref">Setting up Your Environment for Chapel</span></a> for more
settings), cd to <code class="docutils literal notranslate"><span class="pre">$CHPL_HOME</span></code>, and run GNU make.</p>
<p>On many systems, GNU make is available simply as <code class="docutils literal notranslate"><span class="pre">make</span></code>. On others, it is
called <code class="docutils literal notranslate"><span class="pre">gmake</span></code>. So, first check if <code class="docutils literal notranslate"><span class="pre">make</span></code> refers to GNU make:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># If the first line includes &quot;GNU Make&quot;, you have GNU Make.</span>
make -v
</pre></div>
</div>
<p>Further instructions will assume <code class="docutils literal notranslate"><span class="pre">make</span></code> refers to GNU Make. If that’s not
the case, you’ll need to replace <code class="docutils literal notranslate"><span class="pre">make</span></code> with <code class="docutils literal notranslate"><span class="pre">gmake</span></code>.</p>
<p>Now build the Chapel compiler:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="nv">$CHPL_HOME</span>
make
</pre></div>
</div>
<p>Parallel builds such as <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">-j</span> <span class="pre">6</span></code> are also supported.</p>
<p>If everything works as intended, you ought to see:</p>
<ol class="arabic">
<li><p>each of the compiler source subdirectories being compiled</p></li>
<li><p>the compiler binary getting linked and stored as:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">$CHPL_HOME/bin/$CHPL_HOST_PLATFORM/chpl</span></code></p>
</div></blockquote>
</li>
<li><p>the runtime support libraries being compiled, archived, and stored
in a configuration-specific subdirectory under:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">$CHPL_HOME/lib/$CHPL_TARGET_PLATFORM.$CHPL_TARGET_COMPILER.../</span></code></p>
</div></blockquote>
</li>
</ol>
<p>If you get an error or failure during the make process, first
double-check that you have the required prerequisites (see
<a class="reference internal" href="prereqs.html#readme-prereqs"><span class="std std-ref">Chapel Prerequisites</span></a>). If you do, please submit a bug report for the failure
and any workaround that you come up with, through <a class="reference internal" href="bugs.html#readme-bugs"><span class="std std-ref">Reporting Chapel Issues</span></a></p>
<p>Note that each make command only builds the compiler and runtime for
the current set of <code class="docutils literal notranslate"><span class="pre">CHPL_</span></code> environment variables defined by (and
inferred for) your environment.  Thus, while the directory structure
above supports the ability to have multiple versions of the compiler
and runtime built simultaneously, only one version will be created for
each make command.  To support additional host/target platforms,
host/target compilers, or threading/communication layers, you will
need to reset your environment variables and re-make.</p>
<p>After a successful build, you should be able to run the compiler and
display its help message using:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>chpl --help
</pre></div>
</div>
<p>In which case, you will be ready to move on to compiling with the
Chapel compiler (see <a class="reference internal" href="compiling.html#readme-compiling"><span class="std std-ref">Compiling Chapel Programs</span></a>).  The rest of this
file gives more information about Chapel’s Makefiles for advanced
users or developers of Chapel.</p>
<div class="section" id="platform-support">
<h2>Platform Support<a class="headerlink" href="#platform-support" title="Permalink to this headline">¶</a></h2>
<p>Currently supported platforms include 32- and 64-bit Linux, Mac OS X,
Cygwin (Windows), SunOS, a variety of current Cray platforms, and a
few systems by other vendors.  Most UNIX-based environments ought to
support Chapel (subject to the assumptions in <a class="reference internal" href="prereqs.html#readme-prereqs"><span class="std std-ref">Chapel Prerequisites</span></a>), but may
not be supported “out-of-the-box” by our current Makefile structure.
See the section below on platform-specific settings for more
information on adding support for additional UNIX-compatible
environments.</p>
<p>Note that a single Chapel installation can simultaneously support
Chapel for multiple platforms and compiler options because all
platform-specific binary files and executables are stored in
subdirectories named by <code class="docutils literal notranslate"><span class="pre">CHPL_</span></code> environment variables.</p>
</div>
<div class="section" id="makefile-targets">
<h2>Makefile Targets<a class="headerlink" href="#makefile-targets" title="Permalink to this headline">¶</a></h2>
<p>The Chapel sources are structured so that a GNU-compatible make
utility can be used in any source directory to build the sources
contained in that directory and its subdirectories.  All of these
Makefiles support the following targets:</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Target</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>(nothing)
default
all</p></td>
<td><p>Build the appropriate output files e.g. objects,
libraries, executables</p></td>
</tr>
<tr class="row-odd"><td><p>clean</p></td>
<td><p>Remove the intermediate files for this configuration</p></td>
</tr>
<tr class="row-even"><td><p>cleanall</p></td>
<td><p>Remove the intermediate files for all configurations</p></td>
</tr>
<tr class="row-odd"><td><p>clobber</p></td>
<td><p>Remove everything created by the Makefiles
Note: make clobber will remove chplconfig</p></td>
</tr>
<tr class="row-even"><td><p>install</p></td>
<td><p>Install chapel to a previously configured location</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Each target processes all subdirectories then the current directory.</p>
</div>
<div class="section" id="makefile-options">
<h2>Makefile Options<a class="headerlink" href="#makefile-options" title="Permalink to this headline">¶</a></h2>
<p>The Chapel makefiles have a few options that enable or disable optimization,
debugging support, profiling, and backend C compiler warnings. The variables
are described below. Set the value to 1 to enable the feature.</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Effect</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DEBUG</p></td>
<td><p>Generate debug information (e.g. add -g to C compiler).</p></td>
</tr>
<tr class="row-odd"><td><p>OPTIMIZE</p></td>
<td><p>Enable optimizations (e.g. add -O3 to C compiler).</p></td>
</tr>
<tr class="row-even"><td><p>PROFILE</p></td>
<td><p>Enable profiling support (e.g. add -pg to C compiler).</p></td>
</tr>
<tr class="row-odd"><td><p>WARNINGS</p></td>
<td><p>Promote backend C compiler warnings to errors.</p></td>
</tr>
<tr class="row-even"><td><p>ASSERTS</p></td>
<td><p>Enables correctness assertions in the compiler and runtime.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="platform-specific-settings">
<span id="id1"></span><h2>Platform-specific Settings<a class="headerlink" href="#platform-specific-settings" title="Permalink to this headline">¶</a></h2>
<p>The structure of Chapel’s Makefiles is designed to factor any
compiler-specific settings in
<code class="docutils literal notranslate"><span class="pre">$CHPL_HOME/make/compiler/Makefile.&lt;compiler&gt;</span></code> where <code class="docutils literal notranslate"><span class="pre">&lt;compiler&gt;</span></code> refers
to <code class="docutils literal notranslate"><span class="pre">$CHPL_HOST_COMPILER</span></code> for the compiler sources and
<code class="docutils literal notranslate"><span class="pre">$CHPL_TARGET_COMPILER</span></code> for the runtime sources and generated code.
Refer to <a class="reference internal" href="chplenv.html#readme-chplenv"><span class="std std-ref">Setting up Your Environment for Chapel</span></a> for more information about these variables and
their default settings.</p>
<p>In addition, any architecture-specific settings are defined in
<code class="docutils literal notranslate"><span class="pre">$CHPL_HOME/make/platform/Makefile.&lt;platform&gt;</span></code>, where <code class="docutils literal notranslate"><span class="pre">&lt;platform&gt;</span></code> refers
to <code class="docutils literal notranslate"><span class="pre">$CHPL_HOST_PLATFORM</span></code> for the compiler sources and
<code class="docutils literal notranslate"><span class="pre">$CHPL_TARGET_PLATFORM</span></code> for the runtime sources and generated code.
Again, <a class="reference internal" href="chplenv.html#readme-chplenv"><span class="std std-ref">Setting up Your Environment for Chapel</span></a> details these variables and their default
settings.</p>
<p>If you try making the compiler and runtime for an unknown platform, it
will assume that you want to use gcc/g++ to compile the code and that
you require no platform-specific settings.  You can add support for a
new build environment by creating <code class="docutils literal notranslate"><span class="pre">Makefile.&lt;compiler&gt;</span></code> and/or
<code class="docutils literal notranslate"><span class="pre">Makefile.&lt;platform&gt;</span></code> files and setting your environment variables to
refer to those files.  If you do develop new build environment support
that you would like to contribute back to the community, we encourage
you to submit a pull request to the <a class="reference external" href="https://github.com/chapel-lang/chapel">Chapel GitHub repository</a>.</p>
</div>
<div class="section" id="installing-chapel">
<span id="readme-installing"></span><h2>Installing Chapel<a class="headerlink" href="#installing-chapel" title="Permalink to this headline">¶</a></h2>
<p>Chapel can be built and installed as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./configure <span class="c1"># adding appropriate options</span>
make
make install <span class="c1"># possibly with elevated privilege</span>
</pre></div>
</div>
<p>See <code class="docutils literal notranslate"><span class="pre">./configure</span> <span class="pre">--help</span></code> for more information on the options available.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">./configure</span></code> will save the current configuration into a
<code class="docutils literal notranslate"><span class="pre">chplconfig</span></code> file and can set the installation path that will be
compiled in to the <code class="docutils literal notranslate"><span class="pre">chpl</span></code> binary.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="compiling.html" class="btn btn-neutral float-right" title="Compiling Chapel Programs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="chplenv.html" class="btn btn-neutral float-left" title="Setting up Your Environment for Chapel" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Hewlett Packard Enterprise Development LP

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 



</body>
</html>