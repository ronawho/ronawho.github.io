

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>DynamicIters &mdash; Chapel Documentation 1.24</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="CPtr" href="CPtr.html" />
    <link rel="prev" title="Barriers" href="Barriers.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

<a href="../../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>1.24
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "1.24";
$pagename = "modules/standard/DynamicIters";
include "../..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Tools</a></li>
</ul>
<p class="caption"><span class="caption-text">Writing Chapel Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../builtins/index.html">Built-in Types and Functions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../standard.html">Standard Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../standard.html#automatic-modules">Automatic Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#data-structures">Data Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#diagnostics">Diagnostics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#files-io">Files/IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#language-support">Language Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#math-numerical">Math/Numerical</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../standard.html#parallelism-distributed-computing">Parallelism/Distributed Computing</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Barriers.html">Barriers</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">DynamicIters</a></li>
<li class="toctree-l3"><a class="reference internal" href="VectorizingIterator.html">VectorizingIterator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#system-interoperability">System/Interoperability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#utilities">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#deprecated-modules">Deprecated Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#index">Index</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mason-packages.html">Mason Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chapel Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../standard.html">Standard Modules</a> &raquo;</li>
        
      <li>DynamicIters</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/modules/standard/DynamicIters.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <span class="target" id="module-DynamicIters"></span><div class="section" id="dynamiciters">
<h1>DynamicIters<a class="headerlink" href="#dynamiciters" title="Permalink to this headline">¶</a></h1>
<p><strong>Usage</strong></p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">DynamicIters</span><span class="p">;</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nx">DynamicIters</span><span class="p">;</span>
</pre></div>
</div>
<p>This module contains several iterators that can be used to drive a <cite>forall</cite>
loop by performing dynamic and adaptive splitting of a range’s iterations.</p>
<p>For more information, see <em>User-Defined Parallel Zippered Iterators
in Chapel</em>. Bradford L. Chamberlain, Sung-Eun Choi, Steven J. Deitz,
Angeles Navarro. <em>PGAS 2011: Fifth Conference on Partitioned Global
Address Space Programming Models</em>, October 2011.</p>
<dl class="chpl data">
<dt id="DynamicIters.debugDynamicIters">
<em class="property">config param </em><code class="sig-name descname">debugDynamicIters</code>: bool = false<a class="headerlink" href="#DynamicIters.debugDynamicIters" title="Permalink to this definition">¶</a></dt>
<dd><p>Toggle debugging output.</p>
</dd></dl>

<dl class="chpl iterfunction">
<dt id="DynamicIters.dynamic">
<em class="property">iter </em><code class="sig-name descname">dynamic</code><span class="sig-paren">(</span><em class="sig-param">c: range(?)</em>, <em class="sig-param">chunkSize: int = 1</em>, <em class="sig-param">numTasks: int = 0</em><span class="sig-paren">)</span><a class="headerlink" href="#DynamicIters.dynamic" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>c</strong> : <cite>range(?)</cite> – The range to iterate over. The length of the range must be greater
than zero.</p></li>
<li><p><strong>chunkSize</strong> : <cite>int</cite> – The size of chunks to be yielded to each thread. Must be
greater than zero.</p></li>
<li><p><strong>numTasks</strong> : <cite>int</cite> – The number of tasks to use. Must be &gt;= zero. If this argument
has the value 0, it will use the value indicated by
<code class="docutils literal notranslate"><span class="pre">dataParTasksPerLocale</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p>Indices in the range <code class="docutils literal notranslate"><span class="pre">c</span></code>.</p>
</dd>
</dl>
<p>This iterator is equivalent to the dynamic scheduling approach of OpenMP.</p>
<p>Given an input range <code class="docutils literal notranslate"><span class="pre">c</span></code>, each task is assigned chunks of size
<code class="docutils literal notranslate"><span class="pre">chunkSize</span></code> from <code class="docutils literal notranslate"><span class="pre">c</span></code> (or the remaining iterations if there are fewer
than <code class="docutils literal notranslate"><span class="pre">chunkSize</span></code>). This continues until there are no remaining iterations
in <code class="docutils literal notranslate"><span class="pre">c</span></code>.</p>
<p>This iterator can be called in serial and zippered contexts.</p>
</dd></dl>

<dl class="chpl iterfunction">
<dt>
<em class="property">iter </em><code class="sig-name descname">dynamic</code><span class="sig-paren">(</span><em class="sig-param">c: domain</em>, <em class="sig-param">chunkSize: int = 1</em>, <em class="sig-param">numTasks: int = 0</em>, <em class="sig-param">parDim: int = 0</em><span class="sig-paren">)</span></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>c</strong> : <cite>domain</cite> – The domain to iterate over. The rank of the domain must be greater
than zero.</p></li>
<li><p><strong>chunkSize</strong> : <cite>int</cite> – The size of chunks to be yielded to each thread. Must be
greater than zero</p></li>
<li><p><strong>numTasks</strong> : <cite>int</cite> – The number of tasks to use. Must be &gt;= zero. If this argument
has the value 0, it will use the value indicated by
<code class="docutils literal notranslate"><span class="pre">dataParTasksPerLocale</span></code>.</p></li>
<li><p><strong>parDim</strong> : <cite>int</cite> – The index of the dimension to parallelize across. Must be &gt;= 0.
Must be &lt; the rank of the domain <code class="docutils literal notranslate"><span class="pre">c</span></code>. Defaults to 0.</p></li>
</ul>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p>Indices of the domain <code class="docutils literal notranslate"><span class="pre">c</span></code></p>
</dd>
</dl>
<p>Given an input domain <code class="docutils literal notranslate"><span class="pre">c</span></code>, each task is assigned slices of <code class="docutils literal notranslate"><span class="pre">c</span></code>. The
chunks each have <code class="docutils literal notranslate"><span class="pre">chunkSize</span></code> slices in them (or the remaining iterations
if there are fewer than <code class="docutils literal notranslate"><span class="pre">chunkSize</span></code>). This continues until there are no
remaining iterations in the dimension of <code class="docutils literal notranslate"><span class="pre">c</span></code> indicated by <code class="docutils literal notranslate"><span class="pre">parDim</span></code>.</p>
<p>This iterator can be called in serial and zippered contexts.</p>
</dd></dl>

<dl class="chpl iterfunction">
<dt id="DynamicIters.guided">
<em class="property">iter </em><code class="sig-name descname">guided</code><span class="sig-paren">(</span><em class="sig-param">c: range(?)</em>, <em class="sig-param">numTasks: int = 0</em><span class="sig-paren">)</span><a class="headerlink" href="#DynamicIters.guided" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>c</strong> : <cite>range(?)</cite> – The range to iterate over. Must have a length greater than zero.</p></li>
<li><p><strong>numTasks</strong> : <cite>int</cite> – The number of tasks to use. Must be &gt;= zero. If this argument
has the value 0, it will use the value indicated by
<code class="docutils literal notranslate"><span class="pre">dataParTasksPerLocale</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p>Indices in the range <code class="docutils literal notranslate"><span class="pre">c</span></code>.</p>
</dd>
</dl>
<p>This iterator is equivalent to the guided policy of OpenMP: Given an input
range <code class="docutils literal notranslate"><span class="pre">c</span></code>, each task is assigned chunks of variable size, until there are
no remaining iterations in <code class="docutils literal notranslate"><span class="pre">c</span></code>. The size of each chunk is the number of
unassigned iterations divided by the number of tasks, <code class="docutils literal notranslate"><span class="pre">numTasks</span></code>. The size
decreases approximately exponentially to 1. The splitting strategy is
therefore adaptive.</p>
<p>This iterator can be called in serial and zippered contexts.</p>
</dd></dl>

<dl class="chpl iterfunction">
<dt>
<em class="property">iter </em><code class="sig-name descname">guided</code><span class="sig-paren">(</span><em class="sig-param">c: domain</em>, <em class="sig-param">numTasks: int = 0</em>, <em class="sig-param">parDim: int = 0</em><span class="sig-paren">)</span></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>c</strong> : <cite>domain</cite> – The domain to iterate over. The rank of the domain must be greater
than zero.</p></li>
<li><p><strong>numTasks</strong> : <cite>int</cite> – The number of tasks to use. Must be &gt;= zero. If this argument
has the value 0, it will use the value indicated by
<code class="docutils literal notranslate"><span class="pre">dataParTasksPerLocale</span></code>.</p></li>
<li><p><strong>parDim</strong> : <cite>int</cite> – The index of the dimension to parallelize across. Must be &gt;= 0.
Must be &lt; the rank of the domain <code class="docutils literal notranslate"><span class="pre">c</span></code>. Defaults to 0.</p></li>
</ul>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p>Indices in the domain <code class="docutils literal notranslate"><span class="pre">c</span></code>.</p>
</dd>
</dl>
<p>This iterator is equivalent to the guided policy of OpenMP.</p>
<p>Given an input domain <code class="docutils literal notranslate"><span class="pre">c</span></code>, each task is assigned slices of variable size,
until there are no remaining iterations in the dimension of <code class="docutils literal notranslate"><span class="pre">c</span></code> indicated
by <code class="docutils literal notranslate"><span class="pre">parDim</span></code>. The size of each chunk is the number of unassigned iterations
divided by the number of tasks, <code class="docutils literal notranslate"><span class="pre">numTasks</span></code>. The size decreases
approximately exponentially to 1. The splitting strategy is therefore
adaptive.</p>
<p>This iterator can be called in serial and zippered contexts.</p>
</dd></dl>

<dl class="chpl iterfunction">
<dt id="DynamicIters.adaptive">
<em class="property">iter </em><code class="sig-name descname">adaptive</code><span class="sig-paren">(</span><em class="sig-param">c: range(?)</em>, <em class="sig-param">numTasks: int = 0</em><span class="sig-paren">)</span><a class="headerlink" href="#DynamicIters.adaptive" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>c</strong> : <cite>range(?)</cite> – The range to iterate over. Must have a length greater than zero.</p></li>
<li><p><strong>numTasks</strong> : <cite>int</cite> – The number of tasks to use. Must be &gt;= zero. If this argument
has the value 0, it will use the value indicated by
<code class="docutils literal notranslate"><span class="pre">dataParTasksPerLocale</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p>Indices in the range <code class="docutils literal notranslate"><span class="pre">c</span></code>.</p>
</dd>
</dl>
<p>This iterator implements a naive adaptive binary splitting work-stealing
strategy: Initially the leader iterator distributes the range to split, <code class="docutils literal notranslate"><span class="pre">c</span></code>,
evenly among the <code class="docutils literal notranslate"><span class="pre">numTasks</span></code> tasks.</p>
<p>Then, each task performs adaptive splitting on its local sub-range’s iterations.
When a task exhausts its local iterations, it steals and splits from the
range of another task (the victim). The splitting method on the local range
and on the victim range is binary: i.e. the size of each chunk is computed as
the number of unassigned iterations divided by 2. There are three stealing
strategies that can be selected at compile time using the config param
<a class="reference internal" href="#DynamicIters.methodStealing" title="DynamicIters.methodStealing"><code class="xref chpl chpl-param docutils literal notranslate"><span class="pre">methodStealing</span></code></a>.</p>
<p>This iterator can be called in serial and zippered contexts.</p>
</dd></dl>

<dl class="chpl enum">
<dt id="DynamicIters.Method">
<em class="property">enum </em><code class="sig-name descname">Method</code> { Whole = 0, RoundRobin = 1, WholeTail = 2 }<a class="headerlink" href="#DynamicIters.Method" title="Permalink to this definition">¶</a></dt>
<dd><p>The enum used to represent adaptive methods.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Whole</span></code>
Each task without work tries to steal from its neighbor range
until it exhausts that range. Then the task continues with the next
neighbor range, and so on until there is no more work. This is the default
policy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RoundRobin</span></code>
Each task without work tries to steal once from its neighbor range, next
from the following neighbor range and so on in a round-robin way until
there is no more work.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WholeTail</span></code>
Similar to the <code class="docutils literal notranslate"><span class="pre">Whole</span></code> method, but now the splitting in the victim
range is performed from its tail.</p></li>
</ul>
</dd></dl>

<dl class="chpl data">
<dt id="DynamicIters.methodStealing">
<em class="property">config param </em><code class="sig-name descname">methodStealing</code> = Method.Whole<a class="headerlink" href="#DynamicIters.methodStealing" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to select the adaptive stealing method. Defaults to <code class="docutils literal notranslate"><span class="pre">Whole</span></code>.
See <a class="reference internal" href="#DynamicIters.Method" title="DynamicIters.Method"><code class="xref chpl chpl-data docutils literal notranslate"><span class="pre">Method</span></code></a> for more information.</p>
</dd></dl>

<dl class="chpl iterfunction">
<dt>
<em class="property">iter </em><code class="sig-name descname">adaptive</code><span class="sig-paren">(</span><em class="sig-param">c: domain</em>, <em class="sig-param">numTasks: int = 0</em>, <em class="sig-param">parDim: int = 0</em><span class="sig-paren">)</span></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>c</strong> : <cite>domain</cite> – The domain to iterate over. Must have a length greater than zero.</p></li>
<li><p><strong>numTasks</strong> : <cite>int</cite> – The number of tasks to use. Must be &gt;= zero. If this argument
has the value 0, it will use the value indicated by
<code class="docutils literal notranslate"><span class="pre">dataParTasksPerLocale</span></code>.</p></li>
<li><p><strong>parDim</strong> : <cite>int</cite> – The index of the dimension to parallelize across. Must be &gt;= 0.
Must be &lt; the rank of the domain <code class="docutils literal notranslate"><span class="pre">c</span></code>. Defaults to 0.</p></li>
</ul>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p>Indices in the domain <code class="docutils literal notranslate"><span class="pre">c</span></code>.</p>
</dd>
</dl>
<p>This iterator implements a naive adaptive binary splitting work-stealing
strategy: Initially, the leader iterator distributes the domain to split,
<code class="docutils literal notranslate"><span class="pre">c</span></code>, evenly among the <code class="docutils literal notranslate"><span class="pre">numTasks</span></code> tasks.</p>
<p>Then, each task performs adaptive splitting on its local sub-domain’s
iterations. When a task exhausts its local iterations, it steals and splits
from the domain of another task (the victim). The splitting method on the
local domain and on the victim domain is binary: i.e. the size of each chunk
is computed as the number of unassigned iterations divided by 2. There are
three stealing strategies that can be selected at compile time using the
config param <a class="reference internal" href="#DynamicIters.methodStealing" title="DynamicIters.methodStealing"><code class="xref chpl chpl-param docutils literal notranslate"><span class="pre">methodStealing</span></code></a> (see range version of iterator above).</p>
<p>This iterator can be called in serial and zippered contexts.</p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="CPtr.html" class="btn btn-neutral float-right" title="CPtr" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Barriers.html" class="btn btn-neutral float-left" title="Barriers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Hewlett Packard Enterprise Development LP

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 



</body>
</html>