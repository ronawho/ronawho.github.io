

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Spawn &mdash; Chapel Documentation 1.24</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Sys" href="Sys.html" />
    <link rel="prev" title="CPtr" href="CPtr.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

<a href="../../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>1.24
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "1.24";
$pagename = "modules/standard/Spawn";
include "../..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Tools</a></li>
</ul>
<p class="caption"><span class="caption-text">Writing Chapel Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../builtins/index.html">Built-in Types and Functions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../standard.html">Standard Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../standard.html#automatic-modules">Automatic Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#data-structures">Data Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#diagnostics">Diagnostics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#files-io">Files/IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#language-support">Language Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#math-numerical">Math/Numerical</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#parallelism-distributed-computing">Parallelism/Distributed Computing</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../standard.html#system-interoperability">System/Interoperability</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="CPtr.html">CPtr</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Spawn</a></li>
<li class="toctree-l3"><a class="reference internal" href="Sys.html">Sys</a></li>
<li class="toctree-l3"><a class="reference internal" href="SysBasic.html">SysBasic</a></li>
<li class="toctree-l3"><a class="reference internal" href="SysCTypes.html">SysCTypes</a></li>
<li class="toctree-l3"><a class="reference internal" href="SysError.html">SysError</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#utilities">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#deprecated-modules">Deprecated Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#index">Index</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mason-packages.html">Mason Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chapel Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../standard.html">Standard Modules</a> &raquo;</li>
        
      <li>Spawn</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/modules/standard/Spawn.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <span class="target" id="module-Spawn"></span><div class="section" id="spawn">
<h1>Spawn<a class="headerlink" href="#spawn" title="Permalink to this headline">¶</a></h1>
<p><strong>Usage</strong></p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Spawn</span><span class="p">;</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nx">Spawn</span><span class="p">;</span>
</pre></div>
</div>
<p>Support launching and interacting with other programs.</p>
<p>Using functions in this module, one can create a subprocess
and possibly capture its output. It is also possible to provide
input to a subprocess.</p>
<p>To start a subprocess, use <a class="reference internal" href="#Spawn.spawn" title="Spawn.spawn"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">spawn</span></code></a> or <a class="reference internal" href="#Spawn.spawnshell" title="Spawn.spawnshell"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">spawnshell</span></code></a>.  To wait for
the subprocess process to finish, use the <a class="reference internal" href="#Spawn.subprocess.wait" title="Spawn.subprocess.wait"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">subprocess.wait</span></code></a> or
<a class="reference internal" href="#Spawn.subprocess.communicate" title="Spawn.subprocess.communicate"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">subprocess.communicate</span></code></a> functions.</p>
<p>This example program produces a listing of files in the current directory with
names that begin with <code class="docutils literal notranslate"><span class="pre">test.</span></code> by using the <code class="docutils literal notranslate"><span class="pre">ls</span></code> command. The
output will be mixed in with the Chapel program’s output.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Spawn</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">sub</span> <span class="o">=</span> <span class="nx">spawn</span><span class="p">([</span><span class="s">&quot;ls&quot;</span><span class="p">,</span> <span class="s">&quot;test.*&quot;</span><span class="p">]);</span>
<span class="nx">sub</span><span class="p">.</span><span class="nx">wait</span><span class="p">();</span>
</pre></div>
</div>
<p>This version also runs the <code class="docutils literal notranslate"><span class="pre">ls</span></code> command but uses a pipe
to read the output from the <code class="docutils literal notranslate"><span class="pre">ls</span></code> command.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Spawn</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">sub</span> <span class="o">=</span> <span class="nx">spawn</span><span class="p">([</span><span class="s">&quot;ls&quot;</span><span class="p">,</span> <span class="s">&quot;test.*&quot;</span><span class="p">],</span> <span class="nx">stdout</span><span class="o">=</span><span class="nx">PIPE</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">line</span><span class="p">:</span><span class="kt">string</span><span class="p">;</span>
<span class="k">while</span> <span class="nx">sub</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">readline</span><span class="p">(</span><span class="nx">line</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">write</span><span class="p">(</span><span class="s">&quot;ls returned: &quot;</span><span class="p">,</span> <span class="nx">line</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">sub</span><span class="p">.</span><span class="nx">wait</span><span class="p">();</span>
</pre></div>
</div>
<p>Here is an example program that provides input to a subprocess in addition to
capturing its output.  This version uses the <code class="docutils literal notranslate"><span class="pre">cat</span></code> command, which just prints
back its input.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Spawn</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">sub</span> <span class="o">=</span> <span class="nx">spawn</span><span class="p">([</span><span class="s">&quot;cat&quot;</span><span class="p">],</span> <span class="nx">stdin</span><span class="o">=</span><span class="nx">BUFFERED_PIPE</span><span class="p">,</span> <span class="nx">stdout</span><span class="o">=</span><span class="nx">PIPE</span><span class="p">);</span>

<span class="nx">sub</span><span class="p">.</span><span class="nx">stdin</span><span class="p">.</span><span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">);</span>
<span class="nx">sub</span><span class="p">.</span><span class="nx">stdin</span><span class="p">.</span><span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;World&quot;</span><span class="p">);</span>

<span class="nx">sub</span><span class="p">.</span><span class="nx">communicate</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">line</span><span class="p">:</span><span class="kt">string</span><span class="p">;</span>
<span class="k">while</span> <span class="nx">sub</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">readline</span><span class="p">(</span><span class="nx">line</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">write</span><span class="p">(</span><span class="s">&quot;Got line: &quot;</span><span class="p">,</span> <span class="nx">line</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// prints out:</span>
<span class="c1">// Got line: Hello</span>
<span class="c1">// Got line: World</span>
</pre></div>
</div>
<p>Here is a final example in which the Chapel program uses 2 tasks
to work with a subprocess. One task is producing data and the
other task is consuming it.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Spawn</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">];</span>

<span class="kd">var</span> <span class="nx">sub</span> <span class="o">=</span> <span class="nx">spawn</span><span class="p">([</span><span class="s">&quot;cat&quot;</span><span class="p">],</span> <span class="nx">stdin</span><span class="o">=</span><span class="nx">PIPE</span><span class="p">,</span> <span class="nx">stdout</span><span class="o">=</span><span class="nx">PIPE</span><span class="p">);</span>
<span class="k">cobegin</span> <span class="p">{</span>
  <span class="p">{</span>
    <span class="c1">// one task writes data to the subprocess</span>
    <span class="k">for</span> <span class="nx">x</span> <span class="kd">in</span> <span class="nx">input</span> <span class="p">{</span>
      <span class="nx">sub</span><span class="p">.</span><span class="nx">stdin</span><span class="p">.</span><span class="nx">writeln</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// this close is important; otherwise the other task blocks forever</span>
    <span class="nx">sub</span><span class="p">.</span><span class="nx">stdin</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">line</span><span class="p">:</span><span class="kt">string</span><span class="p">;</span>
    <span class="k">while</span> <span class="nx">sub</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">readln</span><span class="p">(</span><span class="nx">line</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;Got line &quot;</span><span class="p">,</span> <span class="nx">line</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nx">sub</span><span class="p">.</span><span class="nx">wait</span><span class="p">();</span>

<span class="c1">// prints out:</span>
<span class="c1">// Got line: a</span>
<span class="c1">// Got line: b</span>
<span class="c1">// Got line: c</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Creating a subprocess that uses <a class="reference internal" href="#Spawn.PIPE" title="Spawn.PIPE"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">PIPE</span></code></a> to provide
input or capture output does not work when using the ugni communications layer
with hugepages enabled and when using more than one locale. In this
circumstance, the program will halt with an error message. These scenarios do
work when using GASNet instead of the ugni layer.</p>
</div>
<dl class="chpl record">
<dt id="Spawn.subprocess">
<em class="property">record </em><code class="sig-name descname">subprocess</code><a class="headerlink" href="#Spawn.subprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>This record represents a subprocess.</p>
<p>Note that the subprocess will not be waited for if this record
goes out of scope. Channels opened to communicate with the subprocess
will be closed if the record goes out of scope, however.</p>
<p>Generally, it is important to call <a class="reference internal" href="#Spawn.subprocess.wait" title="Spawn.subprocess.wait"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">subprocess.wait</span></code></a> to wait for the
process to complete. If the parent process is using pipes to communicate
with the subprocess, the parent process may call <a class="reference internal" href="#Spawn.subprocess.close" title="Spawn.subprocess.close"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">subprocess.close</span></code></a>
in order to close the pipes and free any buffers. Such calls are
generally not needed since the channels will be closed when the
subprocess record is automatically destroyed.</p>
<dl class="chpl attribute">
<dt id="Spawn.subprocess.kind">
<em class="property">param </em><code class="sig-name descname">kind</code>: iokind<a class="headerlink" href="#Spawn.subprocess.kind" title="Permalink to this definition">¶</a></dt>
<dd><p>The kind of a subprocess is used to create the types
for any channels that are necessary.</p>
</dd></dl>

<dl class="chpl attribute">
<dt id="Spawn.subprocess.locking">
<em class="property">param </em><code class="sig-name descname">locking</code>: bool<a class="headerlink" href="#Spawn.subprocess.locking" title="Permalink to this definition">¶</a></dt>
<dd><p>As with kind, this value is used to create the types
for any channels that are necessary.</p>
</dd></dl>

<dl class="chpl attribute">
<dt id="Spawn.subprocess.pid">
<em class="property">var </em><code class="sig-name descname">pid</code>: int(64)<a class="headerlink" href="#Spawn.subprocess.pid" title="Permalink to this definition">¶</a></dt>
<dd><p>The Process ID number of the spawned process</p>
</dd></dl>

<dl class="chpl attribute">
<dt id="Spawn.subprocess.running">
<em class="property">var </em><code class="sig-name descname">running</code>: bool<a class="headerlink" href="#Spawn.subprocess.running" title="Permalink to this definition">¶</a></dt>
<dd><p><cite>false</cite> if this library knows that the subprocess is not running</p>
</dd></dl>

<dl class="chpl attribute">
<dt id="Spawn.subprocess.exit_status">
<em class="property">var </em><code class="sig-name descname">exit_status</code>: int<a class="headerlink" href="#Spawn.subprocess.exit_status" title="Permalink to this definition">¶</a></dt>
<dd><p>The exit status from the subprocess, or possibly a value &gt;= 256
if there was en error when creating the subprocess</p>
</dd></dl>

<dl class="chpl method">
<dt id="Spawn.subprocess.stdin">
<em class="property">proc </em><code class="sig-name descname">stdin</code> throws<a class="headerlink" href="#Spawn.subprocess.stdin" title="Permalink to this definition">¶</a></dt>
<dd><p>Access the stdin pipe for the subprocess. The parent process
can write to the subprocess through this pipe if the subprocess
was created with stdin=PIPE.</p>
<dl class="field-list simple">
<dt class="field-odd">Throws</dt>
<dd class="field-odd"><p><strong>SystemError</strong> – If the subprocess does not have a stdin pipe open.</p>
</dd>
</dl>
</dd></dl>

<dl class="chpl method">
<dt id="Spawn.subprocess.stdout">
<em class="property">proc </em><code class="sig-name descname">stdout</code> throws<a class="headerlink" href="#Spawn.subprocess.stdout" title="Permalink to this definition">¶</a></dt>
<dd><p>Access the stdout pipe for the subprocess. The parent process
can read from the subprocess through this pipe if the subprocess
was created with stdout=PIPE.</p>
<dl class="field-list simple">
<dt class="field-odd">Throws</dt>
<dd class="field-odd"><p><strong>SystemError</strong> – If the subprocess does not have a stdout pipe open.</p>
</dd>
</dl>
</dd></dl>

<dl class="chpl method">
<dt id="Spawn.subprocess.stderr">
<em class="property">proc </em><code class="sig-name descname">stderr</code> throws<a class="headerlink" href="#Spawn.subprocess.stderr" title="Permalink to this definition">¶</a></dt>
<dd><p>Access the stderr pipe for the subprocess. The parent process
can read from the subprocess through this pipe if the subprocess
was created with stderr=PIPE.</p>
<dl class="field-list simple">
<dt class="field-odd">Throws</dt>
<dd class="field-odd"><p><strong>SystemError</strong> – If the subprocess does not have a stderr pipe open.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="chpl data">
<dt id="Spawn.FORWARD">
<em class="property">const </em><code class="sig-name descname">FORWARD</code> = QIO_FD_FORWARD<a class="headerlink" href="#Spawn.FORWARD" title="Permalink to this definition">¶</a></dt>
<dd><p>FORWARD indicates that the child process should inherit
the stdin/stdout/stderr of this process.</p>
</dd></dl>

<dl class="chpl data">
<dt id="Spawn.CLOSE">
<em class="property">const </em><code class="sig-name descname">CLOSE</code> = QIO_FD_CLOSE<a class="headerlink" href="#Spawn.CLOSE" title="Permalink to this definition">¶</a></dt>
<dd><p>CLOSE indicates that the child process should close
its stdin/stdout/stderr.</p>
</dd></dl>

<dl class="chpl data">
<dt id="Spawn.PIPE">
<em class="property">const </em><code class="sig-name descname">PIPE</code> = QIO_FD_PIPE<a class="headerlink" href="#Spawn.PIPE" title="Permalink to this definition">¶</a></dt>
<dd><p>PIPE indicates that the spawn operation should set up
a pipe between the parent process and the child process
so that the parent process can provide input to the
child process or capture its output.</p>
</dd></dl>

<dl class="chpl data">
<dt id="Spawn.STDOUT">
<em class="property">const </em><code class="sig-name descname">STDOUT</code> = QIO_FD_TO_STDOUT<a class="headerlink" href="#Spawn.STDOUT" title="Permalink to this definition">¶</a></dt>
<dd><p>STDOUT indicates that the stderr stream of the child process
should be forwarded to its stdout stream.</p>
</dd></dl>

<dl class="chpl data">
<dt id="Spawn.BUFFERED_PIPE">
<em class="property">const </em><code class="sig-name descname">BUFFERED_PIPE</code> = QIO_FD_BUFFERED_PIPE<a class="headerlink" href="#Spawn.BUFFERED_PIPE" title="Permalink to this definition">¶</a></dt>
<dd><p>BUFFERED_PIPE is the same as PIPE, but when used for stdin causes all data
to be buffered and sent on the communicate() call. This avoids certain
deadlock scenarios where stdout or stderr are PIPE. In particular, without
BUFFERED_PIPE, the sub-process might block on writing output which will not
be consumed until the communicate() call.</p>
</dd></dl>

<dl class="chpl function">
<dt id="Spawn.spawn">
<em class="property">proc </em><code class="sig-name descname">spawn</code><span class="sig-paren">(</span><em class="sig-param">args: [] string</em>, <em class="sig-param">env: [] string = Spawn.empty_env</em>, <em class="sig-param">executable = &quot;&quot;</em>, <em class="sig-param">stdin: ?t = FORWARD</em>, <em class="sig-param">stdout: ?u = FORWARD</em>, <em class="sig-param">stderr: ?v = FORWARD</em>, <em class="sig-param">param kind = iokind.dynamic</em>, <em class="sig-param">param locking = true</em><span class="sig-paren">)</span> throws<a class="headerlink" href="#Spawn.spawn" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a subprocess.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – An array of strings storing the command to run and
its arguments. The command to run is always the first argument.
The command could be found in the current PATH or
it could be a full path to a file to execute. If the
executable argument is set, the first argument will
be the name of the spawned program provided to that
program and typically shown in process listings.</p></li>
<li><p><strong>env</strong> – An array of strings storing the environment to use when
spawning the child process instead of forwarding the
current environment. By default, this argument
is an empty array. In that case,
the current environment will be forwarded to the child
process.</p></li>
<li><p><strong>executable</strong> – By default, the executable argument is “”. In that
case, the program to launch is the first element
of the args array. If the executable
argument is provided, it will be used instead of
the first element of the args array as the program
to launch. In either case, the program could be
found by searching the PATH.</p></li>
<li><p><strong>stdin</strong> – indicates how the standard input of the child process
should be handled. It could be <a class="reference internal" href="#Spawn.FORWARD" title="Spawn.FORWARD"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">FORWARD</span></code></a>,
<a class="reference internal" href="#Spawn.CLOSE" title="Spawn.CLOSE"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">CLOSE</span></code></a>, <a class="reference internal" href="#Spawn.PIPE" title="Spawn.PIPE"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">PIPE</span></code></a>, or a file
descriptor number to use. Defaults to <a class="reference internal" href="#Spawn.FORWARD" title="Spawn.FORWARD"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">FORWARD</span></code></a>.</p></li>
<li><p><strong>stdout</strong> – indicates how the standard output of the child process
should be handled. It could be <a class="reference internal" href="#Spawn.FORWARD" title="Spawn.FORWARD"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">FORWARD</span></code></a>,
<a class="reference internal" href="#Spawn.CLOSE" title="Spawn.CLOSE"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">CLOSE</span></code></a>, <a class="reference internal" href="#Spawn.PIPE" title="Spawn.PIPE"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">PIPE</span></code></a>, or a file
descriptor number to use. Defaults to <a class="reference internal" href="#Spawn.FORWARD" title="Spawn.FORWARD"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">FORWARD</span></code></a>.</p></li>
<li><p><strong>stderr</strong> – indicates how the standard error of the child process
should be handled. It could be <a class="reference internal" href="#Spawn.FORWARD" title="Spawn.FORWARD"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">FORWARD</span></code></a>,
<a class="reference internal" href="#Spawn.CLOSE" title="Spawn.CLOSE"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">CLOSE</span></code></a>, <a class="reference internal" href="#Spawn.PIPE" title="Spawn.PIPE"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">PIPE</span></code></a>, <a class="reference internal" href="#Spawn.STDOUT" title="Spawn.STDOUT"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">STDOUT</span></code></a>, or
a file descriptor number to use. Defaults to
<a class="reference internal" href="#Spawn.FORWARD" title="Spawn.FORWARD"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">FORWARD</span></code></a>.</p></li>
<li><p><strong>kind</strong> – What kind of channels should be created when
<a class="reference internal" href="#Spawn.PIPE" title="Spawn.PIPE"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">PIPE</span></code></a> is used. This argument is used to set
<a class="reference internal" href="#Spawn.subprocess.kind" title="Spawn.subprocess.kind"><code class="xref chpl chpl-attr docutils literal notranslate"><span class="pre">subprocess.kind</span></code></a> in the resulting subprocess.
Defaults to <a class="reference internal" href="IO.html#IO.iokind" title="IO.iokind"><code class="xref chpl chpl-type docutils literal notranslate"><span class="pre">IO.iokind</span></code></a> <code class="docutils literal notranslate"><span class="pre">iokind.dynamic</span></code>.</p></li>
<li><p><strong>locking</strong> – Should channels created use locking?
This argument is used to set <a class="reference internal" href="#Spawn.subprocess.locking" title="Spawn.subprocess.locking"><code class="xref chpl chpl-attr docutils literal notranslate"><span class="pre">subprocess.locking</span></code></a>
in the resulting subprocess. Defaults to <cite>true</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <a class="reference internal" href="#Spawn.subprocess" title="Spawn.subprocess"><code class="xref chpl chpl-record docutils literal notranslate"><span class="pre">subprocess</span></code></a> with kind and locking set according
to the arguments.</p>
</dd>
<dt class="field-odd">Throws</dt>
<dd class="field-odd"><p><strong>IllegalArgumentError</strong> – Thrown when <code class="docutils literal notranslate"><span class="pre">args</span></code> is an empty array.</p>
</dd>
</dl>
</dd></dl>

<dl class="chpl function">
<dt id="Spawn.spawnshell">
<em class="property">proc </em><code class="sig-name descname">spawnshell</code><span class="sig-paren">(</span><em class="sig-param">command: string</em>, <em class="sig-param">env: [] string = Spawn.empty_env</em>, <em class="sig-param">stdin: ?t = FORWARD</em>, <em class="sig-param">stdout: ?u = FORWARD</em>, <em class="sig-param">stderr: ?v = FORWARD</em>, <em class="sig-param">executable = &quot;/bin/sh&quot;</em>, <em class="sig-param">shellarg = &quot;-c&quot;</em>, <em class="sig-param">param kind = iokind.dynamic</em>, <em class="sig-param">param locking = true</em><span class="sig-paren">)</span> throws<a class="headerlink" href="#Spawn.spawnshell" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a subprocess by invoking a shell.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since the command string is passed to a shell, it is
very unsecure to pass user input to this command
without proper quoting.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>command</strong> – A string representing the command to run.
This string will be interpreted by the shell.</p></li>
<li><p><strong>env</strong> – An array of strings storing the environment to use when
spawning the child process instead of forwarding the
current environment. By default, this argument
is an empty array. In that case,
the current environment will be forwarded to the child
process.</p></li>
<li><p><strong>stdin</strong> – indicates how the standard input of the child process
should be handled. It could be <a class="reference internal" href="#Spawn.FORWARD" title="Spawn.FORWARD"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">FORWARD</span></code></a>,
<a class="reference internal" href="#Spawn.CLOSE" title="Spawn.CLOSE"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">CLOSE</span></code></a>, <a class="reference internal" href="#Spawn.PIPE" title="Spawn.PIPE"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">PIPE</span></code></a>, or a file
descriptor number to use. Defaults to <a class="reference internal" href="#Spawn.FORWARD" title="Spawn.FORWARD"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">FORWARD</span></code></a>.</p></li>
<li><p><strong>stdout</strong> – indicates how the standard output of the child process
should be handled. It could be <a class="reference internal" href="#Spawn.FORWARD" title="Spawn.FORWARD"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">FORWARD</span></code></a>,
<a class="reference internal" href="#Spawn.CLOSE" title="Spawn.CLOSE"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">CLOSE</span></code></a>, <a class="reference internal" href="#Spawn.PIPE" title="Spawn.PIPE"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">PIPE</span></code></a>, or a file
descriptor number to use. Defaults to <a class="reference internal" href="#Spawn.FORWARD" title="Spawn.FORWARD"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">FORWARD</span></code></a>.</p></li>
<li><p><strong>stderr</strong> – indicates how the standard error of the child process
should be handled. It could be <a class="reference internal" href="#Spawn.FORWARD" title="Spawn.FORWARD"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">FORWARD</span></code></a>,
<a class="reference internal" href="#Spawn.CLOSE" title="Spawn.CLOSE"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">CLOSE</span></code></a>, <a class="reference internal" href="#Spawn.PIPE" title="Spawn.PIPE"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">PIPE</span></code></a>, <a class="reference internal" href="#Spawn.STDOUT" title="Spawn.STDOUT"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">STDOUT</span></code></a>, or
a file descriptor number to use. Defaults to
<a class="reference internal" href="#Spawn.FORWARD" title="Spawn.FORWARD"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">FORWARD</span></code></a>.</p></li>
<li><p><strong>executable</strong> – By default, the executable argument is “/bin/sh”.
That directs the subprocess to run the /bin/sh shell
in order to interpret the command string.</p></li>
<li><p><strong>shellarg</strong> – An argument to pass to the shell before
the command string. By default this is “-c”.</p></li>
<li><p><strong>kind</strong> – What kind of channels should be created when
<a class="reference internal" href="#Spawn.PIPE" title="Spawn.PIPE"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">PIPE</span></code></a> is used. This argument is used to set
<a class="reference internal" href="#Spawn.subprocess.kind" title="Spawn.subprocess.kind"><code class="xref chpl chpl-attr docutils literal notranslate"><span class="pre">subprocess.kind</span></code></a> in the resulting subprocess.
Defaults to <a class="reference internal" href="IO.html#IO.iokind" title="IO.iokind"><code class="xref chpl chpl-type docutils literal notranslate"><span class="pre">IO.iokind</span></code></a> <code class="docutils literal notranslate"><span class="pre">iokind.dynamic</span></code>.</p></li>
<li><p><strong>locking</strong> – Should channels created use locking?
This argument is used to set <a class="reference internal" href="#Spawn.subprocess.locking" title="Spawn.subprocess.locking"><code class="xref chpl chpl-attr docutils literal notranslate"><span class="pre">subprocess.locking</span></code></a>
in the resulting subprocess. Defaults to <cite>true</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <a class="reference internal" href="#Spawn.subprocess" title="Spawn.subprocess"><code class="xref chpl chpl-record docutils literal notranslate"><span class="pre">subprocess</span></code></a> with kind and locking set according
to the arguments.</p>
</dd>
<dt class="field-odd">Throws</dt>
<dd class="field-odd"><p><strong>IllegalArgumentError</strong> – Thrown when <code class="docutils literal notranslate"><span class="pre">command</span></code> is an empty string.</p>
</dd>
</dl>
</dd></dl>

<dl class="chpl method">
<dt id="Spawn.subprocess.poll">
<em class="property">proc </em><code class="sig-prename descclassname">subprocess.</code><code class="sig-name descname">poll</code><span class="sig-paren">(</span><span class="sig-paren">)</span> throws<a class="headerlink" href="#Spawn.subprocess.poll" title="Permalink to this definition">¶</a></dt>
<dd><p>Check to see if a child process has terminated.
If the child process has terminated, after this
call, <a class="reference internal" href="#Spawn.subprocess.running" title="Spawn.subprocess.running"><code class="xref chpl chpl-attr docutils literal notranslate"><span class="pre">running</span></code></a> will be <cite>false</cite>.</p>
</dd></dl>

<dl class="chpl method">
<dt id="Spawn.subprocess.wait">
<em class="property">proc </em><code class="sig-prename descclassname">subprocess.</code><code class="sig-name descname">wait</code><span class="sig-paren">(</span><em class="sig-param">buffer = true</em><span class="sig-paren">)</span> throws<a class="headerlink" href="#Spawn.subprocess.wait" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for a child process to complete. After this function
returns, <a class="reference internal" href="#Spawn.subprocess.running" title="Spawn.subprocess.running"><code class="xref chpl chpl-attr docutils literal notranslate"><span class="pre">running</span></code></a> is <cite>false</cite> and
<a class="reference internal" href="#Spawn.subprocess.exit_status" title="Spawn.subprocess.exit_status"><code class="xref chpl chpl-attr docutils literal notranslate"><span class="pre">exit_status</span></code></a> stores the exit code returned
by the subprocess.</p>
<p>If <cite>buffer</cite> is <cite>true</cite>, then this call will handle cases in which
stdin, stdout, or stderr for the child process is <a class="reference internal" href="#Spawn.PIPE" title="Spawn.PIPE"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">PIPE</span></code></a> by writing
any input to the child process and buffering up the output of the child
process as necessary while waiting for it to terminate. It will do
so in the same manner as <a class="reference internal" href="#Spawn.subprocess.communicate" title="Spawn.subprocess.communicate"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">subprocess.communicate</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Do not use <cite>buffer</cite> <cite>false</cite> when using <a class="reference internal" href="#Spawn.PIPE" title="Spawn.PIPE"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">PIPE</span></code></a> for stdin,
stdout, or stderr.  If <cite>buffer</cite> is <cite>false</cite>, this function does not
try to send any buffered input to the child process and so could result
in a hang if the child process is waiting for input to finish.
Similarly, this function does not consume the output from the child
process and so the child process could hang while waiting to write data
to its output while the parent process is waiting for it to complete
(and not consuming its output).</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><p><strong>buffer</strong> – if <cite>true</cite>, buffer input and output pipes (see above).</p>
</dd>
</dl>
</dd></dl>

<dl class="chpl method">
<dt id="Spawn.subprocess.communicate">
<em class="property">proc </em><code class="sig-prename descclassname">subprocess.</code><code class="sig-name descname">communicate</code><span class="sig-paren">(</span><span class="sig-paren">)</span> throws<a class="headerlink" href="#Spawn.subprocess.communicate" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for a child process to complete. After this function
returns, <a class="reference internal" href="#Spawn.subprocess.running" title="Spawn.subprocess.running"><code class="xref chpl chpl-attr docutils literal notranslate"><span class="pre">running</span></code></a> is <cite>false</cite> and
<a class="reference internal" href="#Spawn.subprocess.exit_status" title="Spawn.subprocess.exit_status"><code class="xref chpl chpl-attr docutils literal notranslate"><span class="pre">exit_status</span></code></a> stores the exit code returned
by the subprocess.</p>
<p>This function handles cases in which stdin, stdout, or stderr
for the child process is <a class="reference internal" href="#Spawn.PIPE" title="Spawn.PIPE"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">PIPE</span></code></a> by writing any
input to the child process and buffering up the output
of the child process as necessary while waiting for
it to terminate.</p>
</dd></dl>

<dl class="chpl method">
<dt id="Spawn.subprocess.close">
<em class="property">proc </em><code class="sig-prename descclassname">subprocess.</code><code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span> throws<a class="headerlink" href="#Spawn.subprocess.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close any open channels and pipes for interacting with a subprocess.  This
function does not wait for the subprocess to complete.  Note that it is
generally not necessary to call this function since these channels will be
closed when the subprocess record goes out of scope.</p>
</dd></dl>

<dl class="chpl method">
<dt id="Spawn.subprocess.send_signal">
<em class="property">proc </em><code class="sig-prename descclassname">subprocess.</code><code class="sig-name descname">send_signal</code><span class="sig-paren">(</span><em class="sig-param">signal: int</em><span class="sig-paren">)</span> throws<a class="headerlink" href="#Spawn.subprocess.send_signal" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a signal to a child process.</p>
<p>Declarations for POSIX.1.2008 signals are provided in this module.
These include <cite>SIGABRT</cite>, <cite>SIGALRM</cite>, <cite>SIGBUS</cite>, <cite>SIGCHLD</cite>, <cite>SIGCONT</cite>,
<cite>SIGFPE</cite>, <cite>SIGHUP</cite>, <cite>SIGILL</cite>, <cite>SIGINT</cite>, <cite>SIGKILL</cite>, <cite>SIGPIPE</cite>, <cite>SIGQUIT</cite>,
<cite>SIGSEGV</cite>, <cite>SIGSTOP</cite>, <cite>SIGTERM</cite>, <cite>SIGTRAP</cite>, <cite>SIGTSTP</cite>, <cite>SIGTTIN</cite>,
<cite>SIGTTOU</cite>, <cite>SIGURG</cite>, <cite>SIGUSR1</cite>, <cite>SIGUSR2</cite>, <cite>SIGXCPU</cite>, <cite>SIGXFSZ</cite>.</p>
<p>See your system’s documentation for their meaning:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">man</span> <span class="n">signal</span>
</pre></div>
</div>
<p>Other values for <cite>signal</cite> are system-specific and can be declared in this
way, for example:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">extern</span> <span class="kd">const</span> <span class="nx">SIGPOLL</span><span class="p">:</span> <span class="nx">c_int</span><span class="p">;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><p><strong>signal</strong> – the signal to send</p>
</dd>
</dl>
</dd></dl>

<dl class="chpl method">
<dt id="Spawn.subprocess.kill">
<em class="property">proc </em><code class="sig-prename descclassname">subprocess.</code><code class="sig-name descname">kill</code><span class="sig-paren">(</span><span class="sig-paren">)</span> throws<a class="headerlink" href="#Spawn.subprocess.kill" title="Permalink to this definition">¶</a></dt>
<dd><p>Unconditionally kill the child process.  The associated signal,
<cite>SIGKILL</cite>, cannot be caught by the child process. See
<a class="reference internal" href="#Spawn.subprocess.send_signal" title="Spawn.subprocess.send_signal"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">subprocess.send_signal</span></code></a>.</p>
</dd></dl>

<dl class="chpl method">
<dt id="Spawn.subprocess.terminate">
<em class="property">proc </em><code class="sig-prename descclassname">subprocess.</code><code class="sig-name descname">terminate</code><span class="sig-paren">(</span><span class="sig-paren">)</span> throws<a class="headerlink" href="#Spawn.subprocess.terminate" title="Permalink to this definition">¶</a></dt>
<dd><p>Request termination of the child process.  The associated signal,
<cite>SIGTERM</cite>, may be caught and handled by the child process. See
<a class="reference internal" href="#Spawn.subprocess.send_signal" title="Spawn.subprocess.send_signal"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">subprocess.send_signal</span></code></a>.</p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Sys.html" class="btn btn-neutral float-right" title="Sys" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="CPtr.html" class="btn btn-neutral float-left" title="CPtr" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Hewlett Packard Enterprise Development LP

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 



</body>
</html>